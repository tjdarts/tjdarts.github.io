(this.webpackJsonptjdarts=this.webpackJsonptjdarts||[]).push([[0],{106:function(e,t,n){},107:function(e,t,n){"use strict";n.r(t);var r=n(2),a=n(0),s=n.n(a),o=n(11),c=n.n(o),i=n(145),u=n(146),l=n(78),d=n(19),h=["arcade","home"],f=[{id:"301",displayName:"301",name:"zero-one",score:301,rounds:15,platforms:h,credit:1},{id:"501",displayName:"501",name:"zero-one",score:501,rounds:20,platforms:h,credit:2},{id:"701",displayName:"701",name:"zero-one",score:701,rounds:20,platforms:h,credit:3},{id:"countUp",displayName:"Count-up",name:"count-up",rounds:8,platforms:h,credit:2},{id:"ninjaCountUp",displayName:"Ninja count-up",name:"ninja-count-up",rounds:8,platforms:h,credit:2},{id:"threeDartsOnePrize",displayName:"2165",name:"3-darts-1-prize",rounds:1,platforms:[h[0]],credit:1}],m="topGames",g={platform:h[0],dartboard:"granboard",coinAcceptor:"mouse",defaultGameCategory:m,defaultGames:{topGames:[f[0],f[1],f[3],f[4],f[5]]}.topGames,maxPlayers:4,players:Object(d.a)(Array(4).keys()).map((function(e){return{name:"Player ".concat(e+1)}})),soundTheme:"default",styleTheme:"default",users:["itoyxd@gmail.com"],isArcadeMode:function(){return g.platform===h[0]}},b=g,p=n(64),j=n(69),O=n(38);p.a.use(j.a).use(O.e).init({resources:{en:{translations:{", ":", ","01 game":"01 game","1 player":"1 player","2 players":"2 players","3 players":"3 players","4 players":"4 players",2165:"2165",301:"301",501:"501",701:"701",Back:"Back","Bust \ud83d\ude31":"Bust \ud83d\ude31","Connect dartboard":"Connect dartboard","Count-up":"Count-up","Game on":"Game on","Ninja count-up":"Ninja count-up","One bull":"One bull","Player 1":"Player 1","Player 2":"Player 2","Player 3":"Player 3","Player 4":"Player 4","Press \ud83d\udd34 to change player":"Press \ud83d\udd34 to change player","Press \ud83d\udd34 to next round":"Press \ud83d\udd34 to next round",Rounds:"Rounds","\ud83d\ude31 Bust \ud83d\udc94":"\ud83d\ude31 Bust \ud83d\udc94","\ud83d\ude31 You failed \ud83d\udc94":"\ud83d\ude31 You failed \ud83d\udc94",bullseyeAward:"\ud83d\udd25 {{bull}} \ud83c\udfaf",credit:"Credit: {{credit}}",moreCoins:"Need {{coins}} more coins to insert",requiredCredits:"{{credit}} credits",score:"{{score}} points",version:"Version: {{version}}",winnersAward:"\ud83c\udfc6 {{name}} wins! \u270c\ufe0f",winnersAwardForThreeDartsOnePrizeGame:"\ud83c\udfc6 {{names}} gets free credits! \u270c\ufe0f"}},zh:{translations:{", ":"\u3001","01 game":"01 \u904a\u6232","1 player":"\u4e00\u540d\u73a9\u5bb6","2 players":"\u5169\u540d\u73a9\u5bb6","3 players":"\u4e09\u540d\u73a9\u5bb6","4 players":"\u56db\u540d\u73a9\u5bb6",2165:"\u8cb3\u58f9\u9678\u4f0d",301:"\u53c3\u96f6\u58f9",501:"\u4f0d\u96f6\u58f9",701:"\u67d2\u96f6\u58f9",Back:"\u4e0a\u4e00\u9801","Bust \ud83d\ude31":"\u7206 \ud83d\ude31","Connect dartboard":"\u9023\u63a5\u98db\u93e2\u9776","Count-up":"\u5206\u6578\u8dd1\u8d77\u4f86","Game on":"\u958b\u59cb\u904a\u6232","Ninja count-up":"\u5fcd\u8005\u306e\u624b\u88cf\u528d","One bull":"\u4e00\u96bb\u7a7f\u96f2\u7d05\u5fc3\u7bad \ud83d\ude1c","Player 1":"\u53f0\u5ba2","Player 2":"\u7063\u7063","Player 3":"\u91d1\u8001","Player 4":"\u93e2\u54e5","Press \ud83d\udd34 to change player":"\u6309 \ud83d\udd34 \u63db\u4e0b\u4e00\u500b\u73a9\u5bb6","Press \ud83d\udd34 to next round":"\u6309 \ud83d\udd34 \u5230\u4e0b\u4e00\u500b\u56de\u5408",Rounds:"\u56de\u5408","\ud83d\ude31 Bust \ud83d\udc94":"\ud83d\ude31 Bust \u6b98\u5ff5 \ud83d\udc94","\ud83d\ude31 You failed \ud83d\udc94":"\ud83d\ude31 \u5931\u6557\u4e86 \ud83d\udc94",bullseyeAward:"\ud83d\udd25 {{bull}} \ud83c\udfaf",credit:"\u9ede\u6578\uff1a{{credit}}",moreCoins:"\u9084\u9700\u8981\u6295\u5165 {{coins}} \u679a\u786c\u5e63",requiredCredits:"{{credit}} \u9ede\u6578",score:"{{score}} \u5206",version:"\u7248\u672c\uff1a{{version}}",winnersAward:"\ud83c\udfc6 {{name}}\u7372\u52dd\uff01 \u270c\ufe0f",winnersAwardForThreeDartsOnePrizeGame:"\ud83c\udfc6 {{names}}\u7372\u5f97\u4e86\u514d\u8cbb\u7684\u9ede\u6578\uff01 \u270c\ufe0f"}}},fallbackLng:"en",debug:!0,ns:["translations"],defaultNS:"translations",keySeparator:">",nsSeparator:"|",interpolation:{escapeValue:!1}});var y=p.a,v={colors:{blue:"#01befe",yellow:"#ffdd00",orange:"#ff7d00",red:"#ff006d",green:"#adff02",purple:"#8f00ff",black:"#000000"},contrastText:"#ffffff"},S=1602,x=1601,I=1600,C=Object(l.a)({palette:{default:v,happy:v},players:[v.colors.blue,v.colors.red,v.colors.yellow,v.colors.purple],gameAward:{zIndex:S},gameMessage:{zIndex:x},gameScore:{zIndex:I},typography:{fontFamily:['"Russo One"','"Noto Serif TC"',"-apple-system","BlinkMacSystemFont",'"Segoe UI"',"Roboto",'"Helvetica Neue"',"Arial","sans-serif",'"Apple Color Emoji"','"Segoe UI Emoji"','"Segoe UI Symbol"'].join(",")},overrides:{MuiDialog:{root:{zIndex:"".concat(x," !important")}},MuiListItem:{root:{textTransform:"uppercase"}},MuiSnackbar:{root:{zIndex:"".concat(x," !important")}}}}),T=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,153)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,s=t.getLCP,o=t.getTTFB;n(e),r(e),a(e),s(e),o(e)}))},P=s.a.createContext({credit:0,increaseCredit:function(){},decreaseCredit:function(){}}),w=n(12);function k(e){var t=e.children,n=Object(a.useState)(0),s=Object(w.a)(n,2),o=s[0],c=s[1];return Object(r.jsx)(P.Provider,{value:{credit:o,increaseCredit:function(e){return"number"===typeof e&&e>0&&c((function(t){return t+e}))},decreaseCredit:function(e){return"number"===typeof e&&e>0&&c((function(t){return t-e}))}},children:t})}var D=s.a.createContext({backgroundImage:{},setBackgroundImage:function(){},setRandomBackgroundImage:function(){}}),E=n(3),A=function e(t){var n=this;Object(E.a)(this,e),this.timerId="",this.watch=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:500;n.timerId=window.setInterval((function(){n.prevArray.length!==n.array.length&&(n.prevArray=Object(d.a)(n.array),e&&"function"===typeof e&&e(n.array))}),t)},this.stop=function(){return window.clearInterval(n.timerId)},this.array=t,this.prevArray=Object(d.a)(t)},G=n(5),N=[{name:"Binz Beach",country:"Germany",url:"/resources/images/background/binz-beach.jpg"},{name:"Hallstatt",country:"Austria",url:"/resources/images/background/hallstatt.jpg"},{name:"King's Chair Beach",country:"Germany",url:"/resources/images/background/kings-chair-beach.jpg"},{name:"Lifeguards Nearby Pier Sellin",country:"Germany",url:"/resources/images/background/lifeguards-nearby-pier-sellin.jpg"},{name:"Pier Sellin",country:"Germany",url:"/resources/images/background/pier-sellin.jpg"},{name:"Sellin Dog Beach",country:"Germany",url:"/resources/images/background/sellin-dog-beach.jpg"},{name:"Sellin East Train Station",country:"Germany",url:"/resources/images/background/sellin-east-train-station.jpg"}],L=function(){function e(){Object(E.a)(this,e),this.imageIndex=this.randomIndex}return Object(G.a)(e,[{key:"randomIndex",get:function(){return Math.floor(Math.random()*Math.floor(N.length))}},{key:"randomImage",get:function(){var e;do{e=this.randomIndex}while(e===this.imageIndex&&N.length>1);return this.imageIndex=e,N[e]}}]),e}(),R=n(74);var B=new(n.n(R).a),M=function e(){var t=this;Object(E.a)(this,e),this.connected=!1,this.connect=function(){return new Promise((function(e){document.addEventListener("keypress",t.handleCoinInsert),t.connected=!0,e()}))},this.disconnect=function(){return new Promise((function(e){document.removeEventListener("keypress",t.handleCoinInsert),t.connected=!1,e()}))},this.handleCoinInsert=function(e){var t=e.ctrlKey,n=e.key;!0!==t||"i"!==n&&"I"!==n||B.emit("COIN_INSERT")}},U=function e(){var t=this;Object(E.a)(this,e),this.connected=!1,this.connect=function(){return new Promise((function(e){document.ondblclick=function(){return B.emit("COIN_INSERT")},t.connected=!0,e()}))},this.disconnect=function(){return new Promise((function(e){document.ondblclick=null,t.connected=!1,e()}))}},_=function(){function e(){Object(E.a)(this,e)}return Object(G.a)(e,null,[{key:"create",value:function(e){switch(e){case"mouse":return new U;case"keyboard":default:return new M}}}]),e}(),H=n(16),F=n(24),z=n(40),K=n(32),V=n(17),Y={steelTip:"steel-tip",softTip:"soft-tip"},J={builtIn:"built-in",usb:"usb",bluetooth:"bluetooth"},q=function e(){var t=this;Object(E.a)(this,e),this.type=Y.softTip,this.connection=J.builtIn,this.isSteelTipType=function(){return t.type===Y.steelTip},this.isSoftTipType=function(){return t.type===Y.softTip},this.isBuiltInConnection=function(){return t.connection===J.builtIn},this.isUsbConnection=function(){return t.connection===J.usb},this.isBluetoothConnection=function(){return t.connection===J.bluetooth}};q.types=Y,q.connections=J;var Q={841888576:"S1I",841889088:"S1O",841889344:"D1",841888832:"T1",959328576:"S2I",959328832:"S2O",942551616:"D2",959328320:"T2",925774144:"S3I",925774400:"S3O",942552128:"D3",925773888:"T3",808333632:"S4I",808334656:"S4O",808334912:"D4",808334144:"T4",892219712:"S5I",892220480:"S5O",875443776:"D5",892219968:"T5",825110592:"S6I",825111360:"S6O",875443264:"D6",825110848:"T6",211278508352:"S7I",211278509120:"S7O",942552640:"D7",211278508608:"T7",908997184:"S8I",908997952:"S8O",908998208:"D8",908997696:"T8",959329088:"S9I",959329600:"S9O",959329856:"D9",959329344:"T9",841887808:"S10I",841888320:"S10O",875443008:"D10",841888064:"T10",925774656:"S11I",925775168:"S11O",925775424:"D11",925774912:"T11",892219456:"S12I",892220736:"S12O",892220992:"D12",892220224:"T12",808333376:"S13I",808334400:"S13O",875443520:"D13",808333888:"T13",211261731648:"S14I",211261732160:"S14O",211261732416:"D14",211261731904:"T14",858665024:"S15I",858665536:"S15O",875442752:"D15",858665280:"T15",211278508096:"S16I",211278509376:"S16O",211278509632:"D16",211278508864:"T16",211261731136:"S17I",211261731392:"S17O",942551872:"D17",211261730880:"T17",825111104:"S18I",825111872:"S18O",825112128:"D18",825111616:"T18",908996928:"S19I",908997440:"S19O",942552384:"D19",908996672:"T19",858665792:"S20I",858666304:"S20O",858666560:"D20",858666048:"T20",942551104:"SBULL",875442240:"DBULL",1112821312:"CHANGE"},W=function(e){Object(H.a)(n,e);var t=Object(F.a)(n);function n(){var e;return Object(E.a)(this,n),(e=t.call(this,"GRANBOARD","442f1570-8a00-9a28-cbe1-e1d4212d53eb","442f1571-8a00-9a28-cbe1-e1d4212d53eb")).map=Q,e}return n}(function(e){Object(H.a)(n,e);var t=Object(F.a)(n);function n(e,r,a){var s,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return Object(E.a)(this,n),(s=t.call(this)).connection=q.connections.bluetooth,s.valid=!0,s.map=null,s.device=null,s.characteristic=null,s.connect=function(){var e=Object(V.a)(s),t=e.device,n=e.deviceName,r=e.serviceUuid,a=e.characteristicUuid,o=e.options;if(!t||!t.gatt.connected)return navigator.bluetooth.requestDevice({filters:[{name:n},{services:[r]}]}).then((function(e){return s.device=e,o.autoReconnect&&e.addEventListener("gattserverdisconnected",s.handleDeviceAutoReconnect),e.gatt.connect()})).then((function(e){return e.getPrimaryService(r)})).then((function(e){return e.getCharacteristic(a)})).then((function(e){return s.characteristic=e,e.startNotifications()})).then((function(){return s.characteristic.addEventListener("characteristicvaluechanged",s.handleDartboardHit),Promise.resolve()}))},s.disconnect=function(){var e=Object(V.a)(s),t=e.characteristic,n=e.device,r=e.options;return t?t.stopNotifications().then((function(){return t.removeEventListener("characteristicvaluechanged",s.handleDartboardHit)})).then((function(){return n&&n.gatt.connected&&(r.autoReconnect&&n.removeEventListener("gattserverdisconnected",s.handleDeviceAutoReconnect),n.gatt.disconnect()),Promise.resolve()})):Promise.resolve()},s.handleDartboardHit=function(e){for(var t=e.target.value,n=[],r=0;r<t.byteLength;r++)n.push(("00"+t.getUint8(r).toString(16)).slice(-2));var a=s.map[parseInt("0x".concat(n.join("")))];a&&("CHANGE"!==a?B.emit("DARTBOARD_HIT",a):B.emit("CHANGE_BUTTON_CLICK"))},s.handleDeviceAutoReconnect=function(){s.device.gatt.connect()},navigator.bluetooth?(s.deviceName=e,s.serviceUuid=r,s.characteristicUuid=a,s.options=Object(z.a)({autoReconnect:!0},o),s.map={},s):(console.warn("Web Bluetooth is not supported."),Object(K.a)(s,{valid:!1}))}return Object(G.a)(n,[{key:"connected",get:function(){return this.device&&this.device.gatt.connected}}]),n}(q)),Z={32:"S1I",33:"S1O",34:"D1",35:"T1",36:"S2I",37:"S2O",38:"D2",39:"T2",40:"S3I",41:"S3O",42:"D3",43:"T3",44:"S4I",45:"S4O",46:"D4",47:"T4",48:"S5I",49:"S5O",50:"D5",51:"T5",52:"S6I",53:"S6O",54:"D6",55:"T6",56:"S7I",57:"S7O",58:"D7",59:"T7",60:"S8I",61:"S8O",62:"D8",63:"T8",64:"S9I",65:"S9O",66:"D9",67:"T9",68:"S10I",69:"S10O",70:"D10",71:"T10",72:"S11I",73:"S11O",74:"D11",75:"T11",76:"S12I",77:"S12O",78:"D12",79:"T12",80:"S13I",81:"S13O",82:"D13",83:"T13",84:"S14I",85:"S14O",86:"D14",87:"T14",88:"S15I",89:"S15O",90:"D15",91:"T15",92:"S16I",93:"S16O",94:"D16",95:"T16",96:"S17I",97:"S17O",98:"D17",99:"T17",100:"S18I",101:"S18O",102:"D18",103:"T18",104:"S19I",105:"S19O",106:"D19",107:"T19",108:"S20I",109:"S20O",110:"D20",111:"T20",112:"SBULL",113:"DBULL",114:"OUT",115:"CHANGE"},$=function(e){Object(H.a)(n,e);var t=Object(F.a)(n);function n(){var e;return Object(E.a)(this,n),(e=t.call(this)).connection=q.connections.builtIn,e.connected=!1,e.map=null,e.connect=function(){return document.addEventListener("keypress",e.handleDartboardHit),e.connected=!0,Promise.resolve()},e.disconnect=function(){return document.removeEventListener("keypress",e.handleDartboardHit),e.connected=!1,Promise.resolve()},e.handleDartboardHit=function(t){var n=Object(V.a)(e).map,r=t.key.charCodeAt(0);!1===t.ctrlKey&&r>=32&&r<=114?B.emit("DARTBOARD_HIT",n[r]):"CHANGE"===n[r]&&B.emit("CHANGE_BUTTON_CLICK")},e.map=Z,e}return n}(q),X=function(){function e(){Object(E.a)(this,e)}return Object(G.a)(e,null,[{key:"create",value:function(e){switch(e){case"granboard":return new W;case"keyboard":default:return new $}}}]),e}(),ee=y.getFixedT(),te={back:{id:"back",type:"sound",block:!1,soundEffect:"back"},bust:{id:"bust",type:"dialog",text:ee("\ud83d\ude31 Bust \ud83d\udc94"),block:!0,soundEffect:"bust"},dart:{id:"dart",type:"sound",block:!1,soundEffect:"dart"},dbull:function(e){return{id:"dbull",type:"snackbar",text:ee("bullseyeAward",{bull:e}),autoHideDuration:1500,block:!1,soundEffect:"dbull"}},fail:{id:"fail",type:"dialog",text:ee("\ud83d\ude31 You failed \ud83d\udc94"),block:!0,soundEffect:"fail"},gameOn:{id:"gameOn",type:null,block:!1},hatTrick:{id:"hatTrick",type:"animationDialog",autoHideDuration:1500,block:!1},highTon:{id:"highTon",type:"animationDialog",autoHideDuration:1500,block:!1},lowTon:{id:"lowTon",type:"animationDialog",autoHideDuration:1500,block:!1},next:{id:"next",type:"sound",block:!1,soundEffect:"next"},nextPlayer:{id:"nextPlayer",type:"dialog",text:ee("Press \ud83d\udd34 to change player"),block:!0},nextRound:{id:"nextRound",type:"dialog",text:ee("Press \ud83d\udd34 to next round"),block:!0},oneBull:{id:"oneBull",type:"animationDialog",autoHideDuration:1500,block:!1},prizeForThreeDartsOnePrizeGame:function(e){return{id:"prizeForThreeDartsOnePrizeGame",type:"dialog",text:ee("winnersAwardForThreeDartsOnePrizeGame",{names:e}),block:!0,soundEffect:"win"}},sbull:function(e){return{id:"sbull",type:"snackbar",text:ee("bullseyeAward",{bull:e}),autoHideDuration:1500,block:!1,soundEffect:"sbull"}},score:function(e){return{id:"score",type:"speech",text:ee("score",{score:e}),block:!1}},win:function(e){return{id:"win",type:"dialog",text:ee("winnersAward",{name:e}),block:!0,soundEffect:"win"}}},ne=function(){function e(){Object(E.a)(this,e)}return Object(G.a)(e,null,[{key:"create",value:function(e,t){var n=null;return te[e]&&(n="function"===typeof te[e]?te[e](t):te[e]),n}}]),e}(),re=function(){function e(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"OUT",r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{type:"SOFT_TIP"};if(Object(E.a)(this,e),this.valid=!0,this.toValue=function(){var e,n=t.symbol,r=t.toDisplaySymbol(),a=r.slice(1,n.length);switch(r.charAt(0)){case"S":e="BULL"===a?50:parseInt(a,10);break;case"D":e="BULL"===a?50:2*parseInt(a,10);break;case"T":e=3*parseInt(a,10);break;case"O":case"B":default:e=0}return e},this.toDisplaySymbol=function(){var e=t.symbol;return"I"===e.slice(-1)||"O"===e.slice(-1)?e.slice(0,e.length-1):e},!e.isValid(n))return{valid:!1};this.symbol=n,this.index=r,this.options=a,this.displaySymbol=this.toDisplaySymbol(),this.value=this.toValue()}return Object(G.a)(e,null,[{key:"isValid",value:function(e){var t=!1;if(/^S\d{1,2}I$/.test(e)||/^S\d{1,2}O$/.test(e)){var n=parseInt(e.slice(1,e.length-1),10);t=n>=1&&n<=20}else if(/^[DT]\d{1,2}$/.test(e)){var r=parseInt(e.slice(1,e.length),10);t=r>=1&&r<=20}else(/^[SD]BULL$/.test(e)||"OUT"===e||"BUST"===e)&&(t=!0);return t}},{key:"isInnerSingle",value:function(t){return e.isValid(t)&&t.startsWith("S")&&t.endsWith("I")}}]),e}(),ae=function e(t,n){var r=this;Object(E.a)(this,e),this.scores=[],this.addScore=function(e){try{if(r.isNewScoreAddable()){var t;if(e instanceof re?(t=e).index=r.scores.length:t=new re(e,r.scores.length,r.options),!t.valid)throw new Error("The `score` is invalid!");return r.scores.push(t),t}throw new Error("The `scores` array cannot contain more than 3 Score objects!")}catch(n){return console.error(n),null}},this.getCurrentScore=function(){return r.scores[r.scores.length-1]},this.isNewScoreAddable=function(){return r.scores.length<3&&!r.scores.some((function(e){return"BUST"===e.symbol}))},this.index=t,this.options=n},se=function e(t){var n=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Object(E.a)(this,e),this.rounds=[],this.addScore=function(e){var t=n.getCurrentRound();return t&&t.isNewScoreAddable()||(t=n.addRound()),t?t.addScore(e):null},this.addRound=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new ae(n.rounds.length,n.options);try{if(!(n.rounds.length<n.roundsLength))throw new Error("The `rounds` array cannot contain more than ".concat(n.roundsLength," Round objects!"));return n.rounds.push(e),e}catch(t){return console.error(t),null}},this.getCurrentRound=function(){return n.rounds[n.rounds.length-1]},this.removeCurrentRound=function(){return n.rounds.pop()},this.isLastRoundFinished=function(){var e=n.getCurrentRound();return n.rounds.length===n.roundsLength&&e&&!e.isNewScoreAddable()},this.roundsLength=t,this.options=r},oe=function(){function e(){Object(E.a)(this,e)}return Object(G.a)(e,null,[{key:"isBullseye",value:function(e){return"SBULL"===e.symbol||"DBULL"===e.symbol}},{key:"getMessage",value:function(t){var n=null;if(t instanceof re)if(e.isBullseye(t)){var r=t.symbol.toLowerCase();n=ne.create(r,r)}else n=ne.create("dart");else if(t instanceof ae){var a=t.scores,s=ie(a),o=ce(a);s<100&&1===o?n=ne.create("oneBull"):s>=100&&s<150||3===o||s>=151||(n=ne.create("score",s))}return n}}]),e}(),ce=function(e){var t=0;return e.forEach((function(e){return("SBULL"===e.symbol||"DBULL"===e.symbol)&&t++})),t},ie=function(e){var t=0;return e.forEach((function(e){return t+=e.toValue()})),t},ue=n(75),le=n(10),de=function(){function e(t,n){var r=this,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;Object(E.a)(this,e),this.currentPlayerIndex=-1,this.currentPlayerDartScores=[],this.gameScores=[],this.messages=[],this.players=[],this.scoreboards=[],this.isLastRoundFinished=function(){return r.scoreboards[r.players.length-1].isLastRoundFinished()},this.addScoreForCurrentPlayer=function(e){var t=r.scoreboards[r.currentPlayerIndex].addScore(e);return t?(r.currentPlayerDartScores.length<3?r.currentPlayerDartScores=r.currentPlayerDartScores.concat(t):r.currentPlayerDartScores=[t],t):null},this.addRoundForCurrentPlayer=function(e){var t=r.scoreboards[r.currentPlayerIndex].addRound(e);return t&&(r.currentPlayerDartScores=t.scores),t},this.deleteCurrentRoundForCurrentPlayer=function(){var e=r.scoreboards[r.currentPlayerIndex].removeCurrentRound(),t=r.scoreboards[r.currentPlayerIndex].getCurrentRound();return r.currentPlayerDartScores=t?t.scores:[],e},this.addMessage=function(e){return e&&(r.messages=r.messages.concat(e))},this.deleteMessage=function(e){var t=r.messages.findIndex((function(t){return t.id=e}));-1!==t&&r.messages.splice(t,1)},this.clearMessages=function(){return r.messages=[]},this.setCurrentPlayerIndex=function(e){return r.currentPlayerIndex=e},this.setCurrentPlayerGameScore=function(e){return r.gameScores[r.currentPlayerIndex]=e},this.increaseCurrentPlayerGameScore=function(e){return r.setCurrentPlayerGameScore(r.currentPlayerGameScore+e)},this.decreaseCurrentPlayerGameScore=function(e){return r.setCurrentPlayerGameScore(r.currentPlayerGameScore-e)},Object(le.e)(this,{currentPlayerIndex:le.f,currentPlayerDartScores:le.f,gameScores:le.f,messages:le.f,players:le.f,scoreboards:le.f,currentPlayer:le.c,currentPlayerGameScore:le.c,currentPlayerScoreboard:le.c,addScoreForCurrentPlayer:le.b,addRoundForCurrentPlayer:le.b,deleteCurrentRoundForCurrentPlayer:le.b,addMessage:le.b,deleteMessage:le.b,clearMessages:le.b,setCurrentPlayerIndex:le.b,setCurrentPlayerGameScore:le.b,increaseCurrentPlayerGameScore:le.b,decreaseCurrentPlayerGameScore:le.b}),this.players=t,t.forEach((function(e,t){r.scoreboards[t]=new se(n),r.scoreboards[t].addRound(),r.gameScores[t]=a})),this.currentPlayerIndex=0}return Object(G.a)(e,[{key:"currentPlayer",get:function(){return this.players[this.currentPlayerIndex]}},{key:"currentPlayerGameScore",get:function(){return this.gameScores[this.currentPlayerIndex]}},{key:"currentPlayerScoreboard",get:function(){return this.scoreboards[this.currentPlayerIndex]}},{key:"lastPlayer",get:function(){return this.players[this.players.length-1]}},{key:"lastPlayerScoreboard",get:function(){return this.scoreboards[this.players.length-1]}}]),e}(),he=function(){function e(){Object(E.a)(this,e)}return Object(G.a)(e,null,[{key:"has",value:function(e){return b.users.includes(e)}}]),e}(),fe={isLogined:!0},me={isLogined:!1},ge=function e(t){var n=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"91304192363-7fr8mvjp3ph628joqchr32d1iu2lr38l.apps.googleusercontent.com",a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"https://tjdarts.github.io";Object(E.a)(this,e),this.auth=function(){return n.isLogined().then((function(e){if(!e.isLogined){var t,r={},a=new URLSearchParams(window.location.hash.substring(1)),s=Object(ue.a)(a);try{for(s.s();!(t=s.n()).done;){var o=Object(w.a)(t.value,2),c=o[0],i=o[1];r[c]=i}}catch(u){s.e(u)}finally{s.f()}if(Object.keys(r).length>0){if(localStorage.setItem(n.storageItemName,JSON.stringify(r)),r.state&&"try_sample_request"===r.state)return n.isLogined()}else n.openSignInForm()}return Promise.resolve(e)}))},this.isLogined=function(){return new Promise((function(e){"none"===navigator.connection.type&&(new pe("offline-token").auth()?e(fe):e(me));var t=JSON.parse(localStorage.getItem(n.storageItemName));if(t&&t.access_token){var r=new XMLHttpRequest;r.open("GET","https://people.googleapis.com/v1/people/me?personFields=emailAddresses&access_token=".concat(t.access_token)),r.onreadystatechange=function(){try{if(4===r.readyState)if(200===r.status){var t=JSON.parse(r.response).emailAddresses[0].value;he.has(t)?e(fe):e(me)}else e(me)}catch(n){console.error(n),e(me)}},r.send(null)}else e(me)}))},this.openSignInForm=function(){var e=document.createElement("form");e.setAttribute("method","GET"),e.setAttribute("action","https://accounts.google.com/o/oauth2/v2/auth");var t={client_id:n.clientId,redirect_uri:n.redirectUri,scope:"profile https://www.googleapis.com/auth/user.emails.read",state:"try_sample_request",response_type:"token"};for(var r in t){var a=document.createElement("input");a.setAttribute("type","hidden"),a.setAttribute("name",r),a.setAttribute("value",t[r]),e.appendChild(a)}document.body.appendChild(e),e.submit()},this.storageItemName=t,this.clientId=r,this.redirectUri=a},be=n(60),pe=function e(t){var n=this;Object(E.a)(this,e),this.auth=function(){var e=!1;try{var t=localStorage.getItem(n.storageItemName);if(t){var r=be.KEYUTIL.getKey("-----BEGIN PUBLIC KEY-----MIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEAqOyWDJ0ngQQ0jOxmSBi4IOuonz6A9Ipi/AK9rXw6Pnyd5ji1800AygLavE4ZdQIYOvthAKNmAfBA00on5VmnmwHqUDmYvS3hJTSKJFGbjkEzyl+KUQoKA2AvlLmHhjVdegwxYwmgnrkAKCeMNOHA5V7ITFMLaEnTGjviingdP2RMrMBFooBHQOZL7k5uTqz8CH+yvS5/Y/eIkFPSUzqAWKNMLASUJfmQ/Sfo74+pLz0FJYY6diUdi4vx0yj93ADG1A9VF8YQ2CkorOoPwEvTRi7V8rW91H8zh1eP9IDfBgOnRjgtCiNyIlBfUWEaR6J/SIHJC8eYcyFCMDFcqinRuQIDAQAB-----END PUBLIC KEY-----");e=be.KJUR.jws.JWS.verifyJWT(t,r,{alg:["RS256"]})}return e}catch(a){return e}},this.storageItemName=t},je=y.getFixedT(),Oe=function(){function e(t){Object(E.a)(this,e),this._players=t}return Object(G.a)(e,[{key:"players",get:function(){return this._players.map((function(e,t){return{name:je(e.name),index:t}}))}}]),e}(),ye=n(61),ve={default:["back","bust","coin","dart","dbull","fail","game_on","hover","next","press","sbull","warn","win"],ninja:["bgm","dart","sbull","dbull"],"3-darts-1-prize":["bgm"]},Se=new function e(){var t=this;Object(E.a)(this,e),this.theme="default",this.soundEffects={},this.play=function(e){return new Promise((function(n){!t.soundEffects[e]&&n(),t.soundEffects[e].on("end",n),t.soundEffects[e].play()}))},this.stop=function(e){return t.soundEffects[e]&&t.soundEffects[e].stop()},this.setTheme=function(e){ve[e]&&(t.theme=e),t.loadSoundEffects()},this.loadSoundEffects=function(){ve[t.theme].forEach((function(e){t.soundEffects[e]=new ye.Howl({src:["/resources/sound-effects/".concat(t.theme,"/").concat(e,".webm")],volume:"bgm"===e?.2:1,loop:"bgm"===e}),t.soundEffects[e].on("loaderror",(function(){t.soundEffects[e]=new ye.Howl({src:["/resources/sound-effects/default/".concat(e,".webm")],volume:"bgm"===e?.2:1,loop:"bgm"===e})}))}))},this.setTheme(this.theme),b.soundTheme&&"default"!==b.soundTheme&&this.setTheme(b.soundTheme)},xe=window.speechSynthesis,Ie=function(){function e(t){var n=this;Object(E.a)(this,e),this.speak=function(e){if(xe&&!xe.speaking){var t=new SpeechSynthesisUtterance(e);t.voice=n.voice,xe.speak(t)}},this.lang=t,this.voices=xe.getVoices()}return Object(G.a)(e,[{key:"voice",get:function(){var e=this.lang,t=this.voices,n=e.includes("zh")?"Google \u570b\u8a9e\uff08\u81fa\u7063\uff09":"Daniel",r=t.findIndex((function(e){return e.name===n}));return r?t[r]:t[0]}}]),e}(),Ce=new L;function Te(e){var t=e.children,n=Object(a.useState)(Ce.randomImage),s=Object(w.a)(n,2),o=s[0],c=s[1];return Object(r.jsx)(D.Provider,{value:{backgroundImage:o,setBackgroundImage:c,setRandomBackgroundImage:function(){return c(Ce.randomImage)}},children:t})}var Pe=s.a.createContext({isLogined:!1});function we(e){var t=e.children,n=Object(a.useState)({isLogined:!1}),s=Object(w.a)(n,2),o=s[0],c=s[1];return Object(a.useEffect)((function(){new ge("oauth2-tjdart-params").auth().then((function(e){return c(e)}))}),[c]),Object(r.jsx)(Pe.Provider,{value:o,children:t})}var ke=n(29),De=n(14),Ee=n(77),Ae=n(151),Ge=n(135),Ne=n(137),Le=n(37),Re=function(e){return{score:{color:function(t){return"".concat(e.players[t.index],"e0")},fontSize:"27rem",textShadow:"-10px 0 white, 0 10px white, 10px 0 white, 0 -10px white"}}},Be=Object(Ge.a)(Re);function Me(e){var t=e.score,n=e.index,a=Be({index:n});return Object(r.jsx)(Le.a,{className:a.score,variant:"h1",align:"center",children:t})}var Ue=function(e){return{gameName:{margin:"24px",textTransform:"uppercase",textShadow:"-3px 0 white, 0 3px white, 3px 0 white, 0 -3px white"},gameScore:{display:"flex",justifyContent:"center",alignItems:"center",position:"fixed",zIndex:e.gameScore.zIndex,top:0,left:0,width:"100%",height:"100%"},scoreboard:{float:"left",marginLeft:"24px"},scores:{float:"right",width:"220px"},playerCards:{position:"fixed",bottom:0,left:0}}},_e=Object(Ge.a)(Ue);function He(e){var t=e.name,n=e.player,a=e.players,s=e.dartScores,o=e.scoreboard,c=e.gameScore,i=e.gameScores,u=Object(Ae.a)().t,l=_e();return Object(r.jsxs)("div",{children:[Object(r.jsx)("div",{className:l.gameScore,children:Object(r.jsx)(Me,{index:n.index,name:n.name,score:c})}),Object(r.jsx)(Yt,{className:l.gameName,variant:"h4",align:"center",children:u(t)}),Object(r.jsx)(_t,{className:l.scoreboard,index:n.index,rounds:o.rounds,totalRounds:o.roundsLength}),Object(r.jsx)(zt,{className:l.scores,scores:s}),Object(r.jsx)(Ne.a,{container:!0,className:l.playerCards,spacing:3,children:a.map((function(e,t){return Object(r.jsx)(Ne.a,{item:!0,xs:3,children:Object(r.jsx)(Gt,{index:t,name:e.name,score:i[t],active:t===n.index})},t)}))})]})}var Fe=n(138),ze=n(139);function Ke(e){var t=e.appState,n=b.defaultGames,s=b.platform,o=Object(De.g)(),c=Object(Ae.a)().t,i=Object(a.useState)(Object.keys(t.game).length?n.findIndex((function(e){return e.id===t.game.id})):0),u=Object(w.a)(i,2),l=u[0],d=u[1];return Object(r.jsx)(Fe.a,{children:Object(r.jsx)(It,{selectedIndex:l,setSelectedIndex:d,children:n.filter((function(e){return e.platforms.includes(s)})).map((function(e,n){return Object(r.jsx)(ze.a,{selected:n===l,onMouseOver:function(){return Se.play("hover")},onClick:function(){return function(e){Se.play("press"),t.game=e,o.push("/game-menu/players")}(e)},children:Object(r.jsx)(Yt,{variant:"h2",children:c(e.displayName)})},n)}))})})}var Ve=new Oe(b.players);function Ye(e){var t=e.appState,n=Object(De.g)(),s=Object(a.useContext)(P).credit,o=Ve.players,c=Object(a.useState)(t.players.length?t.players.length-1:0),i=Object(w.a)(c,2),u=i[0],l=i[1],h=Object(Ae.a)().t,f=new Ie(y.language),m=b.isArcadeMode;return Object(r.jsx)(Fe.a,{children:Object(r.jsxs)(It,{selectedIndex:u,setSelectedIndex:l,children:[Object(d.a)(Array(o.length).keys()).map((function(e){return Object(r.jsxs)(ze.a,{selected:e===u,onMouseOver:function(){return Se.play("hover")},onClick:function(){return function(e){var r=s-t.game.credit*e.length;m()&&r<0?Se.play("warn").then((function(){return f.speak(h("moreCoins",{coins:Math.abs(r)}))})):(Se.play("game_on"),t.players=e,n.push("/game"))}(o.slice(0,e+1))},children:[Object(r.jsx)(Yt,{variant:"h2",children:h("".concat(e+1," player").concat(e>0?"s":""))}),m()&&Object(r.jsx)(Yt,{style:{marginLeft:"24px"},variant:"h5",children:h("requiredCredits",{credit:t.game.credit*o.slice(0,e+1).length})})]},e)})),Object(r.jsx)(ze.a,{selected:o.length===u,onMouseOver:function(){return Se.play("hover")},onClick:function(){Se.play("back"),n.push("/game-menu/games")},children:Object(r.jsx)(Yt,{variant:"h3",children:h("Back")})})]})})}var Je=function(e){return{root:{margin:"24px"}}},qe=Object(Ge.a)(Je);function Qe(e){var t=e.appState,n=qe(),a=Object(De.h)().step,s=function(e){switch(e.step){case"games":return Object(r.jsx)(Ke,{appState:t});case"players":return Object(r.jsx)(Ye,{appState:t});default:return null}};return Object(r.jsx)("div",{className:n.root,children:Object(r.jsx)(s,{step:a})})}var We=n(147),Ze={UNINITIALIZED:0,INITIALIZED:1,STARTED:2,RESUMED:3,PAUSED:4,STOPPED:5},$e=function(){function e(t){var n=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{rounds:8,score:0};Object(E.a)(this,e),this.state=null,this.status=Ze.UNINITIALIZED,this.start=function(){(n.isInitialized()||n.isStopped())&&(n.addListeners(),B.on("CHANGE_BUTTON_CLICK",n.handleChangeButtonClick),n.status=Ze.STARTED,n.resume())},this.resume=function(){(n.isStarted()||n.isPaused())&&(B.on("DARTBOARD_HIT",n.handleDartboardHit),n.status=Ze.RESUMED)},this.pause=function(){n.isResumed()&&(B.off("DARTBOARD_HIT",n.handleDartboardHit),n.status=Ze.PAUSED)},this.stop=function(){(n.isStarted()||n.isResumed()||n.isPaused())&&(B.off("DARTBOARD_HIT",n.handleDartboardHit),B.off("CHANGE_BUTTON_CLICK",n.handleChangeButtonClick),n.removeListeners(),n.status=Ze.STOPPED)},this.addListeners=function(){B.on("GAME_START",n.start),B.on("GAME_RESUME",n.resume),B.on("GAME_PAUSE",n.pause),B.on("GAME_STOP",n.stop)},this.removeListeners=function(){B.off("GAME_START",n.start),B.off("GAME_RESUME",n.resume),B.off("GAME_PAUSE",n.pause),B.off("GAME_STOP",n.stop)},this.isInitialized=function(){return n.status===Ze.INITIALIZED},this.isStarted=function(){return n.status===Ze.STARTED},this.isResumed=function(){return n.status===Ze.RESUMED},this.isPaused=function(){return n.status===Ze.PAUSED},this.isStopped=function(){return n.status===Ze.STOPPED},this.onDartboardHit=function(e){},this.onChangeButtonClick=function(){},this.onGameOver=function(){},this.handleDartboardHit=function(e){var t=n.state,r=t.addScoreForCurrentPlayer,a=t.currentPlayerScoreboard,s=r(e);s&&(n.state.addMessage(oe.getMessage(s)),2===s.index&&n.state.addMessage(oe.getMessage(a.getCurrentRound())),n.onDartboardHit(s))},this.handleChangeButtonClick=function(){n.isLastRound()?n.handleGameOver():(n.onChangeButtonClick(),n.switchToNextPlayer())},this.switchToNextPlayer=function(){var e=(n.state.currentPlayerIndex+1)%n.players.length;n.state.setCurrentPlayerIndex(e),n.resume()},this.handleGameMessageOnClose=function(e){e.block&&n.resume(),n.state.deleteMessage(e.id)},this.handleGameOver=function(){if(0===n.state.messages.length)n.addGameMessage("win",n.winners[0].name);else{var e=new A(n.state.messages);e.watch((function(t){0===t.length&&(n.addGameMessage("win",n.winners[0].name),e.stop())}))}n.pause(),B.off("CHANGE_BUTTON_CLICK",n.handleChangeButtonClick),n.onGameOver()},this.isLastRound=function(){return n.state.currentPlayer===n.state.lastPlayer&&n.state.lastPlayerScoreboard.rounds.length===n.options.rounds},this.addGameMessage=function(e,t){var r=ne.create(e,t);r&&(r.block&&n.pause(),n.state.addMessage(r))},this.clearGameMessages=function(){return n.state.clearMessages()},this.players=t,this.options=r,this.state=new de(t,r.rounds,r.score),this.status=Ze.INITIALIZED}return Object(G.a)(e,[{key:"winners",get:function(){return[]}}]),e}();$e.statuses=Ze;var Xe=function(e){Object(H.a)(n,e);var t=Object(F.a)(n);function n(){var e;Object(E.a)(this,n);for(var r=arguments.length,a=new Array(r),s=0;s<r;s++)a[s]=arguments[s];return(e=t.call.apply(t,[this].concat(a))).onDartboardHit=function(t){var n=e.state,r=n.currentPlayerScoreboard,a=n.increaseCurrentPlayerGameScore,s=n.isLastRoundFinished;a(t.value);var o=r.getCurrentRound();s()?e.handleGameOver():o&&2===o.getCurrentScore().index&&e.addGameMessage("nextPlayer")},e.onChangeButtonClick=function(){var t=e.state,n=t.addRoundForCurrentPlayer,r=t.clearMessages;n(),r(),e.addGameMessage("next")},e}return Object(G.a)(n,[{key:"winners",get:function(){var e=this,t=this.state.players.map((function(t,n){return{name:t.name,score:e.state.gameScores[n]}})).sort((function(e,t){return t.score-e.score}));return t.filter((function(e){return e.score===t[0].score}))}}]),n}($e);function et(e){var t=e.players,n=e.rounds,o=Object(De.g)();0===t.length&&o.push("/game-menu");var c=Object(a.useMemo)((function(){return new Xe(t,{rounds:n})}),[t,n]);Object(a.useEffect)((function(){c.isInitialized()&&(c.start(),c.onGameOver=function(){B.once("CHANGE_BUTTON_CLICK",(function(){c.clearGameMessages(),c.addGameMessage("back"),c.stop(),B.emit("GAME_OVER",Xe.name,c.winners),o.push("/game-menu")}))})}),[c,o]);var i=Object(We.a)((function(e){var t=e.game.state,n=t.currentPlayer,a=t.currentPlayerGameScore,s=t.currentPlayerDartScores,o=t.currentPlayerScoreboard,c=t.players,i=t.gameScores;return Object(r.jsx)(He,{name:"Count-up",player:n,gameScore:a,dartScores:s,scoreboard:o,players:c,gameScores:i})})),u=Object(We.a)((function(e){var t=e.game,n=t.state.messages;return Object(r.jsx)(xt,{messages:n,onClose:t.handleGameMessageOnClose})}));return Object(r.jsxs)(s.a.Fragment,{children:[Object(r.jsx)(i,{game:c}),Object(r.jsx)(u,{game:c})]})}var tt=function(e){Object(H.a)(n,e);var t=Object(F.a)(n);function n(){var e;Object(E.a)(this,n);for(var r=arguments.length,a=new Array(r),s=0;s<r;s++)a[s]=arguments[s];return(e=t.call.apply(t,[this].concat(a))).handleDartboardHit=function(t){var n=e.state,r=n.addScoreForCurrentPlayer,a=n.currentPlayerScoreboard,s=re.isInnerSingle(t)?"SBULL":"SBULL"===t?"DBULL":t,o=r(new re(s));o&&("DBULL"===o.symbol&&(o.value=100),e.state.addMessage(oe.getMessage(o)),2===o.index&&e.state.addMessage(oe.getMessage(a.getCurrentRound())),e.onDartboardHit(o))},e}return n}(Xe);function nt(e){var t=e.players,n=e.rounds,o=Object(De.g)(),c=Object(a.useContext)(D),i=c.backgroundImage,u=c.setBackgroundImage;0===t.length&&o.push("/game-menu");var l=Object(a.useMemo)((function(){return new tt(t,{rounds:n})}),[t,n]);Object(a.useEffect)((function(){if(l.isInitialized()){var e=Object(z.a)({},i),t=Se.theme;u({name:"ninja",url:"/resources/images/background/ninja.png"}),Se.setTheme("ninja"),Se.play("bgm"),l.start(),l.onGameOver=function(){B.once("CHANGE_BUTTON_CLICK",(function(){l.clearGameMessages(),l.addGameMessage("back"),l.stop(),u(e),Se.stop("bgm"),Se.setTheme(t),B.emit("GAME_OVER",tt.name,l.winners),o.push("/game-menu")}))}}}),[l,o,i,u]);var d=Object(We.a)((function(e){var t=e.game.state,n=t.currentPlayer,a=t.currentPlayerGameScore,s=t.currentPlayerDartScores,o=t.currentPlayerScoreboard,c=t.players,i=t.gameScores;return Object(r.jsx)(He,{name:"Ninja count-up",player:n,gameScore:a,dartScores:s,scoreboard:o,players:c,gameScores:i})})),h=Object(We.a)((function(e){var t=e.game,n=t.state.messages;return Object(r.jsx)(xt,{messages:n,onClose:t.handleGameMessageOnClose})}));return Object(r.jsxs)(s.a.Fragment,{children:[Object(r.jsx)(d,{game:l}),Object(r.jsx)(h,{game:l})]})}var rt=y.getFixedT(),at=function(e){Object(H.a)(n,e);var t=Object(F.a)(n);function n(){var e;Object(E.a)(this,n);for(var r=arguments.length,a=new Array(r),s=0;s<r;s++)a[s]=arguments[s];return(e=t.call.apply(t,[this].concat(a))).onDartboardHit=function(t){var n=e.state,r=n.currentPlayerScoreboard,a=n.increaseCurrentPlayerGameScore,s=n.isLastRoundFinished;a(t.value);var o=r.getCurrentRound();s()?e.handleGameOver():o&&2===o.getCurrentScore().index&&e.addGameMessage("nextPlayer")},e.onChangeButtonClick=function(){var t=e.state,n=t.addRoundForCurrentPlayer,r=t.clearMessages;n(),r(),e.addGameMessage("next")},e.handleGameOver=function(){if(0===e.state.messages.length)e.addGameResultMessage();else{var t=new A(e.state.messages);t.watch((function(n){0===n.length&&(e.addGameResultMessage(),t.stop())}))}e.pause(),B.off("CHANGE_BUTTON_CLICK",e.handleChangeButtonClick),e.onGameOver()},e.addGameResultMessage=function(){var t=e.winners.map((function(e){return e.name})),n=1===t.length?t[0]:t.join(rt(", "));t.length?e.addGameMessage("prizeForThreeDartsOnePrizeGame",n):e.addGameMessage("fail")},e}return Object(G.a)(n,[{key:"winners",get:function(){var e=this.state,t=e.gameScores,n=e.players,r=e.scoreboards,a=[];return t.forEach((function(e,t){(e>65||e<21)&&3===r[t].rounds[0].scores.length&&r[t].rounds[0].scores.every((function(e){return e.value>0}))&&a.push(t)})),a.map((function(e){return n[e]}))}}]),n}($e);function st(e){var t=e.players,n=e.rounds,o=Object(De.g)(),c=Object(a.useContext)(P).increaseCredit;0===t.length&&o.push("/game-menu");var i=Object(a.useMemo)((function(){return new at(t,{rounds:n})}),[t,n]);Object(a.useEffect)((function(){if(i.isInitialized()){var e=Se.theme;Se.setTheme("3-darts-1-prize"),Se.play("bgm"),i.start(),i.onGameOver=function(){i.winners.length&&c(2*i.winners.length),B.once("CHANGE_BUTTON_CLICK",(function(){i.clearGameMessages(),i.addGameMessage("back"),i.stop(),Se.stop("bgm"),Se.setTheme(e),B.emit("GAME_OVER",at.name,i.winners),o.push("/game-menu")}))}}}),[c,i,o]);var u=Object(We.a)((function(e){var t=e.game.state,n=t.currentPlayer,a=t.currentPlayerGameScore,s=t.currentPlayerDartScores,o=t.currentPlayerScoreboard,c=t.players,i=t.gameScores;return Object(r.jsx)(He,{name:"2165",player:n,gameScore:a,dartScores:s,scoreboard:o,players:c,gameScores:i})})),l=Object(We.a)((function(e){var t=e.game,n=t.state.messages;return Object(r.jsx)(xt,{messages:n,onClose:t.handleGameMessageOnClose})}));return Object(r.jsxs)(s.a.Fragment,{children:[Object(r.jsx)(u,{game:i}),Object(r.jsx)(l,{game:i})]})}var ot=function(e){Object(H.a)(n,e);var t=Object(F.a)(n);function n(e){var r,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{score:301,rounds:15};return Object(E.a)(this,n),(r=t.call(this,e,a)).onDartboardHit=function(e){var t=r.state,n=t.isLastRoundFinished,a=t.currentPlayerScoreboard;(0,t.decreaseCurrentPlayerGameScore)(e.value);var s=a.getCurrentRound(),o=r.state.currentPlayerGameScore;0===o||n()?r.handleGameOver():o>0&&s&&2===s.getCurrentScore().index?r.addGameMessage("nextPlayer"):o<0&&r.addGameMessage("bust")},r.onChangeButtonClick=function(){var e=r.state,t=e.addRoundForCurrentPlayer,n=e.clearMessages,a=e.currentPlayerGameScore,s=e.deleteCurrentRoundForCurrentPlayer,o=e.increaseCurrentPlayerGameScore;if(n(),a<0){var c=s();o(c.scores.map((function(e){return e.value})).reduce((function(e,t){return e+t}))),(c=new ae(c.index)).addScore("BUST"),t(c)}t(),r.addGameMessage("next")},r}return Object(G.a)(n,[{key:"winners",get:function(){var e=this,t=this.state.players.map((function(t,n){return{name:t.name,score:e.state.gameScores[n]}})).sort((function(e,t){return e.score-t.score}));return t.filter((function(e){return e.score===t[0].score}))}}]),n}($e);function ct(e){var t=e.players,n=e.rounds,o=e.score,c=Object(De.g)();0===t.length&&c.push("/game-menu");var i=Object(a.useMemo)((function(){return new ot(t,{score:o,rounds:n})}),[t,o,n]);Object(a.useEffect)((function(){i.isInitialized()&&(i.start(),i.onGameOver=function(){B.once("CHANGE_BUTTON_CLICK",(function(){i.clearGameMessages(),i.addGameMessage("back"),i.stop(),B.emit("GAME_OVER",ot.name,i.winners),c.push("/game-menu")}))})}),[i,c]);var u=Object(We.a)((function(e){var t=e.game.state,n=t.currentPlayer,a=t.currentPlayerGameScore,s=t.currentPlayerDartScores,o=t.currentPlayerScoreboard,c=t.players,i=t.gameScores;return Object(r.jsx)(He,{name:"01 game",player:n,gameScore:a,dartScores:s,scoreboard:o,players:c,gameScores:i})})),l=Object(We.a)((function(e){var t=e.game,n=t.state.messages;return Object(r.jsx)(xt,{messages:n,onClose:t.handleGameMessageOnClose})}));return Object(r.jsxs)(s.a.Fragment,{children:[Object(r.jsx)(u,{game:i}),Object(r.jsx)(l,{game:i})]})}function it(e){var t=e.game,n=void 0===t?{}:t,s=e.players,o=void 0===s?[]:s,c=Object(De.g)(),i=Object(a.useContext)(D).setRandomBackgroundImage;switch(Object(a.useEffect)((function(){"ninja-count-up"!==n.name&&i()}),[]),n.name){case"zero-one":return Object(r.jsx)(ct,{players:o,score:n.score,rounds:n.rounds});case"count-up":return Object(r.jsx)(et,{players:o,rounds:n.rounds});case"ninja-count-up":return Object(r.jsx)(nt,{players:o,rounds:n.rounds});case"3-darts-1-prize":return Object(r.jsx)(st,{players:o,rounds:n.rounds});default:return c.push("/"),null}}var ut=n(149),lt=function(e){return{text:{textTransform:"uppercase"},snackbar:{width:"100%"},snackbarContent:{color:"#000",backgroundColor:"#fff"}}},dt=Object(Ge.a)(lt);function ht(e){var t=e.message,n=e.onClose,s=dt(),o=Object(a.useState)(!0),c=Object(w.a)(o,2),i=c[0],u=c[1];return Object(a.useEffect)((function(){u(!0),t.soundEffect&&Se.play(t.soundEffect)}),[t]),Object(r.jsx)(ut.a,{anchorOrigin:{vertical:"top",horizontal:"center"},className:s.snackbar,open:i,autoHideDuration:t.autoHideDuration,onClose:function(){u(!1),n&&n(t)},message:Object(r.jsx)(Yt,{className:s.text,variant:"h1",children:t.text}),ContentProps:{className:s.snackbarContent}})}var ft=n(148),mt=n(140),gt=function(e){return{text:{textTransform:"uppercase"},dialogScrollPaper:{alignItems:"flex-end"}}},bt=Object(Ge.a)(gt);function pt(e){var t=e.message,n=bt();return Object(a.useEffect)((function(){t.soundEffect&&Se.play(t.soundEffect)}),[t]),Object(r.jsx)(ft.a,{open:!0,maxWidth:!1,classes:{scrollPaper:n.dialogScrollPaper},children:Object(r.jsx)(mt.a,{children:Object(r.jsx)(Yt,{className:n.text,variant:"h1",children:t.text})})})}var jt=function(e){return{root:function(t){return{position:"fixed",zIndex:e.gameAward.zIndex,top:0,left:0,width:"100%",height:"100%",color:"white",backgroundColor:"black",display:"flex",justifyContent:"center",alignItems:"center",backgroundImage:"url(".concat(t.backgroundImageUrl,")"),backgroundPosition:"center",backgroundRepeat:"no-repeat",backgroundSize:"cover"}},text:{textTransform:"capitalize"}}},Ot=Object(Ge.a)(jt);function yt(e){var t=e.message,n=e.onClose,s=Object(a.useState)(!0),o=Object(w.a)(s,2),c=o[0],i=o[1],u=Object(Ae.a)().t,l=Object(a.useContext)(D).backgroundImage,d=Ot({backgroundImageUrl:l.url});return Object(a.useEffect)((function(){var e=setTimeout((function(){i(!1),n&&n(t)}),t.autoHideDuration);return function(){return clearTimeout(e)}}),[t,n,i]),c?Object(r.jsx)("div",{className:d.root,children:Object(r.jsx)(Yt,{className:d.text,variant:"h1",children:u("One bull")})}):null}function vt(e){var t=e.message,n=e.onClose;switch(t.id){case"oneBull":return Object(r.jsx)(yt,{message:t,onClose:n});case"lowTon":case"hatTrick":default:return null}}function St(e){var t=e.message,n=e.onClose,a=new Ie(y.language);switch(t.type){case"snackbar":return Object(r.jsx)(ht,{message:t,onClose:n});case"dialog":return Object(r.jsx)(pt,{message:t,onClose:n});case"animationDialog":return Object(r.jsx)(vt,{message:t,onClose:n});case"speech":return a.speak(t.text),n&&n(t),null;case"sound":default:return t.soundEffect&&Se.play(t.soundEffect),n&&n(t),null}}function xt(e){var t=e.messages,n=e.onClose;return Object(r.jsx)(s.a.Fragment,{children:t.map((function(e,t){return Object(r.jsx)(St,{message:e,onClose:n},t)}))})}function It(e){var t=e.children,n=e.selectedIndex,r=e.setSelectedIndex;return Object(a.useEffect)((function(){var e=[],a=[],s=function t(n){var r=0;return n.type===ze.a?(r++,e.push(n.props.onMouseOver),a.push(n.props.onClick)):Array.isArray(n)&&n.forEach((function(n){n.type===ze.a?(r++,e.push(n.props.onMouseOver),a.push(n.props.onClick)):Array.isArray(n)&&(r+=t(n))})),r}(t),o=function(){r((function(e){return(e+1)%s})),"function"===typeof e[n]&&e[n]()},c=function(e){return("SBULL"===e||"DBULL"===e)&&"function"===typeof a[n]&&a[n]()};return B.on("CHANGE_BUTTON_CLICK",o),B.on("DARTBOARD_HIT",c),function(){B.off("CHANGE_BUTTON_CLICK",o),B.off("DARTBOARD_HIT",c)}}),[n]),t}var Ct=X.create(b.dartboard);function Tt(){var e=Object(Ae.a)().t,t=Object(De.g)();return Object(r.jsxs)(Fe.a,{children:[Object(r.jsx)(ze.a,{onClick:function(){Ct.connect().then((function(){return Ct.connected&&t.push("/game-menu")}))},children:Object(r.jsx)(Yt,{variant:"h2",children:e("Connect dartboard")})}),Object(r.jsx)(ze.a,{children:Object(r.jsx)(Yt,{variant:"h6",children:e("version",{version:"0.1.70"})})})]})}var Pt=n(141),wt=n(142),kt=n(150),Dt=n(143),Et=function(e){return{root:{color:function(e){return e.active?"#ffffff":"#aaaaaa"},backgroundColor:function(e){return e.active?"#000000dd":"#00000066"}},avatar:{backgroundColor:function(t){return"".concat(e.players[t.index])}},score:{textAlign:"center"}}},At=Object(Ge.a)(Et);function Gt(e){var t=e.name,n=e.score,a=e.index,s=e.active,o=At({index:a,active:s});return Object(r.jsxs)(Pt.a,{className:o.root,children:[Object(r.jsx)(wt.a,{avatar:Object(r.jsx)(kt.a,{className:o.avatar,children:t.charAt(0).toUpperCase()}),title:Object(r.jsx)(Le.a,{variant:"h4",children:t})}),Object(r.jsx)(Dt.a,{className:o.score,children:Object(r.jsx)(Le.a,{variant:"h4",children:n})})]})}var Nt=n(108),Lt=n(111),Rt=n(144);function Bt(e){var t=e.index,n=e.round,a=e.score;return Object(r.jsx)(Yt,{style:a>=100?{color:"".concat(C.players[t])}:{},variant:"h5",children:"".concat(n,". ").concat(a)})}var Mt=function(e){return{round:{paddingLeft:0}}},Ut=Object(Ge.a)(Mt);function _t(e){var t=e.className,n=e.index,a=e.rounds,s=e.totalRounds,o=Object(Ae.a)().t,c=Ut(),i=a.slice(-8);return Object(r.jsx)("div",{className:t,children:Object(r.jsxs)(Nt.a,{children:[Object(r.jsx)(Lt.a,{className:c.round,children:Object(r.jsx)(Rt.a,{primary:Object(r.jsx)(Yt,{variant:"h4",children:"".concat(a.length," / ").concat(s," ").concat(o("Rounds"))})})}),Object(d.a)(Array(i.length).keys()).map((function(e){return Object(r.jsx)(Lt.a,{className:c.round,children:Object(r.jsx)(Rt.a,{primary:0===i[e].scores.length?Object(r.jsx)(Yt,{variant:"h5",children:"".concat(i[e].index+1,".")}):"BUST"===i[e].scores[0].displaySymbol?Object(r.jsx)(Yt,{variant:"h5",children:"".concat(i[e].index+1,". ").concat(o("Bust \ud83d\ude31"))}):Object(r.jsx)(Bt,{index:n,round:i[e].index+1,score:i[e].scores.map((function(e){return e.value})).reduce((function(e,t){return e+t}))})})},e)})).reverse()]})})}var Ht=function(e){return{text:{marginLeft:"1rem",textShadow:"-3px 0 white, 0 3px white, 3px 0 white, 0 -3px white"}}},Ft=Object(Ge.a)(Ht);function zt(e){var t=e.className,n=e.scores,a=Ft();return Object(r.jsx)(Nt.a,{className:t,children:n.map((function(e,t){return Object(r.jsx)(Lt.a,{children:Object(r.jsx)(Rt.a,{primary:Object(r.jsx)(Le.a,{className:a.text,variant:"h4",children:"".concat(t+1,". ").concat(e.displaySymbol)})})},t)}))})}var Kt=n(8),Vt={root:{color:"black",textShadow:"-3px 0 white, 0 3px white, 3px 0 white, 0 -3px white"}};function Yt(e){var t=Object(Kt.a)(Vt)(Le.a);return Object(r.jsx)(t,Object(z.a)({},e))}var Jt=n(9),qt=function(e){return{root:function(t){var n;return n={height:"100vh",overflowX:"hidden"},Object(Jt.a)(n,e.breakpoints.between("sm","xl"),{overflowY:"hidden"}),Object(Jt.a)(n,"backgroundImage","url(".concat(t.backgroundImageUrl,")")),Object(Jt.a)(n,"backgroundPosition","center"),Object(Jt.a)(n,"backgroundRepeat","no-repeat"),Object(Jt.a)(n,"backgroundSize","cover"),n},credit:{position:"fixed",bottom:"24px",right:"24px"}}},Qt={game:{},players:[]},Wt=Object(Ee.a)(),Zt=Object(Ge.a)(qt);function $t(){var e=b.isArcadeMode,t=Object(a.useContext)(Pe),n=Object(a.useContext)(P),o=n.credit,c=n.increaseCredit,i=n.decreaseCredit,u=Object(a.useContext)(D).backgroundImage,l=Object(Ae.a)().t,d=Zt({backgroundImageUrl:u.url});return Object(a.useEffect)((function(){var t=X.create(b.dartboard),n=_.create(b.coinAcceptor),r=function(){c(1),Se.play("coin")},a=function(t,n){if(i(Qt.game.credit*Qt.players.length),e()){var r=b.defaultGames.find((function(e){return"threeDartsOnePrize"===e.id}));r&&(r.platforms=t===at.name&&n.length?[]:["arcade"])}};return t.isBluetoothConnection()?Wt.push("/options"):t.connect(),e()&&(n.connect(),B.on("COIN_INSERT",r),B.on("GAME_OVER",a)),function(){t.disconnect(),e()&&(n.disconnect(),B.off("COIN_INSERT",r),B.off("GAME_OVER",a))}}),[]),Object(r.jsx)("div",{className:d.root,children:t.isLogined&&Object(r.jsx)(ke.a,{children:Object(r.jsxs)(De.d,{children:[Object(r.jsx)(De.b,{path:"/game-menu/:step",render:function(){return Object(r.jsxs)(s.a.Fragment,{children:[Object(r.jsx)(Qe,{appState:Qt}),e()&&Object(r.jsx)(Yt,{className:d.credit,variant:"h4",children:l("credit",{credit:o})})]})}}),Object(r.jsx)(De.b,{path:"/game",render:function(){return Object(r.jsx)(it,{game:Qt.game,players:Qt.players})}}),Object(r.jsx)(De.b,{path:"/options",render:function(){return Object(r.jsx)(Tt,{})}}),Object(r.jsx)(De.b,{render:function(){return Object(r.jsx)(De.a,{to:"/game-menu/games"})}})]})})})}n(106);y.changeLanguage(b.language||window.navigator.userLanguage||window.navigator.language),c.a.render(Object(r.jsx)(s.a.StrictMode,{children:Object(r.jsx)(i.a,{i18n:y,children:Object(r.jsx)(u.a,{theme:Object(l.a)(C),children:Object(r.jsx)(we,{children:Object(r.jsx)(k,{children:Object(r.jsx)(Te,{children:Object(r.jsx)($t,{})})})})})})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.register("/service-worker.js?t=".concat((new Date).getTime())),T()}},[[107,1,2]]]);
//# sourceMappingURL=main.f0eb16c0.chunk.js.map