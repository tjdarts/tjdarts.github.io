{"version":3,"sources":["config.js","i18n.js","theme.js","reportWebVitals.js","components/contexts/CreditContext/index.js","components/contexts/CreditProvider/index.js","components/contexts/BackgroundImageContext/index.js","shared/services/ArrayWatcher/index.js","shared/services/BackgroundImage/index.js","shared/services/Emitter.js","shared/services/coinacceptors/KeyboardCoinAcceptor/index.js","shared/services/coinacceptors/MouseCoinAcceptor/index.js","shared/factories/CoinAcceptorFactory/index.js","shared/services/dartboards/Dartboard/index.js","shared/services/dartboards/GranboardDartboard/map.js","shared/services/dartboards/GranboardDartboard/index.js","shared/services/dartboards/BluetoothDartboard/index.js","shared/services/dartboards/KeyboardDartboard/map.js","shared/services/dartboards/KeyboardDartboard/index.js","shared/factories/DartboardFactory/index.js","shared/factories/MessageFactory/index.js","shared/services/Scoreboard/Score/index.js","shared/services/Scoreboard/Round/index.js","shared/services/Scoreboard/index.js","shared/services/GameAwardUtils/index.js","shared/stores/GameStateStore/index.js","shared/stores/UserStore.js","shared/services/GoogleOAuth/index.js","shared/services/OfflineAuth/index.js","shared/services/PlayerManager/index.js","shared/services/SoundEffectPlayer/index.js","shared/services/Speech/index.js","components/contexts/BackgroundImageProvider/index.js","components/contexts/OAuthContext/index.js","components/contexts/OAuthProvider/index.js","components/App/styles.js","components/App/index.js","components/ClassicDartGameView/GameScore/styles.js","components/ClassicDartGameView/GameScore/index.js","components/ClassicDartGameView/styles.js","components/ClassicDartGameView/index.js","components/Credit/styles.js","components/Credit/index.js","components/GameMenuView/GameSelectionView/index.js","components/GameMenuView/PlayerSelectionView/index.js","components/GameMenuView/styles.js","components/GameMenuView/index.js","shared/game/Game/index.js","components/games/CountUpGameView/CountUpGame/index.js","components/games/CountUpGameView/index.js","components/games/NinjaCountUpGameView/NinjaCountUpGame/index.js","components/games/NinjaCountUpGameView/index.js","components/games/ZeroOneGameView/ZeroOneGame/index.js","components/games/CoOpZeroOneGameView/CoOpZeroOneGame/index.js","components/games/CoOpZeroOneGameView/index.js","components/games/ThreeDartsOnePrizeGameView/ThreeDartsOnePrizeGame/index.js","components/games/ThreeDartsOnePrizeGameView/index.js","components/games/ZeroOneGameView/index.js","components/GameView/index.js","components/GameMessagesView/Snackbar/styles.js","components/GameMessagesView/Snackbar/index.js","components/GameMessagesView/Dialog/styles.js","components/GameMessagesView/Dialog/index.js","components/awards/OneBull/styles.js","components/awards/OneBull/index.js","components/GameMessagesView/AnimationDialog/index.js","components/GameMessagesView/GameMessage/index.js","components/GameMessagesView/index.js","components/MenuItemSelector/index.js","components/OptionsView/index.js","components/PlayerCard/styles.js","components/PlayerCard/index.js","components/Scoreboard/Score/index.js","components/Scoreboard/styles.js","components/Scoreboard/index.js","components/Scores/styles.js","components/Scores/index.js","components/Typography/styles.js","components/Typography/index.js","index.js"],"names":["PLATFORMS","DARTBOARDS","GAMES","301","id","displayName","name","score","rounds","platforms","credit","501","701","countUp","coOp1001","totalRounds","totalCredits","ninjaCountUp","oneRoundCountUp","scoresPerRound","oneRoundLuckyNumber","threeDartsOnePrize","GAME_CATEGORY_GAMES","topGames","customConfig","JSON","parse","localStorage","getItem","e","console","error","DEFAULT_GAMES","config","platform","dartboard","includes","coinAcceptor","defaultGames","maxPlayers","players","Array","keys","map","i","soundTheme","styleTheme","users","isArcadeMode","isHomeMode","isMarketMode","defaultSelectedGame","undefined","i18n","use","LanguageDetector","initReactI18next","init","resources","en","translations","bullseyeAward","moreCoins","requiredCredits","version","winnersAward","winnersAwardForThreeDartsOnePrizeGame","zh","fallbackLng","debug","ns","defaultNS","keySeparator","nsSeparator","interpolation","escapeValue","happy","colors","blue","yellow","orange","red","green","purple","black","contrastText","Z_INDEXES","theme","createMuiTheme","palette","default","gameAward","zIndex","gameMessage","gameScore","typography","fontFamily","join","overrides","MuiDialog","root","MuiListItem","textTransform","MuiSnackbar","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","CreditContext","React","createContext","increaseCredit","decreaseCredit","CreditProvider","children","useState","setCredit","Provider","value","credits","prevCredit","BackgroundImageContext","backgroundImage","setBackgroundImage","setRandomBackgroundImage","ArrayWatcher","array","timerId","watch","listener","interval","window","setInterval","prevArray","length","stop","clearInterval","this","IMAGES","country","url","BackgroundImage","imageIndex","randomIndex","Math","floor","random","index","Emitter","EventEmitter","KeyboardCoinAcceptor","connected","connect","Promise","resolve","document","addEventListener","handleCoinInsert","disconnect","removeEventListener","event","ctrlKey","key","emit","MouseCoinAcceptor","ondblclick","CoinAcceptorFactory","TYPES","steelTip","softTip","CONNECTIONS","builtIn","usb","bluetooth","Dartboard","type","connection","isSteelTipType","isSoftTipType","isBuiltInConnection","isUsbConnection","isBluetoothConnection","types","connections","GranboardDartboard","deviceName","serviceUuid","characteristicUuid","options","valid","device","characteristic","navigator","requestDevice","filters","services","autoReconnect","connectGattServer","stopNotifications","handleDartboardHit","gatt","server","getPrimaryService","service","getCharacteristic","startNotifications","target","data","byteLength","push","getUint8","toString","slice","symbol","parseInt","warn","32","33","34","35","36","37","38","39","40","41","42","43","44","45","46","47","48","49","50","51","52","53","54","55","56","57","58","59","60","61","62","63","64","65","66","67","68","69","70","71","72","73","74","75","76","77","78","79","80","81","82","83","84","85","86","87","88","89","90","91","92","93","94","95","96","97","98","99","100","101","102","103","104","105","106","107","108","109","110","111","112","113","114","115","KeyboardDartboard","keyCode","charCodeAt","DartboardFactory","t","getFixedT","MESSAGES","back","block","soundEffect","bust","text","dart","dbull","bull","autoHideDuration","fail","gameOn","hatTrick","highTon","lowTon","next","nextPlayer","nextRound","oneBull","prizeForThreeDartsOnePrizeGame","names","sbull","win","MessageFactory","param","message","Score","toValue","calculableSymbol","toDisplaySymbol","scoreSymbol","charAt","isValid","displaySymbol","test","digit","startsWith","endsWith","Round","scores","addScore","isNewScoreAddable","scoreObject","Error","getCurrentScore","some","s","Scoreboard","roundsLength","round","getCurrentRound","addRound","removeCurrentRound","pop","isLastRoundFinished","GameAwardUtils","darts","isBullseye","toLowerCase","create","sum","sumScores","bullCounter","countBullScores","counter","forEach","GameStateStore","initGameScore","currentPlayerIndex","currentPlayerDartScores","gameScores","messages","scoreboards","isLastRound","currentPlayer","lastPlayer","lastPlayerScoreboard","isLastRoundForCurrentPlayer","currentPlayerScoreboard","addScoreForCurrentPlayer","concat","addRoundForCurrentPlayer","newRound","deleteCurrentRoundForCurrentPlayer","deletedRound","addMessage","deleteMessage","findIndex","m","splice","clearMessages","setCurrentPlayerIndex","setCurrentPlayerGameScore","setPlayerGameScore","increaseCurrentPlayerGameScore","currentPlayerGameScore","decreaseCurrentPlayerGameScore","makeObservable","observable","computed","action","player","UserStore","email","LOGIN_SUCCESS_MESSAGE","isLogined","LOGIN_FAILURE_MESSAGE","GoogleOAuth","storageItemName","clientId","process","redirectUri","auth","result","params","searchParams","URLSearchParams","location","hash","substring","Object","setItem","stringify","openSignInForm","OfflineAuth","xhr","XMLHttpRequest","open","onreadystatechange","readyState","status","response","emailAddresses","has","send","form","createElement","setAttribute","input","appendChild","body","submit","token","KEYUTIL","getKey","KJUR","jws","JWS","verifyJWT","alg","PlayerManager","_players","SOUND_EFFECTS","ninja","soundEffectService","soundEffects","play","on","setTheme","loadSoundEffects","Howl","src","volume","loop","speech","speechSynthesis","Speech","lang","speak","speaking","utterance","SpeechSynthesisUtterance","voice","voices","getVoices","image","BackgroundImageProvider","randomImage","OAuthContext","OAuthProvider","setResult","useEffect","styles","props","height","overflowX","breakpoints","between","overflowY","backgroundImageUrl","position","bottom","right","state","game","history","createBrowserHistory","useStyles","makeStyles","App","useTranslation","oauth","useContext","classes","handleThreeDartsOnePrizeGame","gameName","winners","find","g","off","className","path","render","GameMenuView","appState","to","Credit","variant","color","fontSize","textShadow","GameScore","align","margin","display","justifyContent","alignItems","top","left","width","scoreboard","float","marginLeft","playerCards","ClassicDartGameView","dartScores","isPlayerListHidden","Scores","Grid","container","spacing","p","item","xs","PlayerCard","active","visibility","hidden","withRouter","pathname","SoundEffectPlayer","handleGameOver","usedCredits","GameSelectionView","games","useHistory","selectedIndex","setSelectedIndex","MenuList","MenuItemSelector","filter","MenuItem","selected","onMouseOver","onClick","handleGameSelect","playerManager","PlayerSelectionView","currentCredits","language","remainingCredits","coins","abs","handlePlayersSelect","style","step","useParams","ActiveView","STATUSES","UNINITIALIZED","INITIALIZED","STARTED","RESUMED","PAUSED","STOPPED","Game","start","isInitialized","isStopped","addListeners","handleChangeButtonClick","resume","isStarted","isPaused","pause","isResumed","removeListeners","onDartboardHit","onChangeButtonClick","onGameOver","getMessage","switchToNextPlayer","handleGameMessageOnClose","addGameMessage","arrayWatcher","clearGameMessages","statuses","CountUpGame","sort","a","b","winner","CountUpGameView","useMemo","once","GameView","observer","MessagesView","GameMessagesView","onClose","Fragment","NinjaCountUpGame","isInnerSingle","NinjaCountUpGameView","originalBackgrondImage","originalSoundEffectTheme","ZeroOneGame","computePlayersGameScores","rollbackPlayersGameScores","reduce","CoOpZeroOneGame","CoOpZeroOneGameView","ThreeDartsOnePrizeGame","addGameResultMessage","w","winnerIndexes","every","ThreeDartsOnePrizeGameView","ZeroOneGameView","snackbar","snackbarContent","backgroundColor","Snackbar","setOpen","anchorOrigin","vertical","horizontal","ContentProps","dialogScrollPaper","Dialog","maxWidth","scrollPaper","DialogContent","backgroundPosition","backgroundRepeat","backgroundSize","OneBull","setTimeout","clearTimeout","AnimationDialog","GameMessage","onMouseOverCallbacks","onClickCallbacks","childrenLength","countMenuItemLength","isArray","child","handleMenuItemSelect","prevSelectedIndex","handleMenuItemSubmit","avatar","textAlign","Card","CardHeader","Avatar","toUpperCase","title","CardContent","playerIndex","isCurrentRound","roundIndex","paddingLeft","lastEightRounds","List","ListItem","ListItemText","primary","reverse","Typography","withStyles","_Typography","changeLanguage","userLanguage","ReactDOM","StrictMode","I18nextProvider","ThemeProvider","getElementById","serviceWorker","register","Date","getTime"],"mappings":"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","file":"static/js/main.e105bd0f.chunk.js","sourcesContent":["const PLATFORMS = ['arcade', 'home', 'market']\nconst DARTBOARDS = ['keyboard', 'granboard']\nconst COIN_ACCEPTORS = ['keyboard', 'mouse']\nconst GAMES = {\n  301:                 { id: '301',                 displayName: '301',            name: 'zero-one',               score: 301,  rounds: 10,                   platforms: PLATFORMS,      credit: 1 },\n  501:                 { id: '501',                 displayName: '501',            name: 'zero-one',               score: 501,  rounds: 15,                   platforms: PLATFORMS,      credit: 2 },\n  701:                 { id: '701',                 displayName: '701',            name: 'zero-one',               score: 701,  rounds: 20,                   platforms: PLATFORMS,      credit: 3 },\n  countUp:             { id: 'countUp',             displayName: 'Count-up',       name: 'count-up',                            rounds: 8,                    platforms: PLATFORMS,      credit: 2 },\n  coOp1001:            { id: 'coOp1001',            displayName: 'Co-op 1001',     name: 'co-op-zero-one',         score: 1001, totalRounds: 40,              platforms: PLATFORMS,      totalCredits: 4 },\n  ninjaCountUp:        { id: 'ninjaCountUp',        displayName: 'Ninja count-up', name: 'ninja-count-up',                      rounds: 8,                    platforms: PLATFORMS,      credit: 3 },\n  oneRoundCountUp:     { id: 'oneRoundCountUp',     displayName: 'Count-up',       name: 'one-round-count-up',                  rounds: 1, scoresPerRound: 8, platforms: PLATFORMS,      credit: 1 },\n  oneRoundLuckyNumber: { id: 'oneRoundLuckyNumber', displayName: '777',            name: 'one-round-lucky-number', score: 401,  rounds: 1, scoresPerRound: 8, platforms: PLATFORMS,      credit: 1 },\n  threeDartsOnePrize:  { id: 'threeDartsOnePrize',  displayName: '2165',           name: '3-darts-1-prize',                     rounds: 1,                    platforms: [PLATFORMS[0]], credit: 1 },\n}\nconst GAME_CATEGORIES = ['topGames']\nconst GAME_CATEGORY_GAMES = {\n  topGames: [GAMES[301], GAMES[501], GAMES['countUp'], GAMES['coOp1001'], GAMES['ninjaCountUp'], GAMES['threeDartsOnePrize'], GAMES['oneRoundLuckyNumber']]\n}\n\nlet customConfig = {}\ntry {\n  customConfig = JSON.parse(localStorage.getItem('config')) || {}\n} catch(e) {\n  console.error(e)\n}\n\nconst DEFAULT_GAME_CATEGORY = GAME_CATEGORIES[0]\nconst DEFAULT_GAMES = GAME_CATEGORY_GAMES[DEFAULT_GAME_CATEGORY]\nconst MAX_PLAYERS = 4\nconst config = {\n  // language: 'en',\n  platform: PLATFORMS[0],\n  dartboard: customConfig.dartboard && DARTBOARDS.includes(customConfig.dartboard) ? customConfig.dartboard :\n              (process.env.NODE_ENV === 'development' || process.env.NODE_ENV === 'test'\n                ? DARTBOARDS[0] : DARTBOARDS[1]\n              ),\n  coinAcceptor: COIN_ACCEPTORS[1],\n  defaultGames: DEFAULT_GAMES,\n  maxPlayers: MAX_PLAYERS,\n  players: [...Array(MAX_PLAYERS).keys()].map(i => ({ name: `Player ${i + 1}` })),\n  soundTheme: 'default',\n  styleTheme: 'default',\n  users: ['itoyxd@gmail.com'],\n  isArcadeMode: () => config.platform === PLATFORMS[0],\n  isHomeMode: () => config.platform === PLATFORMS[1],\n  isMarketMode: () => config.platform === PLATFORMS[2]\n}\nconfig.defaultSelectedGame = config.isMarketMode() ? GAMES['oneRoundLuckyNumber'] : undefined\n\nexport default config\n","import i18n from 'i18next'\nimport LanguageDetector from 'i18next-browser-languagedetector'\nimport { initReactI18next } from 'react-i18next'\n\ni18n\n  .use(LanguageDetector)\n  .use(initReactI18next)\n  .init({\n    resources: {\n      en: {\n        translations: {\n          ', ': ', ',\n          '01 game': '01 game',\n          '1 player': '1 player',\n          '2 players': '2 players',\n          '3 players': '3 players',\n          '4 players': '4 players',\n          '2165': '2165',\n          '301': '301',\n          '501': '501',\n          '701': '701',\n          '777': '777',\n          'Back': 'Back',\n          'Bust 😱': 'Bust 😱',\n          'Co-op 1001': 'Co-op 1001',\n          'Connect dartboard': 'Connect dartboard',\n          'Count-up': 'Count-up',\n          'Game on': 'Game on',\n          'Game over': '🏆 Game over ✌️',\n          'Ninja count-up': 'Ninja count-up',\n          'No such platform mode!': 'No such platform mode!',\n          'One bull': 'One bull',\n          'Player 1': 'Player 1',\n          'Player 2': 'Player 2',\n          'Player 3': 'Player 3',\n          'Player 4': 'Player 4',\n          'Press 🔴 to change player': 'Press 🔴 to change player',\n          'Press 🔴 to next round': 'Press 🔴 to next round',\n          'Rounds': 'Rounds',\n          '😱 Bust 💔': '😱 Bust 💔',\n          '😱 You failed 💔': '😱 You failed 💔',\n          bullseyeAward: '🔥 {{bull}} 🎯',\n          credit: 'Credit: {{credit}}',\n          moreCoins: 'Need {{coins}} more coins to insert',\n          requiredCredits: '{{credit}} credits',\n          score: '{{score}} points',\n          version: 'Version: {{version}}',\n          winnersAward: '🏆 {{name}} wins! ✌️',\n          winnersAwardForThreeDartsOnePrizeGame: '🏆 {{names}} gets free credits! ✌️'\n        }\n      },\n      zh: {\n        translations: {\n          ', ': '、',\n          '01 game': '01 遊戲',\n          '1 player': '一名玩家',\n          '2 players': '兩名玩家',\n          '3 players': '三名玩家',\n          '4 players': '四名玩家',\n          '2165': '貳壹陸伍',\n          '301': '參零壹',\n          '501': '伍零壹',\n          '701': '柒零壹',\n          '777': '柒柒柒',\n          'Back': '上一頁',\n          'Bust 😱': '爆 😱',\n          'Co-op 1001': '搶尾刀',\n          'Connect dartboard': '連接飛鏢靶',\n          'Count-up': '分數跑起來',\n          'Game on': '開始遊戲',\n          'Game over': '🏆 遊戲結束 ✌️',\n          'Ninja count-up': '忍者の手裏劍',\n          'No such platform mode!': '沒有這個平台模式！',\n          'One bull': '一隻穿雲紅心箭 😜',\n          'Player 1': '台客',\n          'Player 2': '灣灣',\n          'Player 3': '金老',\n          'Player 4': '鏢哥',\n          'Press 🔴 to change player': '按 🔴 換下一個玩家',\n          'Press 🔴 to next round': '按 🔴 到下一個回合',\n          'Rounds': '回合',\n          '😱 Bust 💔': '😱 Bust 殘念 💔',\n          '😱 You failed 💔': '😱 失敗了 💔',\n          bullseyeAward: '🔥 {{bull}} 🎯',\n          credit: '點數：{{credit}}',\n          moreCoins: '還需要投入 {{coins}} 枚硬幣',\n          requiredCredits: '{{credit}} 點數',\n          score: '{{score}} 分',\n          version: '版本：{{version}}',\n          winnersAward: '🏆 {{name}}獲勝！ ✌️',\n          winnersAwardForThreeDartsOnePrizeGame: '🏆 {{names}}獲得了免費的點數！ ✌️'\n        }\n      }\n    },\n    fallbackLng: 'en',\n    debug: true,\n    ns: ['translations'],\n    defaultNS: 'translations',\n    keySeparator: '>',\n    nsSeparator: '|',\n    interpolation: {\n      escapeValue: false\n    }\n  })\n\nexport default i18n\n","import { createMuiTheme } from '@material-ui/core/styles'\n\nconst happy = {\n  colors: {\n    blue: '#01befe',\n    yellow: '#ffdd00',\n    orange: '#ff7d00',\n    red: '#ff006d',\n    green: '#adff02',\n    purple: '#8f00ff',\n    black: '#000000'\n  },\n  contrastText: '#ffffff'\n}\n\nconst Z_INDEXES = {\n  gameAward: 1602,\n  gameMessage: 1601,\n  gameScore: 1600,\n}\n\nconst theme = createMuiTheme({\n  palette: {\n    default: happy,\n    happy: happy\n  },\n  players: [\n    happy.colors.blue,\n    happy.colors.red,\n    happy.colors.yellow,\n    happy.colors.purple\n  ],\n  gameAward: {\n    zIndex: Z_INDEXES.gameAward\n  },\n  gameMessage: {\n    zIndex: Z_INDEXES.gameMessage\n  },\n  gameScore: {\n    zIndex: Z_INDEXES.gameScore // On the top of the Material UI's Dialog component.\n  },\n  typography: {\n    fontFamily: [\n      '\"Russo One\"', // https://fonts.google.com/specimen/Russo+One\n      '\"Noto Serif TC\"', //https://fonts.google.com/specimen/Noto+Serif+TC?subset=chinese-traditional\n      '-apple-system',\n      'BlinkMacSystemFont',\n      '\"Segoe UI\"',\n      'Roboto',\n      '\"Helvetica Neue\"',\n      'Arial',\n      'sans-serif',\n      '\"Apple Color Emoji\"',\n      '\"Segoe UI Emoji\"',\n      '\"Segoe UI Symbol\"'\n    ].join(',')\n  },\n  overrides: {\n    MuiDialog: {\n      root: {\n        zIndex: `${Z_INDEXES.gameMessage} !important`\n      }\n    },\n    MuiListItem: {\n      root: {\n        textTransform: 'uppercase'\n      }\n    },\n    MuiSnackbar: {\n      root: {\n        zIndex: `${Z_INDEXES.gameMessage} !important`\n      }\n    }\n  }\n})\n\nexport default theme\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react'\n\nexport const CreditContext = React.createContext({\n  credit: 0,\n  increaseCredit: () => {},\n  decreaseCredit: () => {}\n})\n","import { useState } from 'react'\nimport { CreditContext } from 'components/contexts'\n\nexport default function CreditProvider({ children }) {\n  const [credit, setCredit] = useState(0)\n  return (\n    <CreditContext.Provider value={{\n      credit,\n      increaseCredit: credits => typeof credits === 'number' && credits > 0 && setCredit(prevCredit => prevCredit + credits),\n      decreaseCredit: credits => typeof credits === 'number' && credits > 0 && setCredit(prevCredit => prevCredit - credits)\n    }}>\n      {children}\n    </CreditContext.Provider>\n  )\n}\n","import React from 'react'\n\nexport const BackgroundImageContext = React.createContext({\n  backgroundImage: {},\n  setBackgroundImage: () => {},\n  setRandomBackgroundImage: () => {}\n})\n","export default class ArrayWatcher {\n  timerId = ''\n\n  constructor(array) {\n    this.array = array\n    this.prevArray = [...array]\n  }\n\n  watch = (listener, interval = 500) => {\n    this.timerId = window.setInterval(() => {\n      const isChanged = this.prevArray.length !== this.array.length\n      if (isChanged) {\n        this.prevArray = [...this.array]\n        listener && typeof listener === 'function' && listener(this.array)\n      }\n    }, interval)\n  }\n\n  stop = () => window.clearInterval(this.timerId)\n}\n","const IMAGES = [\n  { name: 'Binz Beach', country: 'Germany', url: '/resources/images/background/binz-beach.jpg' },\n  { name: 'Hallstatt', country: 'Austria', url: '/resources/images/background/hallstatt.jpg' },\n  { name: 'King\\'s Chair Beach', country: 'Germany', url: '/resources/images/background/kings-chair-beach.jpg' },\n  { name: 'Lifeguards Nearby Pier Sellin', country: 'Germany', url: '/resources/images/background/lifeguards-nearby-pier-sellin.jpg' },\n  { name: 'Pier Sellin', country: 'Germany', url: '/resources/images/background/pier-sellin.jpg' },\n  { name: 'Sellin Dog Beach', country: 'Germany', url: '/resources/images/background/sellin-dog-beach.jpg' },\n  { name: 'Sellin East Train Station', country: 'Germany', url: '/resources/images/background/sellin-east-train-station.jpg' }\n]\n\nexport default class BackgroundImage {\n  constructor() {\n    this.imageIndex = this.randomIndex\n  }\n\n  get randomIndex() {\n    return Math.floor(Math.random() * Math.floor(IMAGES.length))\n  }\n\n  get randomImage() {\n    let index\n    do {\n      index = this.randomIndex\n    } while (index === this.imageIndex && IMAGES.length > 1)\n    this.imageIndex = index\n    return IMAGES[index]\n  }\n}\n","import EventEmitter from 'eventemitter3'\n\nconst Emitter = new EventEmitter()\n\nif (process.env.NODE_ENV === 'development') {\n  window.Emitter = Emitter\n}\n\nexport default Emitter\n","import { Emitter } from 'shared/services'\n\nexport default class KeyboardCoinAcceptor {\n  connected = false\n\n  connect = () => new Promise(resolve => {\n    document.addEventListener('keypress', this.handleCoinInsert)\n    this.connected = true\n    resolve()\n  })\n\n  disconnect = () => new Promise(resolve => {\n    document.removeEventListener('keypress', this.handleCoinInsert)\n    this.connected = false\n    resolve()\n  })\n\n  handleCoinInsert = event => {\n    const { ctrlKey, key } = event\n    if (ctrlKey === true && (key === 'i' || key === 'I')) {\n      Emitter.emit('COIN_INSERT')\n    }\n  }\n}\n","import { Emitter } from 'shared/services'\n\nexport default class MouseCoinAcceptor {\n  connected = false\n\n  connect = () => new Promise(resolve => {\n    document.ondblclick = () => Emitter.emit('COIN_INSERT')\n    this.connected = true\n    resolve()\n  })\n\n  disconnect = () => new Promise(resolve => {\n    document.ondblclick = null\n    this.connected = false\n    resolve()\n  })\n}\n","import { KeyboardCoinAcceptor, MouseCoinAcceptor } from 'shared/services/coinacceptors'\n\nexport default class CoinAcceptorFactory {\n  static create(name) {\n    switch(name) {\n      case 'mouse':\n        return new MouseCoinAcceptor()\n      case 'keyboard':\n      default:\n        return new KeyboardCoinAcceptor()\n    }\n  }\n}\n","const TYPES = {\n  steelTip: 'steel-tip',\n  softTip: 'soft-tip'\n}\nconst CONNECTIONS = {\n  builtIn: 'built-in',\n  usb: 'usb',\n  bluetooth: 'bluetooth'\n}\n\nexport default class Dartboard {\n  type = TYPES.softTip\n  connection = CONNECTIONS.builtIn\n\n  isSteelTipType = () => this.type === TYPES.steelTip\n\n  isSoftTipType = () => this.type === TYPES.softTip\n\n  isBuiltInConnection = () => this.connection === CONNECTIONS.builtIn\n\n  isUsbConnection = () => this.connection === CONNECTIONS.usb\n\n  isBluetoothConnection = () => this.connection === CONNECTIONS.bluetooth\n}\n\nDartboard.types = TYPES\nDartboard.connections = CONNECTIONS\n","const map = {\n  0x322e3340:     'S1I', 0x322e3540:    'S1O', 0x322e3640:     'D1', 0x322e3440:    'T1',\n  0x392e3140:     'S2I', 0x392e3240:    'S2O', 0x382e3240:     'D2', 0x392e3040:    'T2',\n  0x372e3140:     'S3I', 0x372e3240:    'S3O', 0x382e3440:     'D3', 0x372e3040:    'T3',\n  0x302e3140:     'S4I', 0x302e3540:    'S4O', 0x302e3640:     'D4', 0x302e3340:    'T4', \n  0x352e3140:     'S5I', 0x352e3440:    'S5O', 0x342e3640:     'D5', 0x352e3240:    'T5',\n  0x312e3040:     'S6I', 0x312e3340:    'S6O', 0x342e3440:     'D6', 0x312e3140:    'T6',\n  0x31312e3140:   'S7I', 0x31312e3440:  'S7O', 0x382e3640:     'D7', 0x31312e3240:  'T7',\n  0x362e3240:     'S8I', 0x362e3540:    'S8O', 0x362e3640:     'D8', 0x362e3440:    'T8',\n  0x392e3340:     'S9I', 0x392e3540:    'S9O', 0x392e3640:     'D9', 0x392e3440:    'T9',\n  0x322e3040:    'S10I', 0x322e3240:   'S10O', 0x342e3340:    'D10', 0x322e3140:   'T10',\n  0x372e3340:    'S11I', 0x372e3540:   'S11O', 0x372e3640:    'D11', 0x372e3440:   'T11',\n  0x352e3040:    'S12I', 0x352e3540:   'S12O', 0x352e3640:    'D12', 0x352e3340:   'T12',\n  0x302e3040:    'S13I', 0x302e3440:   'S13O', 0x342e3540:    'D13', 0x302e3240:   'T13',\n  0x31302e3340:  'S14I', 0x31302e3540: 'S14O', 0x31302e3640:  'D14', 0x31302e3440: 'T14',\n  0x332e3040:    'S15I', 0x332e3240:   'S15O', 0x342e3240:    'D15', 0x332e3140:   'T15',\n  0x31312e3040:  'S16I', 0x31312e3540: 'S16O', 0x31312e3640:  'D16', 0x31312e3340: 'T16',\n  0x31302e3140:  'S17I', 0x31302e3240: 'S17O', 0x382e3340:    'D17', 0x31302e3040: 'T17',\n  0x312e3240:    'S18I', 0x312e3540:   'S18O', 0x312e3640:    'D18', 0x312e3440:   'T18',\n  0x362e3140:    'S19I', 0x362e3340:   'S19O', 0x382e3540:    'D19', 0x362e3040:   'T19',\n  0x332e3340:    'S20I', 0x332e3540:   'S20O', 0x332e3640:    'D20', 0x332e3440:   'T20',\n  0x382e3040:   'SBULL', 0x342e3040:  'DBULL', 0x42544e40: 'CHANGE'\n}\n\nexport default map\n","import BluetoothDartboard from 'shared/services/dartboards/BluetoothDartboard'\nimport map from './map'\n\nexport default class GranboardDartboard extends BluetoothDartboard {\n  constructor() {\n    super('GRANBOARD', '442f1570-8a00-9a28-cbe1-e1d4212d53eb', '442f1571-8a00-9a28-cbe1-e1d4212d53eb')\n    this.map = map\n  }\n}\n","import { Emitter } from 'shared/services'\nimport Dartboard from '../Dartboard'\n\nexport default class BluetoothDartboard extends Dartboard {\n  connection = Dartboard.connections.bluetooth\n\n  valid = true\n\n  map = null\n\n  device = null\n\n  characteristic = null\n\n  constructor(deviceName, serviceUuid, characteristicUuid, options = {}) {\n    super()\n    if (!navigator.bluetooth) {\n      console.warn('Web Bluetooth is not supported.')\n      return { valid: false }\n    }\n    this.deviceName = deviceName\n    this.serviceUuid = serviceUuid\n    this.characteristicUuid = characteristicUuid\n    this.options = { autoReconnect: true, ...options }\n    this.map = {}\n  }\n\n  get connected() {\n    return this.device && this.device.gatt.connected\n  }\n\n  connect = () => {\n    const { deviceName, serviceUuid, options } = this\n    if (this.connected) {\n      return Promise.resolve()\n    }\n    return navigator.bluetooth.requestDevice({ filters: [{ name: deviceName }, { services: [serviceUuid] }]})\n      .then(device => {\n        this.device = device\n        options.autoReconnect && device.addEventListener('gattserverdisconnected', this.connectGattServer)\n        return this.connectGattServer()\n      })\n  }\n\n  disconnect = () => {\n    const { characteristic, device, options } = this\n    if (!characteristic) {\n      return Promise.resolve()\n    }\n    return characteristic.stopNotifications()\n      .then(() => characteristic.removeEventListener('characteristicvaluechanged', this.handleDartboardHit))\n      .then(() => {\n        if (this.connected) {\n          options.autoReconnect && device.removeEventListener('gattserverdisconnected', this.connectGattServer)\n          return device.gatt.disconnect()\n        } else {\n          return Promise.resolve()\n        }\n      })\n  }\n\n  connectGattServer = () => {\n    const { device, serviceUuid, characteristicUuid } = this\n    return device.gatt.connect()\n      .then(server => server.getPrimaryService(serviceUuid))\n      .then(service => service.getCharacteristic(characteristicUuid))\n      .then(characteristic => {\n        this.characteristic = characteristic\n        return characteristic.startNotifications()\n      })\n      .then(() => {\n        this.characteristic.addEventListener('characteristicvaluechanged', this.handleDartboardHit)\n        return Promise.resolve()\n      })\n  }\n\n  handleDartboardHit = e => {\n    const { value } = e.target\n    let data = []\n    for (let i = 0; i < value.byteLength; i++) {\n      data.push(('00' + value.getUint8(i).toString(16)).slice(-2))\n    }\n    const symbol = this.map[parseInt(`0x${data.join('')}`)]\n    if (symbol) {\n      if (symbol !== 'CHANGE') {\n        Emitter.emit('DARTBOARD_HIT', symbol)\n      } else {\n        Emitter.emit('CHANGE_BUTTON_CLICK')\n      }\n    }\n  }\n}\n","const map = {\n   32:    'S1I',  33:   'S1O',  34:  'D1',  35:  'T1',  36:  'S2I',  37:  'S2O',  38:  'D2',  39:  'T2',\n   40:    'S3I',  41:   'S3O',  42:  'D3',  43:  'T3',  44:  'S4I',  45:  'S4O',  46:  'D4',  47:  'T4', \n   48:    'S5I',  49:   'S5O',  50:  'D5',  51:  'T5',  52:  'S6I',  53:  'S6O',  54:  'D6',  55:  'T6',\n   56:    'S7I',  57:   'S7O',  58:  'D7',  59:  'T7',  60:  'S8I',  61:  'S8O',  62:  'D8',  63:  'T8',\n   64:    'S9I',  65:   'S9O',  66:  'D9',  67:  'T9',  68: 'S10I',  69: 'S10O',  70: 'D10',  71: 'T10',\n   72:   'S11I',  73:  'S11O',  74: 'D11',  75: 'T11',  76: 'S12I',  77: 'S12O',  78: 'D12',  79: 'T12',\n   80:   'S13I',  81:  'S13O',  82: 'D13',  83: 'T13',  84: 'S14I',  85: 'S14O',  86: 'D14',  87: 'T14',\n   88:   'S15I',  89:  'S15O',  90: 'D15',  91: 'T15',  92: 'S16I',  93: 'S16O',  94: 'D16',  95: 'T16',\n   96:   'S17I',  97:  'S17O',  98: 'D17',  99: 'T17', 100: 'S18I', 101: 'S18O', 102: 'D18', 103: 'T18',\n   104:  'S19I', 105:  'S19O', 106: 'D19', 107: 'T19', 108: 'S20I', 109: 'S20O', 110: 'D20', 111: 'T20',\n   112: 'SBULL', 113: 'DBULL', 114: 'OUT', 115: 'CHANGE'\n}\n\nexport default map\n","import Emitter from 'shared/services/Emitter'\nimport Dartboard from '../Dartboard'\nimport map from './map'\n\nexport default class KeyboardDartboard extends Dartboard {\n  connection = Dartboard.connections.builtIn\n\n  connected = false\n\n  map = null\n\n  constructor() {\n    super()\n    this.map = map\n  }\n\n  connect = () => {\n    document.addEventListener('keypress', this.handleDartboardHit)\n    this.connected = true\n    return Promise.resolve()\n  }\n\n  disconnect = () => {\n    document.removeEventListener('keypress', this.handleDartboardHit)\n    this.connected = false\n    return Promise.resolve()\n  }\n\n  handleDartboardHit = event => {\n    const { map } = this\n    const keyCode = event.key.charCodeAt(0)\n    if (event.ctrlKey === false && keyCode >= 32 && keyCode <= 114) {\n      Emitter.emit('DARTBOARD_HIT', map[keyCode])\n    } else if (map[keyCode] === 'CHANGE') {\n      Emitter.emit('CHANGE_BUTTON_CLICK')\n    }\n  }\n}\n","import { GranboardDartboard, KeyboardDartboard } from 'shared/services/dartboards'\n\nexport default class DartboardFactory {\n  static create(name) {\n    switch (name) {\n      case 'granboard':\n        return new GranboardDartboard()\n      case 'keyboard':\n      default:\n        return new KeyboardDartboard()\n    }\n  }\n}\n","import i18n from 'i18n'\nimport config from 'config'\n\nconst { isMarketMode } = config\n\nconst t = i18n.getFixedT()\nconst MESSAGES = {\n  back: { id: 'back', type: 'sound', block: false, soundEffect: 'back' },\n  bust: { id: 'bust', type: 'dialog', text: t('😱 Bust 💔'), block: true, soundEffect: 'bust' },\n  dart: { id: 'dart', type: 'sound', block: false, soundEffect: 'dart' },\n  dbull: bull => ({ id: 'dbull', type: 'snackbar', text: t('bullseyeAward', { bull }), autoHideDuration: 1500, block: false, soundEffect: 'dbull' }),\n  fail: { id: 'fail', type: 'dialog', text: t('😱 You failed 💔'), block: true, soundEffect: 'fail' },\n  gameOn: { id: 'gameOn', type: null, block: false},\n  hatTrick: { id: 'hatTrick', type: 'animationDialog', autoHideDuration: 1500, block: false},\n  highTon: { id: 'highTon', type: 'animationDialog', autoHideDuration: 1500, block: false },\n  lowTon: { id: 'lowTon', type: 'animationDialog', autoHideDuration: 1500, block: false },\n  next: { id: 'next', type: 'sound', block: false, soundEffect: 'next' },\n  nextPlayer: { id: 'nextPlayer', type: 'dialog', text: t('Press 🔴 to change player'), block: true },\n  nextRound: { id: 'nextRound', type: 'dialog', text: t('Press 🔴 to next round'), block: true },\n  oneBull: { id: 'oneBull', type: 'animationDialog', autoHideDuration: 1500, block: false },\n  prizeForThreeDartsOnePrizeGame: names => ({ id: 'prizeForThreeDartsOnePrizeGame', type: 'dialog', text: t('winnersAwardForThreeDartsOnePrizeGame', { names }), block: true, soundEffect: 'win' }),\n  sbull: bull => ({ id: 'sbull', type: 'snackbar', text: t('bullseyeAward', { bull }), autoHideDuration: 1500, block: false, soundEffect: 'sbull' }),\n  score: score => ({ id: 'score', type: 'speech', text: t('score', { score }), block: false }),\n  win: name => ({ id: 'win', type: 'dialog', text: !isMarketMode() ? t('winnersAward', { name }) : t('Game over'), block: true, soundEffect: 'win' })\n}\n\nexport default class MessageFactory {\n  static create(id, param) {\n    let message = null\n    if (MESSAGES[id]) {\n      message = typeof MESSAGES[id] === 'function' ? MESSAGES[id](param) : MESSAGES[id]\n    }\n    return message\n  }\n}\n","export default class Score {\n  valid = true\n\n  constructor(symbol = 'OUT', index = 0, options = { type: 'SOFT_TIP' }) {\n    if (!Score.isValid(symbol)) {\n      return { valid: false }\n    }\n\n    this.symbol = symbol\n    this.index = index\n    this.options = options\n\n    this.displaySymbol = this.toDisplaySymbol()\n    this.value = this.toValue()\n  }\n\n  static isValid(symbol) {\n    let isValid = false\n    if (/^S\\d{1,2}I$/.test(symbol) || /^S\\d{1,2}O$/.test(symbol)) {\n      let digit = parseInt(symbol.slice(1, symbol.length - 1), 10)\n      isValid = (digit >= 1 && digit <= 20)\n    } else if (/^[DT]\\d{1,2}$/.test(symbol)) {\n      let digit = parseInt(symbol.slice(1, symbol.length), 10)\n      isValid = (digit >= 1 && digit <= 20)\n    } else if (/^[SD]BULL$/.test(symbol) || symbol === 'OUT' || symbol === 'BUST') {\n      isValid = true\n    }\n    return isValid\n  }\n\n  static isInnerSingle(symbol) {\n    return Score.isValid(symbol) && symbol.startsWith('S') && symbol.endsWith('I')\n  }\n\n  // TODO: handle the case where dartboard === 'STEEL_TIP' or mode === 'CRICKET'\n  toValue = () => {\n    const { symbol } = this\n    const calculableSymbol = this.toDisplaySymbol()\n    const scoreSymbol = calculableSymbol.slice(1, symbol.length)\n    let score\n    switch (calculableSymbol.charAt(0)) {\n      case 'S':\n        score = scoreSymbol === 'BULL' ? 50 : parseInt(scoreSymbol, 10)\n        break\n      case 'D':\n        score = scoreSymbol === 'BULL' ? 50 : parseInt(scoreSymbol, 10) * 2\n        break\n      case 'T':\n        score = parseInt(scoreSymbol, 10) * 3\n        break\n      case 'O': // for OUT\n      case 'B': // for BUST\n      default:\n        score = 0\n    }\n    return score\n  }\n\n  toDisplaySymbol = () => {\n    const { symbol } = this\n    return (symbol.slice(-1) === 'I' || symbol.slice(-1) === 'O') ?\n      symbol.slice(0, symbol.length - 1) : symbol\n  }\n}\n\n/*\nDartboard Symbols\n\nBullseye\n- SBULL\n- DBULL\n\nSingle Inner Ring\n- S1I\n- S2I\n- S3I\n- S4I\n- S5I\n- S6I\n- S7I\n- S8I\n- S9I\n- S10I\n- S11I\n- S12I\n- S13I\n- S14I\n- S15I\n- S16I\n- S17I\n- S18I\n- S19I\n- S20I\n\nSingle Outer Ring\n- S1O\n- S2O\n- S3O\n- S4O\n- S5O\n- S6O\n- S7O\n- S8O\n- S9O\n- S10O\n- S11O\n- S12O\n- S13O\n- S14O\n- S15O\n- S16O\n- S17O\n- S18O\n- S19O\n- S20O\n\nDouble Ring\n- D1\n- D2\n- D3\n- D4\n- D5\n- D6\n- D7\n- D8\n- D9\n- D10\n- D11\n- D12\n- D13\n- D14\n- D15\n- D16\n- D17\n- D18\n- D19\n- D20\n\nTriple Ring\n- T1\n- T2\n- T3\n- T4\n- T5\n- T6\n- T7\n- T8\n- T9\n- T10\n- T11\n- T12\n- T13\n- T14\n- T15\n- T16\n- T17\n- T18\n- T19\n- T20\n\nOthers\n- OUT\n- BUST\n*/\n","import Score from '../Score'\n\nexport default class Round {\n  scores = []\n\n  constructor(index, options = {}) {\n    this.index = index\n    this.options = options\n    if (!this.options.scoresPerRound) {\n      // ASSUMPTION: always 3 scores per round\n      // In any real world dart games, always 3 darts for 3 scores per round.\n      // But we can do different configuration for other needs in the future.\n      this.options.scoresPerRound = 3\n    }\n  }\n\n  addScore = score => {\n    try {\n      if (this.isNewScoreAddable()) {\n        let scoreObject\n        if (score instanceof Score) {\n          scoreObject = score\n          scoreObject.index = this.scores.length\n        } else {\n          scoreObject = new Score(score, this.scores.length, this.options)\n        }\n        if (scoreObject.valid) {\n          this.scores.push(scoreObject)\n        } else {\n          throw new Error('The `score` is invalid!')\n        }\n        return scoreObject\n      } else {\n        throw new Error('The `scores` array cannot contain more than 3 Score objects!')\n      }\n    } catch(e) {\n      console.error(e)\n      return null\n    }\n  }\n\n  getCurrentScore = () => {\n    return this.scores[this.scores.length - 1]\n  }\n\n  isNewScoreAddable = () => {\n    return this.scores.length < this.options.scoresPerRound && !this.scores.some(s => s.symbol === 'BUST')\n  }\n}\n","import Round from './Round'\nimport Score from './Score'\n\nexport default class Scoreboard {\n  rounds = []\n\n  constructor(roundsLength, options = {}) {\n    this.roundsLength = roundsLength\n    this.options = options\n  }\n\n  addScore = score => {\n    let round = this.getCurrentRound()\n    if (!(round && round.isNewScoreAddable())) {\n      round = this.addRound()\n    }\n    return round ? round.addScore(score) : null\n  }\n\n  addRound = (round = new Round(this.rounds.length, this.options)) => {\n    try {\n      if (this.rounds.length < this.roundsLength) {\n        this.rounds.push(round)\n      } else {\n        throw new Error(`The \\`rounds\\` array cannot contain more than ${this.roundsLength} Round objects!`)\n      }\n      return round\n    } catch(e) {\n      console.error(e)\n      return null\n    }\n  }\n\n  getCurrentRound = () => {\n    return this.rounds[this.rounds.length - 1]\n  }\n\n  removeCurrentRound = () => {\n    return this.rounds.pop()\n  }\n\n  isLastRoundFinished = () => {\n    const round = this.getCurrentRound()\n    return (this.rounds.length === this.roundsLength) && (round && !round.isNewScoreAddable())\n  }\n}\n\nexport {\n  Scoreboard,\n  Round,\n  Score\n}\n","import { MessageFactory } from 'shared/factories'\nimport { Round, Score } from 'shared/services/Scoreboard'\n\nexport default class GameAwardUtils {\n  static isBullseye(score) {\n    return (score.symbol === 'SBULL' || score.symbol === 'DBULL')\n  }\n\n  static getMessage(darts) {\n    let message = null\n    if (darts instanceof Score) {\n      if (GameAwardUtils.isBullseye(darts)) {\n        const symbol = darts.symbol.toLowerCase()\n        message = MessageFactory.create(symbol, symbol)\n      } else {\n        message = MessageFactory.create('dart')\n      }\n    } else if (darts instanceof Round) {\n      // TODO: Add the LowTon, HatTrick, and HighTon components to support the below awards.\n      const { scores } = darts\n      const sum = sumScores(scores)\n      const bullCounter = countBullScores(scores)\n      if (sum < 100 && bullCounter === 1) {\n        message = MessageFactory.create('oneBull')\n      } else if (sum >= 100 && sum < 150) {\n        // message = MessageFactory.create('lowTon')\n      } else if (bullCounter === 3) {\n        // message = MessageFactory.create('hatTrick')\n      } else if (sum >= 151) {\n        // message = MessageFactory.create('highTon')\n      } else {\n        message = MessageFactory.create('score', sum)\n      }\n    }\n    return message\n  }\n}\n\nconst countBullScores = scores => {\n  let counter = 0\n  scores.forEach(score => (score.symbol === 'SBULL' || score.symbol === 'DBULL') && counter++)\n  return counter\n}\n\nconst sumScores = scores => {\n  let sum = 0\n  scores.forEach(score => sum += score.toValue())\n  return sum\n}\n","import { action, computed, makeObservable, observable } from 'mobx'\nimport { Scoreboard } from 'shared/services'\n\nexport default class GameStateStore {\n  currentPlayerIndex = -1\n  currentPlayerDartScores = []\n  gameScores = []\n  messages = []\n  players = []\n  rounds = 0\n  scoreboards = []\n\n  constructor(players, rounds, initGameScore = 0, options = { scoresPerRound: 3 }) {\n    options.scoresPerRound = options.scoresPerRound ? options.scoresPerRound : 3\n    makeObservable(this, {\n      currentPlayerIndex: observable,\n      currentPlayerDartScores: observable,\n      gameScores: observable,\n      messages: observable,\n      players: observable,\n      scoreboards: observable,\n      currentPlayer: computed,\n      currentPlayerGameScore: computed,\n      currentPlayerScoreboard: computed,\n      addScoreForCurrentPlayer: action,\n      addRoundForCurrentPlayer: action,\n      deleteCurrentRoundForCurrentPlayer: action,\n      addMessage: action,\n      deleteMessage: action,\n      clearMessages: action,\n      setCurrentPlayerIndex: action,\n      setCurrentPlayerGameScore: action,\n      setPlayerGameScore: action,\n      increaseCurrentPlayerGameScore: action,\n      decreaseCurrentPlayerGameScore: action\n    })\n    this.players = players\n    players.forEach((player, i) => {\n      this.scoreboards[i] = new Scoreboard(rounds, { scoresPerRound: options.scoresPerRound })\n      this.scoreboards[i].addRound()\n      this.gameScores[i] = initGameScore\n    })\n    this.rounds = rounds\n    this.currentPlayerIndex = 0\n    this.options = options\n  }\n\n  get currentPlayer() {\n    return this.players[this.currentPlayerIndex]\n  }\n\n  get currentPlayerGameScore() {\n    return this.gameScores[this.currentPlayerIndex]\n  }\n\n  get currentPlayerScoreboard() {\n    return this.scoreboards[this.currentPlayerIndex]\n  }\n\n  get lastPlayer() {\n    return this.players[this.players.length - 1]\n  }\n\n  get lastPlayerScoreboard() {\n    return this.scoreboards[this.players.length - 1]  \n  }\n\n  isLastRound = () => this.currentPlayer === this.lastPlayer &&\n    this.lastPlayerScoreboard.rounds.length === this.rounds\n\n  isLastRoundFinished = () => this.scoreboards[this.players.length - 1].isLastRoundFinished()\n\n  isLastRoundForCurrentPlayer = () => this.currentPlayerScoreboard.rounds.length === this.rounds\n\n  addScoreForCurrentPlayer = score => {\n    const scoreObject = this.scoreboards[this.currentPlayerIndex].addScore(score)\n    if (!scoreObject) {\n      return null\n    }\n    if (this.currentPlayerDartScores.length < this.options.scoresPerRound) {\n      this.currentPlayerDartScores = this.currentPlayerDartScores.concat(scoreObject)\n    } else {\n      this.currentPlayerDartScores = [scoreObject]\n    }\n    return scoreObject\n  }\n\n  addRoundForCurrentPlayer = round => {\n    let newRound = null\n    if (!this.isLastRoundForCurrentPlayer()) {\n      newRound = this.scoreboards[this.currentPlayerIndex].addRound(round)\n      if (newRound) {\n        this.currentPlayerDartScores = newRound.scores\n      }\n    } else {\n      this.currentPlayerDartScores = []\n    }\n    return newRound\n  }\n\n  deleteCurrentRoundForCurrentPlayer = () => {\n    const deletedRound = this.scoreboards[this.currentPlayerIndex].removeCurrentRound()\n    const round = this.scoreboards[this.currentPlayerIndex].getCurrentRound()\n    if (round) {\n      this.currentPlayerDartScores = round.scores\n    } else {\n      this.currentPlayerDartScores = []\n    }\n    return deletedRound\n  }\n\n  addMessage = message => message && (this.messages = this.messages.concat(message))\n\n  deleteMessage = id => {\n    const index = this.messages.findIndex(m => m.id = id)\n    index !== -1 && this.messages.splice(index, 1)\n  }\n\n  clearMessages = () => this.messages = []\n\n  setCurrentPlayerIndex = index => this.currentPlayerIndex = index\n\n  setCurrentPlayerGameScore = score => this.gameScores[this.currentPlayerIndex] = score\n\n  setPlayerGameScore = (index, score) => this.gameScores[index] = score\n\n  increaseCurrentPlayerGameScore = score => this.setCurrentPlayerGameScore(this.currentPlayerGameScore + score)\n\n  decreaseCurrentPlayerGameScore = score => this.setCurrentPlayerGameScore(this.currentPlayerGameScore - score)\n}\n","import config from 'config'\n\nexport default class UserStore {\n  static has(email) {\n    return config.users.includes(email)\n  }\n}\n","import { UserStore } from 'shared/stores'\nimport { OfflineAuth } from 'shared/services'\n\nconst LOGIN_SUCCESS_MESSAGE = { isLogined: true }\nconst LOGIN_FAILURE_MESSAGE = { isLogined: false }\n\nexport default class GoogleOAuth {\n  constructor(\n    storageItemName,\n    clientId = process.env.REACT_APP_GOOLGE_CLIENT_ID,\n    redirectUri = process.env.REACT_APP_HOST\n  ) {\n    this.storageItemName = storageItemName\n    this.clientId = clientId\n    this.redirectUri = redirectUri\n  }\n\n  auth = () => {\n    return this.isLogined().then(result => {\n      if (!result.isLogined) {\n        let params = {}\n        const searchParams = new URLSearchParams(window.location.hash.substring(1))\n        for (const [key, value] of searchParams) {\n          params[key] = value\n        }\n        if (Object.keys(params).length > 0) {\n          localStorage.setItem(this.storageItemName, JSON.stringify(params))\n          if (params['state'] && params['state'] === 'try_sample_request') {\n            return this.isLogined()\n          }\n        } else {\n          this.openSignInForm()\n        }\n      }\n      return Promise.resolve(result)\n    })\n  }\n\n  isLogined = () =>\n    new Promise(resolve => {\n      if (navigator.connection.type === 'none') {\n        const auth = new OfflineAuth('offline-token')\n        auth.auth() ? resolve(LOGIN_SUCCESS_MESSAGE) : resolve(LOGIN_FAILURE_MESSAGE)\n      }\n      const params = JSON.parse(localStorage.getItem(this.storageItemName))\n      if (params && params['access_token']) {\n        const xhr = new XMLHttpRequest()\n        xhr.open('GET', `https://people.googleapis.com/v1/people/me?personFields=emailAddresses&access_token=${params['access_token']}`)\n        xhr.onreadystatechange = () => {\n          try {\n            if (xhr.readyState === 4) {\n              if (xhr.status === 200) {\n                const email = JSON.parse(xhr.response).emailAddresses[0].value\n                if (UserStore.has(email)) {\n                  resolve(LOGIN_SUCCESS_MESSAGE)\n                } else {\n                  resolve(LOGIN_FAILURE_MESSAGE)\n                }\n              } else {\n                resolve(LOGIN_FAILURE_MESSAGE)\n              }\n            }\n          } catch (e) {\n            console.error(e)\n            resolve(LOGIN_FAILURE_MESSAGE)\n          }\n        }\n        xhr.send(null)\n      } else {\n        resolve(LOGIN_FAILURE_MESSAGE)\n      }\n    })\n\n  openSignInForm = () => {\n    const form = document.createElement('form')\n    form.setAttribute('method', 'GET')\n    form.setAttribute('action', 'https://accounts.google.com/o/oauth2/v2/auth')\n    const params = {\n      'client_id': this.clientId,\n      'redirect_uri': this.redirectUri,\n      'scope': 'profile https://www.googleapis.com/auth/user.emails.read',\n      'state': 'try_sample_request',\n      'response_type': 'token'\n    }\n    for (let param in params) {\n      const input = document.createElement('input')\n      input.setAttribute('type', 'hidden')\n      input.setAttribute('name', param)\n      input.setAttribute('value', params[param])\n      form.appendChild(input)\n    }\n    document.body.appendChild(form)\n    form.submit()\n  }\n}\n","import { KEYUTIL, KJUR } from 'jsrsasign'\n\nexport default class OfflineAuth {\n  constructor(storageItemName) {\n    this.storageItemName = storageItemName\n  }\n\n  auth = () => {\n    let isValid = false\n    try {\n      const token = localStorage.getItem(this.storageItemName)\n      if (token) {\n        const key = KEYUTIL.getKey(process.env.REACT_APP_RS256_PUBLIC_KEY)\n        isValid = KJUR.jws.JWS.verifyJWT(token, key, { alg: ['RS256'] })\n      }\n      return isValid\n    } catch(e) {\n      return isValid\n    }\n  }\n}\n","import i18n from 'i18n'\n\nconst t = i18n.getFixedT()\n\nexport default class PlayerManager {\n  constructor(players) {\n    this._players = players\n  }\n\n  get players() {\n    return this._players.map((player, i) => ({ name: t(player.name), index: i }))\n  }\n}\n","import { Howl } from 'howler'\nimport config from 'config'\n\nconst SOUND_EFFECTS = {\n  default: [\n    'back', 'bust', 'coin', 'dart', 'dbull', 'fail', 'game_on',\n    'hover', 'next', 'press', 'sbull', 'warn', 'win'\n  ],\n  ninja: ['bgm', 'dart', 'sbull', 'dbull'],\n  '3-darts-1-prize': ['bgm']\n}\n\nexport class SoundEffectService {\n  theme = 'default'\n\n  soundEffects = {}\n\n  constructor() {\n    this.setTheme(this.theme)\n    config.soundTheme && config.soundTheme !== 'default' && this.setTheme(config.soundTheme)\n  }\n\n  play = soundEffect =>\n    new Promise(resolve => {\n      !this.soundEffects[soundEffect] && resolve()\n      this.soundEffects[soundEffect].on('end', resolve)\n      this.soundEffects[soundEffect].play()\n    })\n\n  stop = soundEffect => this.soundEffects[soundEffect] && this.soundEffects[soundEffect].stop()\n\n  setTheme = theme => {\n    if (SOUND_EFFECTS[theme]) {\n      this.theme = theme\n    }\n    this.loadSoundEffects()\n  }\n\n  loadSoundEffects = () => {\n    SOUND_EFFECTS[this.theme].forEach(soundEffect => {\n      this.soundEffects[soundEffect] = new Howl({\n        src: [`/resources/sound-effects/${this.theme}/${soundEffect}.webm`],\n        volume: soundEffect === 'bgm' ? 0.2 : 1.0,\n        loop: soundEffect === 'bgm' ? true : false\n      })\n      this.soundEffects[soundEffect].on('loaderror', () => {\n        this.soundEffects[soundEffect] = new Howl({\n          src: [`/resources/sound-effects/default/${soundEffect}.webm`],\n          volume: soundEffect === 'bgm' ? 0.2 : 1.0,\n          loop: soundEffect === 'bgm' ? true : false\n        })\n      })\n    })\n  }\n}\n\nconst soundEffectService = new SoundEffectService()\n\nexport default soundEffectService\n","const { speechSynthesis: speech } = window\n\nexport default class Speech {\n  constructor(lang) {\n    this.lang = lang\n    this.voices = speech.getVoices()\n  }\n\n  get voice() {\n    const { lang, voices } = this\n    const name = lang.includes('zh') ? 'Google 國語（臺灣）' : 'Daniel'\n    const index = voices.findIndex(voice => voice.name === name)\n    return index ? voices[index] : voices[0]\n  }\n\n  speak = text => {\n    // WORKAROUND: Not sure why React render the score speech game message twice in a short period of time.\n    // Add `!speech.speaking` here to avoid speaking the same text for one speech game message.\n    if (speech && !speech.speaking) {\n      const utterance = new SpeechSynthesisUtterance(text)\n      utterance.voice = this.voice\n      speech.speak(utterance)\n    }\n  }\n}\n","import { useState } from 'react'\nimport { BackgroundImageContext } from 'components/contexts'\nimport { BackgroundImage } from 'shared/services'\n\nconst image = new BackgroundImage()\n\nexport default function BackgroundImageProvider({ children }) {\n  const [backgroundImage, setBackgroundImage] = useState(image.randomImage)\n  return (\n    <BackgroundImageContext.Provider value={{\n      backgroundImage,\n      setBackgroundImage,\n      setRandomBackgroundImage: () => setBackgroundImage(image.randomImage)\n    }}>\n      {children}\n    </BackgroundImageContext.Provider>\n  )\n}\n","import React from 'react'\n\nexport const OAuthContext = React.createContext({ isLogined: false })\n","import { useEffect, useState } from 'react'\nimport { GoogleOAuth } from 'shared/services'\nimport { OAuthContext } from 'components/contexts'\n\nexport default function OAuthProvider({ children }) {\n  const [result, setResult] = useState({ isLogined: false })\n  useEffect(() => {\n    const oauth = new GoogleOAuth('oauth2-tjdart-params')\n    oauth.auth().then(result => setResult(result))\n  }, [setResult])\n  return (\n    <OAuthContext.Provider value={result}>\n      {children}\n    </OAuthContext.Provider>\n  )\n}\n","const styles = theme => ({\n  root: props => ({\n    height: '100vh',\n    overflowX: 'hidden',\n    [theme.breakpoints.between('sm', 'xl')]: {\n      overflowY: 'hidden'\n    },\n    backgroundImage: `url(${props.backgroundImageUrl})`,\n    backgroundPosition: 'center',\n    backgroundRepeat: 'no-repeat',\n    backgroundSize: 'cover'\n  }),\n  credit: {\n    position: 'fixed',\n    bottom: '24px',\n    right: '24px'\n  }\n})\n\nexport default styles\n","import React, { useContext, useEffect } from 'react'\nimport { BrowserRouter as Router, Redirect, Route, Switch } from 'react-router-dom'\nimport { createBrowserHistory } from 'history'\nimport { makeStyles } from '@material-ui/core/styles'\nimport { useTranslation } from 'react-i18next'\nimport config from 'config'\nimport { CoinAcceptorFactory, DartboardFactory } from 'shared/factories'\nimport { Emitter, PlayerManager } from 'shared/services'\nimport { Credit, GameMenuView, GameView, OptionsView, Typography } from 'components'\nimport { BackgroundImageContext, OAuthContext } from 'components/contexts'\nimport styles from './styles'\n\nconst state = {\n  game: {},\n  players: []\n}\nconst history = createBrowserHistory()\nconst useStyles = makeStyles(styles)\n\nexport default function App() {\n  const { t } = useTranslation()\n  const { isArcadeMode, isHomeMode, isMarketMode } = config\n  const oauth = useContext(OAuthContext)\n  const { backgroundImage } = useContext(BackgroundImageContext)\n  const classes = useStyles({ backgroundImageUrl: backgroundImage.url })\n\n  useEffect(() => {\n    const dartboard = DartboardFactory.create(config.dartboard)\n    const coinAcceptor = CoinAcceptorFactory.create(config.coinAcceptor)\n    const handleThreeDartsOnePrizeGame = (gameName, winners) => {\n      // Avoid pro-players win too many credits in the 3 darts 1 prize game.\n      // Hide the game untill the pro-players play another game.\n      const game = config.defaultGames.find(g => g.id === 'threeDartsOnePrize')\n      if (game) {\n        game.platforms = (gameName === '3-darts-1-prize' && winners.length) ? [] : ['arcade']\n      }\n    }\n\n    if (dartboard.isBluetoothConnection()) {\n      history.push('/options')\n    } else {\n      dartboard.connect()\n    }\n\n    if (isArcadeMode()) {\n      coinAcceptor.connect()\n      Emitter.on('GAME_OVER', handleThreeDartsOnePrizeGame)\n    }\n\n    if (isMarketMode()) {\n      const { players } = new PlayerManager(config.players)\n      state.game = config.defaultSelectedGame\n      state.players = [players[0]]\n    }\n\n    return () => {\n      dartboard.disconnect()\n      if (isArcadeMode()) {\n        coinAcceptor.disconnect()\n        Emitter.off('GAME_OVER', handleThreeDartsOnePrizeGame)\n      }\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [])\n\n  return (\n    <div className={classes.root}>\n      {\n        oauth.isLogined &&\n          (isArcadeMode() || isHomeMode() ?\n            <Router>\n              <Switch>\n                <Route path='/game-menu/:step' render={() =>\n                  <GameMenuView appState={state} />\n                }/>\n                <Route path='/game' render={() =>\n                  <GameView game={state.game} players={state.players} />\n                }/>\n                <Route path='/options' render={() =>\n                  <OptionsView />\n                }/>\n                <Route render={() => <Redirect to='/game-menu/games' />} />\n              </Switch>\n              {\n                isArcadeMode() && <Credit appState={state} />\n              }\n            </Router> :\n            (isMarketMode() ?\n              <Router>\n                <Switch>\n                  <Route path='/game' render={() =>\n                    <GameView game={state.game} players={state.players} />\n                  }/>\n                  <Route path='/options' render={() =>\n                    <OptionsView />\n                  }/>\n                  <Route render={() => <Redirect to='/game' />} />\n                </Switch>\n              </Router> :\n              <Typography variant='h2'>{t('No such platform mode!')}</Typography>\n            )\n          )\n      }\n    </div>\n  )\n}\n\nexport const appState = process.env.NODE_ENV === 'test' ? state : undefined\n","const styles = theme => ({\n  score: {\n    color: props => `${theme.players[props.index]}e0`,\n    fontSize: '27rem',\n    textShadow: '-10px 0 white, 0 10px white, 10px 0 white, 0 -10px white'\n  }\n})\n\nexport default styles\n","import { Typography } from '@material-ui/core'\nimport { makeStyles } from '@material-ui/core/styles'\nimport styles from './styles'\n\nconst useStyles = makeStyles(styles)\n\nexport default function GameScore({ score, index }) {\n  const classes = useStyles({ index })\n  return (\n    <Typography className={classes.score} variant='h1' align='center'>{score}</Typography>\n  )\n}\n","const styles = theme => ({\n  gameName: {\n    margin: '24px',\n    textTransform: 'uppercase',\n    textShadow: '-3px 0 white, 0 3px white, 3px 0 white, 0 -3px white'\n  },\n  gameScore: {\n    display: 'flex',\n    justifyContent: 'center',\n    alignItems: 'center',\n    position: 'fixed',\n    zIndex: theme.gameScore.zIndex,\n    top: 0,\n    left: 0,\n    width: '100%',\n    height: '100%'\n  },\n  scoreboard: {\n    float: 'left',\n    marginLeft: '24px'\n  },\n  scores: {\n    float: 'right',\n    width: '300px'\n  },\n  playerCards: {\n    position: 'fixed',\n    bottom: 0,\n    left: 0\n  }\n})\n\nexport default styles\n","import React from 'react'\nimport { useTranslation } from 'react-i18next'\nimport { Grid } from '@material-ui/core'\nimport { makeStyles } from '@material-ui/core/styles'\nimport { PlayerCard, Scoreboard, Scores, Typography } from 'components'\nimport GameScore from './GameScore'\nimport styles from './styles'\n\nconst useStyles = makeStyles(styles)\n\nexport default function ClassicDartGameView({ name, player, players, dartScores, scoreboard, gameScore, gameScores, isPlayerListHidden = false }) {\n  const { t } = useTranslation()\n  const classes = useStyles()\n  return (\n    <div>\n      <div className={classes.gameScore}>\n        <GameScore index={player.index} name={player.name} score={gameScore} />\n      </div>\n      <Typography className={classes.gameName} variant='h3' align='center'>{t(name)}</Typography>\n      {\n        scoreboard.roundsLength > 1 &&\n        <Scoreboard className={classes.scoreboard} index={player.index} rounds={scoreboard.rounds} totalRounds={scoreboard.roundsLength} />\n      }\n      <Scores className={classes.scores} scores={dartScores} />\n      {\n        !isPlayerListHidden &&\n        <Grid container className={classes.playerCards} spacing={3}>\n          {\n            players.map((p, i) =>\n              <Grid key={i} item xs={3}>\n                <PlayerCard index={i} name={p.name} score={gameScores[i]} active={i === player.index} />\n              </Grid>\n            )\n          }\n        </Grid>\n      }\n    </div>\n  )\n}\n","const styles = theme => ({\n  root: props => ({\n    position: 'fixed',\n    bottom: '24px',\n    right: '24px',\n    visibility: props.hidden ? 'hidden' : 'visible'\n  })\n})\n\nexport default styles\n","import { useContext, useEffect } from 'react'\nimport { useTranslation } from 'react-i18next'\nimport { withRouter } from \"react-router\"\nimport { makeStyles } from '@material-ui/core/styles'\nimport { Emitter, SoundEffectPlayer } from 'shared/services'\nimport { Typography } from 'components'\nimport { CreditContext } from 'components/contexts'\nimport styles from './styles'\n\nconst useStyles = makeStyles(styles)\n\nexport function _Credit(props) {\n  const { appState, location } = props\n  const { credit, increaseCredit, decreaseCredit } = useContext(CreditContext)\n  const { t } = useTranslation()\n  const classes = useStyles({ hidden: location.pathname === '/game' })\n  const handleCoinInsert = () => {\n    increaseCredit(1)\n    SoundEffectPlayer.play('coin')\n  }\n  const handleGameOver = (gameName, winners) => {\n    const { totalCredits, credit } = appState.game\n    const usedCredits = totalCredits ? totalCredits : credit * appState.players.length\n    decreaseCredit(usedCredits)\n  }\n  useEffect(() => {\n    Emitter.on('COIN_INSERT', handleCoinInsert)\n    Emitter.on('GAME_OVER', handleGameOver)\n    return () => {\n      Emitter.off('COIN_INSERT', handleCoinInsert)\n      Emitter.off('GAME_OVER', handleGameOver)\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [])\n  return (\n    <Typography {...props} className={classes.root} variant='h4'>{t('credit', { credit })}</Typography>\n  )\n}\n\nexport const Credit = withRouter(_Credit)\n","import { useState } from 'react'\nimport { useHistory } from 'react-router-dom'\nimport { MenuList, MenuItem } from '@material-ui/core'\nimport { useTranslation } from 'react-i18next'\nimport config from 'config'\nimport { SoundEffectPlayer } from 'shared/services'\nimport { MenuItemSelector, Typography } from 'components'\n\nexport default function GameSelectionView({ appState }) {\n  const { defaultGames: games, platform } = config\n  const history = useHistory()\n  const { t } = useTranslation()\n  const handleGameSelect = game => {\n    SoundEffectPlayer.play('press')\n    appState.game = game\n    history.push('/game-menu/players')\n  }\n  const getPreviousPlayedGameIndex = () => {\n    if (Object.keys(appState.game).length) {\n      return games.findIndex(g => g.id === appState.game.id)\n    } else {\n      return 0\n    }\n  }\n  const [selectedIndex, setSelectedIndex] = useState(getPreviousPlayedGameIndex())\n  return (\n    <MenuList>\n      <MenuItemSelector selectedIndex={selectedIndex} setSelectedIndex={setSelectedIndex}>\n        {\n          games.filter(game => game.platforms.includes(platform)).map((game, i) => (\n            <MenuItem key={i} selected={i === selectedIndex} onMouseOver={() => SoundEffectPlayer.play('hover') }\n                      onClick={() => handleGameSelect(game) }>\n              <Typography variant='h2'>{t(game.displayName)}</Typography>\n            </MenuItem>\n          ))\n        }\n      </MenuItemSelector>\n    </MenuList>\n  )\n}\n","import React, { useContext, useState } from 'react'\nimport { useHistory } from 'react-router-dom'\nimport { MenuList, MenuItem } from '@material-ui/core'\nimport i18n from 'i18n'\nimport { useTranslation } from 'react-i18next'\nimport config from 'config'\nimport { PlayerManager, SoundEffectPlayer, Speech } from 'shared/services'\nimport { MenuItemSelector, Typography } from 'components'\nimport { CreditContext } from 'components/contexts'\n\nconst playerManager = new PlayerManager(config.players)\n\nexport default function PlayerSelectionView({ appState }) {\n  const { totalCredits, credit } = appState.game\n  const history = useHistory()\n  const { credit: currentCredits } = useContext(CreditContext)\n  const { players } = playerManager\n  const [selectedIndex, setSelectedIndex] = useState(appState.players.length ? appState.players.length - 1 : 0)\n  const { t } = useTranslation()\n  const speech = new Speech(i18n.language)\n  const { isArcadeMode } = config\n  const handlePlayersSelect = players => {\n    const requiredCredits = totalCredits ? totalCredits : credit * players.length\n    const remainingCredits = currentCredits - requiredCredits\n    if (isArcadeMode() && remainingCredits < 0) {\n      SoundEffectPlayer.play('warn')\n                       .then(() => speech.speak(t('moreCoins', { coins: Math.abs(remainingCredits) })))\n    } else {\n      SoundEffectPlayer.play('game_on')\n      appState.players = players\n      history.push('/game')\n    }\n  }\n  const handleBackButtonClick = () => {\n    SoundEffectPlayer.play('back')\n    history.push('/game-menu/games')\n  }\n  if(Object.keys(appState.game).length === 0) {\n    history.push('/game-menu/games')\n    return null\n  }\n  return (\n    <MenuList>\n      <MenuItemSelector selectedIndex={selectedIndex} setSelectedIndex={setSelectedIndex}>\n        {\n          [...Array(players.length).keys()].map(i => (\n            <MenuItem key={i}\n                      selected={i === selectedIndex}\n                      onMouseOver={() => SoundEffectPlayer.play('hover') }\n                      onClick={() => handlePlayersSelect(players.slice(0, i + 1))}>\n              <Typography variant='h2'>{t(`${i + 1} player${i > 0 ? 's' : ''}`)}</Typography>\n              {\n                // WORKAROUND: use the style param to override the styles.\n                isArcadeMode() && <Typography style={{ marginLeft: '24px' }} variant='h5'>\n                                    {t('requiredCredits', {\n                                      credit: totalCredits ? totalCredits : credit * players.slice(0, i + 1).length\n                                    })}\n                                  </Typography>\n              }\n            </MenuItem>\n          ))\n        }\n        <MenuItem selected={players.length === selectedIndex}\n                  onMouseOver={() => SoundEffectPlayer.play('hover') }\n                  onClick={handleBackButtonClick}>\n          <Typography variant='h3'>{t('Back')}</Typography>\n        </MenuItem>\n      </MenuItemSelector>\n    </MenuList>\n  )\n}\n","const styles = theme => ({\n  root: {\n    margin: '24px'\n  }\n})\n\nexport default styles\n","import { useParams } from 'react-router-dom'\nimport { makeStyles } from '@material-ui/core/styles'\nimport GameSelectionView from './GameSelectionView'\nimport PlayerSelectionView from './PlayerSelectionView'\nimport styles from './styles'\n\nconst useStyles = makeStyles(styles)\n\nexport default function GameMenuView({ appState }) {\n  const classes = useStyles()\n  const { step } = useParams()\n  const ActiveView = props => {\n    switch(props.step) {\n      case 'games':\n        return <GameSelectionView appState={appState} />\n      case 'players':\n        return <PlayerSelectionView appState={appState} />\n      default:\n        return null\n    }\n  }\n  return <div className={classes.root}><ActiveView step={step} /></div>\n}\n","import { GameStateStore } from 'shared/stores'\nimport { MessageFactory } from 'shared/factories'\nimport { ArrayWatcher, Emitter, GameAwardUtils } from 'shared/services'\n\nconst STATUSES = {\n  UNINITIALIZED: 0,\n  INITIALIZED: 1,\n  STARTED: 2,\n  RESUMED: 3,\n  PAUSED: 4,\n  STOPPED: 5\n}\n\nexport default class Game {\n  state = null\n  status = STATUSES.UNINITIALIZED\n\n  constructor(players, options = { rounds: 8, scoresPerRound: 3, score: 0 }) {\n    options.scoresPerRound = options.scoresPerRound ? options.scoresPerRound : 3\n    this.players = players\n    this.options = options\n    this.state = new GameStateStore(players, options.rounds, options.score, { scoresPerRound: options.scoresPerRound })\n    this.status = STATUSES.INITIALIZED\n  }\n\n  /**\n   * Decide who is the winner when the game is over.\n   * @abstract\n   * @return {Array<Object>}\n   */\n  get winners() { return [] }\n\n  start = () => {\n    if (this.isInitialized() || this.isStopped()) {\n      this.addListeners()\n      Emitter.on('CHANGE_BUTTON_CLICK', this.handleChangeButtonClick)\n      this.status = STATUSES.STARTED\n      this.resume()\n    }\n  }\n\n  resume = () => {\n    if (this.isStarted() || this.isPaused()) {\n      Emitter.on('DARTBOARD_HIT', this.handleDartboardHit)\n      this.status = STATUSES.RESUMED\n    }\n  }\n\n  pause = () => {\n    if (this.isResumed()) {\n      Emitter.off('DARTBOARD_HIT', this.handleDartboardHit)\n      this.status = STATUSES.PAUSED\n    }\n  }\n\n  stop = () => {\n    if (this.isStarted() || this.isResumed() || this.isPaused()) {\n      Emitter.off('DARTBOARD_HIT', this.handleDartboardHit)\n      Emitter.off('CHANGE_BUTTON_CLICK', this.handleChangeButtonClick)\n      this.removeListeners()\n      this.status = STATUSES.STOPPED\n    }\n  }\n\n  addListeners = () => {\n    Emitter.on('GAME_START', this.start)\n    Emitter.on('GAME_RESUME', this.resume)\n    Emitter.on('GAME_PAUSE', this.pause)\n    Emitter.on('GAME_STOP', this.stop)\n  }\n\n  removeListeners = () => {\n    Emitter.off('GAME_START', this.start)\n    Emitter.off('GAME_RESUME', this.resume)\n    Emitter.off('GAME_PAUSE', this.pause)\n    Emitter.off('GAME_STOP', this.stop)\n  }\n\n  isInitialized = () => this.status === STATUSES.INITIALIZED\n\n  isStarted = () => this.status === STATUSES.STARTED\n\n  isResumed = () => this.status === STATUSES.RESUMED\n\n  isPaused = () => this.status === STATUSES.PAUSED\n\n  isStopped = () => this.status === STATUSES.STOPPED\n\n  /**\n   * This'll be triggered after a player throws a dart which hits the dartboard.\n   * @abstract\n   */\n  onDartboardHit = score => {}\n\n  /**\n   * This'll be triggered after a player clicks the change button.\n   * @abstract\n   */\n  onChangeButtonClick = () => {}\n\n  /**\n   * This'll be triggered when someone wins the game or all players finish their all rounds.\n   * @abstract\n   */\n  onGameOver = () => {}\n\n  handleDartboardHit = scoreSymbol => {\n    const { addScoreForCurrentPlayer, currentPlayerScoreboard: scoreboard } = this.state\n    const score = addScoreForCurrentPlayer(scoreSymbol)\n    if (score) {\n      this.state.addMessage(GameAwardUtils.getMessage(score))\n      score.index === (this.options.scoresPerRound - 1) && this.state.addMessage(GameAwardUtils.getMessage(scoreboard.getCurrentRound()))\n      this.onDartboardHit(score)\n    }\n  }\n\n  handleChangeButtonClick = () => {\n    if (!this.state.isLastRound()) {\n      this.onChangeButtonClick()\n      this.switchToNextPlayer()\n    } else {\n      this.handleGameOver()\n    }\n  }\n\n  switchToNextPlayer = () => {\n    const index = (this.state.currentPlayerIndex + 1) % this.players.length \n    this.state.setCurrentPlayerIndex(index)\n    this.resume()\n  }\n\n  handleGameMessageOnClose = message => {\n    message.block && this.resume()\n    this.state.deleteMessage(message.id)\n  }\n\n  handleGameOver = () => {\n    if (this.state.messages.length === 0) {\n      this.winners.length ? this.addGameMessage('win', this.winners[0].name) : this.addGameMessage('fail')\n    } else {\n      const arrayWatcher = new ArrayWatcher(this.state.messages)\n      arrayWatcher.watch(messages => {\n        if (messages.length === 0) {\n          this.winners.length ? this.addGameMessage('win', this.winners[0].name) : this.addGameMessage('fail')\n          arrayWatcher.stop()\n        }\n      })\n    }\n    this.pause()\n    Emitter.off('CHANGE_BUTTON_CLICK', this.handleChangeButtonClick)\n    this.onGameOver()\n  }\n\n  addGameMessage = (id, param) => {\n    const message = MessageFactory.create(id, param)\n    if (message) {\n      message.block && this.pause()\n      this.state.addMessage(message)\n    }\n  }\n\n  clearGameMessages = () => this.state.clearMessages()\n}\n\nGame.statuses = STATUSES\n","import { Game } from 'shared/game'\n\nexport default class CountUpGame extends Game {\n  get winners() {\n    const players = this.state.players.map((player, i) => ({ name: player.name, score: this.state.gameScores[i] }))\n                                      .sort((a, b) => b.score - a.score)\n    return players.filter(winner => winner.score === players[0].score)\n  }\n\n  onDartboardHit = score => {\n    const {\n      currentPlayerScoreboard: scoreboard,\n      increaseCurrentPlayerGameScore,\n      isLastRoundFinished\n    } = this.state\n    increaseCurrentPlayerGameScore(score.value)\n    const round = scoreboard.getCurrentRound()\n    if (isLastRoundFinished()) {\n      this.handleGameOver()\n    } else if (round && !round.isNewScoreAddable()) {\n      this.addGameMessage('nextPlayer')\n    }\n  }\n\n  onChangeButtonClick = () => {\n    const { addRoundForCurrentPlayer, clearMessages } = this.state\n    addRoundForCurrentPlayer()\n    clearMessages()\n    this.addGameMessage('next')\n  }\n}\n","import React, { useEffect, useMemo } from 'react'\nimport { useHistory } from 'react-router-dom'\nimport { observer } from 'mobx-react-lite'\nimport { Emitter } from 'shared/services'\nimport { ClassicDartGameView, GameMessagesView } from 'components'\nimport CountUpGame from './CountUpGame'\n\nexport default function CountUpGameView({ name, players, rounds, scoresPerRound, score, isPlayerListHidden = false }) {\n  const history = useHistory()\n\n  players.length === 0 && history.push('/game-menu')\n\n  const game = useMemo(() => new CountUpGame(players, { rounds, scoresPerRound, score }), [players, rounds, scoresPerRound, score])\n  useEffect(() => {\n    if (game.isInitialized()) {\n      game.start()\n      game.onGameOver = () => {\n        Emitter.once('CHANGE_BUTTON_CLICK', () => {\n          game.clearGameMessages()\n          game.addGameMessage('back')\n          game.stop()\n          Emitter.emit('GAME_OVER', 'count-up', game.winners)\n          history.push('/game-menu')\n        })\n      }\n    }\n  }, [game, history])\n\n  const GameView = observer(({ game }) => {\n    const {\n      currentPlayer: player,\n      currentPlayerGameScore: gameScore,\n      currentPlayerDartScores: dartScores,\n      currentPlayerScoreboard: scoreboard,\n      players,\n      gameScores\n    } = game.state\n    return <ClassicDartGameView name={name ? name : 'Count-up'}\n                                player={player}\n                                gameScore={gameScore}\n                                dartScores={dartScores}\n                                scoreboard={scoreboard}\n                                players={players}\n                                gameScores={gameScores}\n                                isPlayerListHidden={isPlayerListHidden} />\n  })\n  const MessagesView = observer(({ game }) => {\n    const { messages } = game.state\n    return <GameMessagesView messages={messages} onClose={game.handleGameMessageOnClose} />\n  })\n  return (\n    <React.Fragment>\n      <GameView game={game} />\n      <MessagesView game={game} />\n    </React.Fragment>\n  )\n}\n","import { GameAwardUtils } from 'shared/services'\nimport { Score } from 'shared/services/Scoreboard'\nimport CountUpGame from '../../CountUpGameView/CountUpGame'\n\nexport default class NinjaCountUpGame extends CountUpGame {\n  handleDartboardHit = scoreSymbol => {\n    const { addScoreForCurrentPlayer, currentPlayerScoreboard: scoreboard } = this.state\n    const symbol = Score.isInnerSingle(scoreSymbol) ? 'SBULL' : (scoreSymbol === 'SBULL' ? 'DBULL' : scoreSymbol)\n    const score = addScoreForCurrentPlayer(new Score(symbol))\n    if (score) {\n      if (score.symbol === 'DBULL') {\n        score.value = 100\n      }\n      this.state.addMessage(GameAwardUtils.getMessage(score))\n      score.index === (this.options.scoresPerRound - 1) && this.state.addMessage(GameAwardUtils.getMessage(scoreboard.getCurrentRound()))\n      this.onDartboardHit(score)\n    }\n  }\n}\n","import React, { useContext, useEffect, useMemo } from 'react'\nimport { useHistory } from 'react-router-dom'\nimport { observer } from 'mobx-react-lite'\nimport { Emitter, SoundEffectPlayer } from 'shared/services'\nimport { ClassicDartGameView, GameMessagesView } from 'components'\nimport { BackgroundImageContext } from 'components/contexts'\nimport NinjaCountUpGame from './NinjaCountUpGame'\n\nexport default function NinjaCountUpGameView({ players, rounds }) {\n  const history = useHistory()\n  const { backgroundImage, setBackgroundImage } = useContext(BackgroundImageContext)\n\n  players.length === 0 && history.push('/game-menu')\n\n  const game = useMemo(() => new NinjaCountUpGame(players, { rounds }), [players, rounds])\n  useEffect(() => {\n    if (game.isInitialized()) {\n      const originalBackgrondImage = {...backgroundImage}\n      const { theme: originalSoundEffectTheme } = SoundEffectPlayer\n      setBackgroundImage({ name: 'ninja', url: '/resources/images/background/ninja.png' })\n      SoundEffectPlayer.setTheme('ninja')\n      SoundEffectPlayer.play('bgm')\n      game.start()\n      game.onGameOver = () => {\n        Emitter.once('CHANGE_BUTTON_CLICK', () => {\n          game.clearGameMessages()\n          game.addGameMessage('back')\n          game.stop()\n          setBackgroundImage(originalBackgrondImage)\n          SoundEffectPlayer.stop('bgm')\n          SoundEffectPlayer.setTheme(originalSoundEffectTheme)\n          Emitter.emit('GAME_OVER', 'ninja-count-up', game.winners)\n          history.push('/game-menu')\n        })\n      }\n    }\n  }, [game, history, backgroundImage, setBackgroundImage])\n\n  const GameView = observer(({ game }) => {\n    const {\n      currentPlayer: player,\n      currentPlayerGameScore: gameScore,\n      currentPlayerDartScores: dartScores,\n      currentPlayerScoreboard: scoreboard,\n      players,\n      gameScores\n    } = game.state\n    return <ClassicDartGameView name='Ninja count-up'\n                                player={player}\n                                gameScore={gameScore}\n                                dartScores={dartScores}\n                                scoreboard={scoreboard}\n                                players={players}\n                                gameScores={gameScores} />\n  })\n  const MessagesView = observer(({ game }) => {\n    const { messages } = game.state\n    return <GameMessagesView messages={messages} onClose={game.handleGameMessageOnClose} />\n  })\n  return (\n    <React.Fragment>\n      <GameView game={game} />\n      <MessagesView game={game} />\n    </React.Fragment>\n  )\n}\n","import { Game } from 'shared/game'\nimport { Round } from 'shared/services/Scoreboard'\n\nexport default class ZeroOneGame extends Game {\n  constructor(players, options = { score: 301, rounds: 15 }) {\n    super(players, options)\n  }\n\n  get winners() {\n    const players = this.state.players.map((player, i) => ({ name: player.name, score: this.state.gameScores[i] }))\n                                      .sort((a, b) => a.score - b.score)\n    return players.filter(winner => winner.score >= 0 && winner.score === players[0].score)\n  }\n\n  onDartboardHit = score => {\n    const {\n      isLastRound,\n      isLastRoundFinished,\n      currentPlayerScoreboard: scoreboard,\n    } = this.state\n    this.computePlayersGameScores(score.value)\n\n    const round = scoreboard.getCurrentRound()\n    const { currentPlayerGameScore } = this.state\n    if (currentPlayerGameScore === 0 || (isLastRound() && currentPlayerGameScore < 0) || isLastRoundFinished()) {\n      this.handleGameOver()\n    } else if (currentPlayerGameScore > 0 && round && !round.isNewScoreAddable()) {\n      this.addGameMessage('nextPlayer')\n    } else if (currentPlayerGameScore < 0) {\n      this.addGameMessage('bust')\n    }\n  }\n\n  computePlayersGameScores = score => this.state.decreaseCurrentPlayerGameScore(score)\n\n  onChangeButtonClick = () => {\n    const {\n      addRoundForCurrentPlayer,\n      clearMessages,\n      currentPlayerGameScore,\n      deleteCurrentRoundForCurrentPlayer,\n    } = this.state\n    clearMessages()\n    if (currentPlayerGameScore < 0) {\n      let round = deleteCurrentRoundForCurrentPlayer()\n      this.rollbackPlayersGameScores(round)\n      round = new Round(round.index)\n      round.addScore('BUST')\n      addRoundForCurrentPlayer(round)\n    }\n    addRoundForCurrentPlayer()\n    this.addGameMessage('next')\n  }\n\n  rollbackPlayersGameScores = round => this.state.increaseCurrentPlayerGameScore(round.scores.map(s => s.value).reduce((a, b) => a + b))\n}\n","import ZeroOneGame from '../../ZeroOneGameView/ZeroOneGame'\n\nexport default class CoOpZeroOneGame extends ZeroOneGame {\n  constructor(players, options = { score: 1001, totalRounds: 40 }) {\n    options.rounds = Math.floor(options.totalRounds / players.length)\n    super(players, options)\n  }\n\n  get winners() {\n    return [this.state.currentPlayer]\n  }\n\n  computePlayersGameScores = score => {\n    const {\n      currentPlayerGameScore,\n      currentPlayerIndex,\n      setPlayerGameScore,\n    } = this.state\n    // WORKAROUND: update the current player's game score in the last round of the loop to\n    // sync the states of the ClassicDartGameView component and game state.\n    for (let i = this.players.length - 1; i >= 0; i--) {\n      const nextPlayerIndex = (currentPlayerIndex + i) % this.players.length\n      setPlayerGameScore(nextPlayerIndex, currentPlayerGameScore - score)\n    }\n  }\n\n  rollbackPlayersGameScores = round => {\n    const {\n      currentPlayerGameScore,\n      currentPlayerIndex,\n      setPlayerGameScore,\n    } = this.state\n    for (let i = 0; i < this.players.length; i++) {\n      const nextPlayerIndex = (currentPlayerIndex + i) % this.players.length\n      setPlayerGameScore(\n        nextPlayerIndex,\n        currentPlayerGameScore + round.scores.map(s => s.value).reduce((a, b) => a + b)\n      )\n    }\n  }\n}\n","import React, { useEffect, useMemo } from 'react'\nimport { useHistory } from 'react-router-dom'\nimport { observer } from 'mobx-react-lite'\nimport { Emitter } from 'shared/services'\nimport { ClassicDartGameView, GameMessagesView } from 'components'\nimport CoOpZeroOneGame from './CoOpZeroOneGame'\n\nexport default function CoOpZeroOneGameView({ players, totalRounds, score }) {\n  const history = useHistory()\n\n  players.length === 0 && history.push('/game-menu')\n\n  const game = useMemo(() => new CoOpZeroOneGame(players, { score, totalRounds }), [players, score, totalRounds])\n  useEffect(() => {\n    if (game.isInitialized()) {\n      game.start()\n      game.onGameOver = () => {\n        Emitter.once('CHANGE_BUTTON_CLICK', () => {\n          game.clearGameMessages()\n          game.addGameMessage('back')\n          game.stop()\n          Emitter.emit('GAME_OVER', 'zero-one', game.winners)\n          history.push('/game-menu')\n        })\n      }\n    }\n  }, [game, history])\n\n  const GameView = observer(({ game }) => {\n    const {\n      currentPlayer: player,\n      currentPlayerGameScore: gameScore,\n      currentPlayerDartScores: dartScores,\n      currentPlayerScoreboard: scoreboard,\n      players,\n      gameScores\n    } = game.state\n    return <ClassicDartGameView name='Co-op 1001'\n                                player={player}\n                                gameScore={gameScore}\n                                dartScores={dartScores}\n                                scoreboard={scoreboard}\n                                players={players}\n                                gameScores={gameScores} />\n  })\n  const MessagesView = observer(({ game }) => {\n    const { messages } = game.state\n    return <GameMessagesView messages={messages} onClose={game.handleGameMessageOnClose} />\n  })\n  return (\n    <React.Fragment>\n      <GameView game={game} />\n      <MessagesView game={game} />\n    </React.Fragment>\n  )\n}\n","import i18n from 'i18n'\nimport { ArrayWatcher, Emitter } from 'shared/services'\nimport { Game } from 'shared/game'\n\nconst t = i18n.getFixedT()\n\nexport default class ThreeDartsOnePrizeGame extends Game {\n  get winners() {\n    const { gameScores, players, scoreboards } = this.state\n    const winnerIndexes = []\n    gameScores.forEach((score, index) => {\n      if ((score > 65 || score < 21) &&\n          scoreboards[index].rounds[0].scores.length === 3 &&\n          scoreboards[index].rounds[0].scores.every(s => s.value > 0)) {\n        winnerIndexes.push(index)\n      }\n    })\n    return winnerIndexes.map(i => players[i])\n  }\n\n  onDartboardHit = score => {\n    const {\n      currentPlayerScoreboard: scoreboard,\n      increaseCurrentPlayerGameScore,\n      isLastRoundFinished\n    } = this.state\n    increaseCurrentPlayerGameScore(score.value)\n    const round = scoreboard.getCurrentRound()\n    if (isLastRoundFinished()) {\n      this.handleGameOver()\n    } else if (round && !round.isNewScoreAddable()) {\n      this.addGameMessage('nextPlayer')\n    }\n  }\n\n  onChangeButtonClick = () => {\n    const { addRoundForCurrentPlayer, clearMessages } = this.state\n    addRoundForCurrentPlayer()\n    clearMessages()\n    this.addGameMessage('next')\n  }\n\n  handleGameOver = () => {\n    if (this.state.messages.length === 0) {\n      this.addGameResultMessage()\n    } else {\n      const arrayWatcher = new ArrayWatcher(this.state.messages)\n      arrayWatcher.watch(messages => {\n        if (messages.length === 0) {\n          this.addGameResultMessage()\n          arrayWatcher.stop()\n        }\n      })\n    }\n    this.pause()\n    Emitter.off('CHANGE_BUTTON_CLICK', this.handleChangeButtonClick)\n    // The prize is 2 credits for each player.\n    this.winners.length && [...Array(this.winners.length * 2)].forEach(() => Emitter.emit('COIN_INSERT'))\n    this.onGameOver()\n  }\n\n  addGameResultMessage = () => {\n    const winners = this.winners.map(w => w.name)\n    const names = winners.length === 1 ? winners[0] : winners.join(t(', '))\n    winners.length ? this.addGameMessage('prizeForThreeDartsOnePrizeGame', names) : this.addGameMessage('fail')\n  }\n}\n","import React, { useEffect, useMemo } from 'react'\nimport { useHistory } from 'react-router-dom'\nimport { observer } from 'mobx-react-lite'\nimport { Emitter, SoundEffectPlayer } from 'shared/services'\nimport { ClassicDartGameView, GameMessagesView } from 'components'\nimport ThreeDartsOnePrizeGame from './ThreeDartsOnePrizeGame'\n\nexport default function ThreeDartsOnePrizeGameView({ players, rounds }) {\n  const history = useHistory()\n  players.length === 0 && history.push('/game-menu')\n\n  const game = useMemo(() => new ThreeDartsOnePrizeGame(players, { rounds }), [players, rounds])\n  useEffect(() => {\n    if (game.isInitialized()) {\n      const { theme: originalSoundEffectTheme } = SoundEffectPlayer\n      SoundEffectPlayer.setTheme('3-darts-1-prize')\n      SoundEffectPlayer.play('bgm')\n      game.start()\n      game.onGameOver = () => {\n        Emitter.once('CHANGE_BUTTON_CLICK', () => {\n          game.clearGameMessages()\n          game.addGameMessage('back')\n          game.stop()\n          SoundEffectPlayer.stop('bgm')\n          SoundEffectPlayer.setTheme(originalSoundEffectTheme)\n          Emitter.emit('GAME_OVER', '3-darts-1-prize', game.winners)\n          history.push('/game-menu')\n        })\n      }\n    }\n  }, [game, history])\n\n  const GameView = observer(({ game }) => {\n    const {\n      currentPlayer: player,\n      currentPlayerGameScore: gameScore,\n      currentPlayerDartScores: dartScores,\n      currentPlayerScoreboard: scoreboard,\n      players,\n      gameScores\n    } = game.state\n    return <ClassicDartGameView name='2165'\n                                player={player}\n                                gameScore={gameScore}\n                                dartScores={dartScores}\n                                scoreboard={scoreboard}\n                                players={players}\n                                gameScores={gameScores} />\n  })\n  const MessagesView = observer(({ game }) => {\n    const { messages } = game.state\n    return <GameMessagesView messages={messages} onClose={game.handleGameMessageOnClose} />\n  })\n  return (\n    <React.Fragment>\n      <GameView game={game} />\n      <MessagesView game={game} />\n    </React.Fragment>\n  )\n}\n","import React, { useEffect, useMemo } from 'react'\nimport { useHistory } from 'react-router-dom'\nimport { observer } from 'mobx-react-lite'\nimport { Emitter } from 'shared/services'\nimport { ClassicDartGameView, GameMessagesView } from 'components'\nimport ZeroOneGame from './ZeroOneGame'\n\nexport default function ZeroOneGameView({ players, rounds, score }) {\n  const history = useHistory()\n\n  players.length === 0 && history.push('/game-menu')\n\n  const game = useMemo(() => new ZeroOneGame(players, { score, rounds }), [players, score, rounds])\n  useEffect(() => {\n    if (game.isInitialized()) {\n      game.start()\n      game.onGameOver = () => {\n        Emitter.once('CHANGE_BUTTON_CLICK', () => {\n          game.clearGameMessages()\n          game.addGameMessage('back')\n          game.stop()\n          Emitter.emit('GAME_OVER', 'zero-one', game.winners)\n          history.push('/game-menu')\n        })\n      }\n    }\n  }, [game, history])\n\n  const GameView = observer(({ game }) => {\n    const {\n      currentPlayer: player,\n      currentPlayerGameScore: gameScore,\n      currentPlayerDartScores: dartScores,\n      currentPlayerScoreboard: scoreboard,\n      players,\n      gameScores\n    } = game.state\n    return <ClassicDartGameView name='01 game'\n                                player={player}\n                                gameScore={gameScore}\n                                dartScores={dartScores}\n                                scoreboard={scoreboard}\n                                players={players}\n                                gameScores={gameScores} />\n  })\n  const MessagesView = observer(({ game }) => {\n    const { messages } = game.state\n    return <GameMessagesView messages={messages} onClose={game.handleGameMessageOnClose} />\n  })\n  return (\n    <React.Fragment>\n      <GameView game={game} />\n      <MessagesView game={game} />\n    </React.Fragment>\n  )\n}\n","import { useContext, useEffect } from 'react'\nimport { useHistory } from 'react-router-dom'\nimport config from 'config'\nimport { BackgroundImageContext, CreditContext } from 'components/contexts'\nimport {\n  CountUpGameView, NinjaCountUpGameView, CoOpZeroOneGameView, ThreeDartsOnePrizeGameView, ZeroOneGameView\n} from 'components/games'\n\nexport default function GameView({ game = {}, players =[] }) {\n  const { isArcadeMode } = config\n  const history = useHistory()\n  const { credit } = useContext(CreditContext)\n  const { setRandomBackgroundImage } = useContext(BackgroundImageContext)\n  useEffect(() => {\n    game.name !== 'ninja-count-up' && setRandomBackgroundImage()\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [])\n  if (isArcadeMode() && credit < game.credit) {\n    history.push('/')\n    return null\n  }\n  switch(game.name) {\n    case '3-darts-1-prize':\n      return <ThreeDartsOnePrizeGameView players={players} rounds={game.rounds} />\n    case 'co-op-zero-one':\n      return <CoOpZeroOneGameView players={players} score={game.score} totalRounds={game.totalRounds} />\n    case 'count-up':\n      return <CountUpGameView players={players} rounds={game.rounds} />\n    case 'ninja-count-up':\n      return <NinjaCountUpGameView players={players} rounds={game.rounds} />\n    case 'one-round-count-up':\n      return <CountUpGameView players={players} rounds={game.rounds} scoresPerRound={game.scoresPerRound} isPlayerListHidden={true} />\n    case 'one-round-lucky-number':\n      return <CountUpGameView name={game.displayName} players={players} rounds={game.rounds} scoresPerRound={game.scoresPerRound} score={game.score} isPlayerListHidden={true} />\n    case 'zero-one':\n      return <ZeroOneGameView players={players} score={game.score} rounds={game.rounds} />\n    default:\n      history.push('/')\n      return null\n  }\n}\n","const styles = theme => ({\n  text: {\n    textTransform: 'uppercase'\n  },\n  snackbar: {\n    width: '100%'\n  },\n  snackbarContent: {\n    color: '#000',\n    backgroundColor: '#fff'\n  }\n})\n\nexport default styles\n","import { useEffect, useState } from 'react'\nimport { Snackbar as MaterialUiSnackbar } from '@material-ui/core'\nimport { makeStyles } from '@material-ui/core/styles'\nimport { Typography } from 'components'\nimport { SoundEffectPlayer } from 'shared/services'\nimport styles from './styles'\n\nconst useStyles = makeStyles(styles)\n\nexport default function Snackbar({ message, onClose }) {\n  const classes = useStyles()\n  const [open, setOpen] = useState(true)\n  useEffect(() => {\n    setOpen(true)\n    message.soundEffect && SoundEffectPlayer.play(message.soundEffect)\n  }, [message])\n  return (\n    <MaterialUiSnackbar\n      anchorOrigin={{\n        vertical: 'top',\n        horizontal: 'center'\n      }}\n      className={classes.snackbar}\n      open={open}\n      autoHideDuration={message.autoHideDuration}\n      onClose={() => {\n        setOpen(false)\n        onClose && onClose(message)\n      }}\n      message={<Typography className={classes.text} variant='h1'>{message.text}</Typography>}\n      ContentProps={{ className: classes.snackbarContent }}\n    />\n  )\n}\n","const styles = theme => ({\n  text: {\n    textTransform: 'uppercase'\n  },\n  dialogScrollPaper: {\n    alignItems: 'flex-end'\n  }\n})\n\nexport default styles\n","import { useEffect } from 'react'\nimport { Dialog as MaterialUiDialog, DialogContent } from '@material-ui/core'\nimport { makeStyles } from '@material-ui/core/styles'\nimport { Typography } from 'components'\nimport { SoundEffectPlayer } from 'shared/services'\nimport styles from './styles'\n\nconst useStyles = makeStyles(styles)\n\nexport default function Dialog({ message }) {\n  const classes = useStyles()\n  useEffect(() => {\n    message.soundEffect && SoundEffectPlayer.play(message.soundEffect)\n  }, [message])\n  return (\n    <MaterialUiDialog open={true} maxWidth={false} classes={{ scrollPaper: classes.dialogScrollPaper }}>\n      <DialogContent>\n        <Typography className={classes.text} variant='h1'>{message.text}</Typography>\n      </DialogContent>\n    </MaterialUiDialog>\n  )\n}\n","const styles = theme => ({\n  root: props => ({\n    position: 'fixed',\n    zIndex: theme.gameAward.zIndex,\n    top: 0,\n    left: 0,\n    width: '100%',\n    height: '100%',\n    color: 'white',\n    backgroundColor: 'black',\n    display: 'flex',\n    justifyContent: 'center',\n    alignItems: 'center',\n    backgroundImage: `url(${props.backgroundImageUrl})`,\n    backgroundPosition: 'center',\n    backgroundRepeat: 'no-repeat',\n    backgroundSize: 'cover'\n  }),\n  text: {\n    textTransform: 'capitalize'\n  }\n})\n\nexport default styles\n","import { useContext, useEffect, useState } from 'react'\nimport { useTranslation } from 'react-i18next'\nimport { makeStyles } from '@material-ui/core/styles'\nimport { Typography } from 'components'\nimport { BackgroundImageContext } from 'components/contexts'\nimport styles from './styles'\n\nconst useStyles = makeStyles(styles)\n\nexport default function OneBull({ message, onClose }) {\n  const [open, setOpen] = useState(true)\n  const { t } = useTranslation()\n  const { backgroundImage } = useContext(BackgroundImageContext)\n  const classes = useStyles({ backgroundImageUrl: backgroundImage.url })\n  useEffect(() => {\n    const timerId = setTimeout(() => {\n      setOpen(false)\n      onClose && onClose(message)\n    }, message.autoHideDuration)\n    return () => clearTimeout(timerId)\n  }, [message, onClose, setOpen])\n  if (open) {\n    return (\n      <div className={classes.root}>\n        <Typography className={classes.text} variant='h1'>{t('One bull')}</Typography>\n      </div>\n    )\n  } else {\n    return null\n  }\n}\n","import { OneBull } from 'components/awards'\n\nexport default function AnimationDialog({ message, onClose }) {\n  switch(message.id) {\n    case 'oneBull':\n      return <OneBull message={message} onClose={onClose} />\n    case 'lowTon':\n    case 'hatTrick':\n    default:\n      return null\n  }\n}\n","import i18n from 'i18n'\nimport { SoundEffectPlayer, Speech } from 'shared/services'\nimport Snackbar from '../Snackbar'\nimport Dialog from '../Dialog'\nimport AnimationDialog from '../AnimationDialog'\n\nexport default function GameMessage({ message, onClose }) {\n  const speech = new Speech(i18n.language)\n  switch(message.type) {\n    case 'snackbar':\n      return <Snackbar message={message} onClose={onClose} />\n    case 'dialog':\n      return <Dialog message={message} onClose={onClose} />\n    case 'animationDialog':\n      return <AnimationDialog message={message} onClose={onClose} />\n    case 'speech':\n      speech.speak(message.text)\n      onClose && onClose(message)\n      return null\n    case 'sound':\n    default:\n      message.soundEffect && SoundEffectPlayer.play(message.soundEffect)\n      onClose && onClose(message)\n      return null\n  }\n}\n","import React from 'react'\nimport GameMessage from './GameMessage'\n\nexport default function GameMessagesView({ messages, onClose }) {\n  return (\n    <React.Fragment>\n      {\n        messages.map((message, i) => <GameMessage key={i} message={message} onClose={onClose} />)\n      }\n    </React.Fragment>\n  )\n}\n","import { useEffect } from 'react'\nimport { MenuItem } from '@material-ui/core'\nimport Emitter from 'shared/services/Emitter'\n\nexport default function MenuItemSelector({ children, selectedIndex, setSelectedIndex }) {\n  useEffect(() => {\n    const onMouseOverCallbacks = []\n    const onClickCallbacks = []\n    const countMenuItemLength = children => {\n      let counter = 0\n      if (children.type === MenuItem) {\n        counter++\n        onMouseOverCallbacks.push(children.props.onMouseOver)\n        onClickCallbacks.push(children.props.onClick)\n      } else if (Array.isArray(children)) {\n        children.forEach(child => {\n          if (child.type === MenuItem) {\n            counter++\n            onMouseOverCallbacks.push(child.props.onMouseOver)\n            onClickCallbacks.push(child.props.onClick)\n          } else if (Array.isArray(child)) {\n            counter += countMenuItemLength(child)\n          }\n        })\n      }\n      return counter\n    }\n    const childrenLength = countMenuItemLength(children)\n\n    const handleMenuItemSelect = () => {\n      setSelectedIndex(prevSelectedIndex => (prevSelectedIndex + 1) % childrenLength)\n      typeof onMouseOverCallbacks[selectedIndex] === 'function' && onMouseOverCallbacks[selectedIndex]()\n    }\n    const handleMenuItemSubmit = symbol => (symbol === 'SBULL' || symbol === 'DBULL' ) &&\n                                           typeof onClickCallbacks[selectedIndex] === 'function' &&\n                                           onClickCallbacks[selectedIndex]()\n    Emitter.on('CHANGE_BUTTON_CLICK', handleMenuItemSelect)\n    Emitter.on('DARTBOARD_HIT', handleMenuItemSubmit)\n    return () => {\n      Emitter.off('CHANGE_BUTTON_CLICK', handleMenuItemSelect)\n      Emitter.off('DARTBOARD_HIT', handleMenuItemSubmit)\n    }\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [selectedIndex])\n  return children\n}\n","import { useTranslation } from 'react-i18next'\nimport { useHistory } from 'react-router-dom'\nimport { MenuList, MenuItem } from '@material-ui/core'\nimport config from 'config'\nimport { DartboardFactory } from 'shared/factories'\nimport { Typography } from 'components'\n\nconst dartboard = DartboardFactory.create(config.dartboard)\n\nexport default function GameSelectionView() {\n  const { t } = useTranslation()\n  const history = useHistory()\n  return (\n    <MenuList>\n      <MenuItem onClick={() => {\n        dartboard.connect().then(() => dartboard.connected && history.push('/game-menu'))\n      }}>\n        <Typography variant='h2'>{t('Connect dartboard')}</Typography>\n      </MenuItem>\n      <MenuItem><Typography variant='h6'>{t('version', { version: process.env.REACT_APP_VERSION })}</Typography></MenuItem>\n    </MenuList>\n  )\n}\n","const styles = theme => ({\n  root: {\n    color: props => props.active ? '#ffffff' : '#aaaaaa',\n    backgroundColor: props => props.active ? '#000000dd' : '#00000066'\n  },\n  avatar: {\n    backgroundColor: props => `${theme.players[props.index]}`\n  },\n  score: {\n    textAlign: 'center'\n  }\n})\n\nexport default styles\n","import {\n  Avatar,\n  Card, CardContent, CardHeader,\n  Typography\n} from '@material-ui/core'\nimport { makeStyles } from '@material-ui/core/styles'\nimport styles from './styles'\n\nconst useStyles = makeStyles(styles)\n\nexport default function PlayerCard({ name, score, index, active }) {\n  const classes = useStyles({ index, active })\n  return (\n    <Card className={classes.root}>\n      <CardHeader\n        avatar={\n          <Avatar className={classes.avatar}>{name.charAt(0).toUpperCase()}</Avatar>\n        }\n        title={\n          <Typography variant='h3'>{name}</Typography>\n        }\n      />\n      <CardContent className={classes.score}>\n        <Typography variant='h1'>{score}</Typography>\n      </CardContent>\n    </Card>\n  )\n}\n","import { useTranslation } from 'react-i18next'\nimport { Typography } from 'components'\nimport theme from 'theme'\n\nexport default function Score({ playerIndex, round, isCurrentRound = false }) {\n  const { t } = useTranslation()\n  const roundIndex = round.index + 1\n  if (round.scores.length === 0) {\n    return <Typography variant='h3'>{`${roundIndex}. ${isCurrentRound ? '' : '0'}`}</Typography>\n  } else if (round.scores[0].displaySymbol === 'BUST') {\n    return <Typography variant='h3'>{`${roundIndex}. ${t('Bust 😱')}`}</Typography>\n  } else {\n    const score = round.scores.map(s => s.value).reduce((a, b) => a + b)\n    // WORKAROUND: Don't understand that why cannot use className with some styles to override the color.\n    // For example, add `color: props => theme.players[props.index] + '!important'` in the styles file.\n    // This will cause a bug, which cause the App renders wrong color by unknown reasons after switching to the next player.\n    // At that time, the player index is correct.\n    return <Typography style={score >= 100 ? { color: `${theme.players[playerIndex]}` } : {}} variant='h3'>{`${roundIndex}. ${score}`}</Typography>\n  }\n}\n","const styles = theme => ({\n  round: {\n    paddingLeft: 0\n  }\n})\n\nexport default styles\n","import { useTranslation } from 'react-i18next'\nimport { List, ListItem, ListItemText } from '@material-ui/core'\nimport { makeStyles } from '@material-ui/core/styles'\nimport { Typography } from 'components'\nimport Score from './Score'\nimport styles from './styles'\n\nconst useStyles = makeStyles(styles)\n\nexport default function Scoreboard({ className, index, rounds, totalRounds }) {\n  const { t } = useTranslation()\n  const classes = useStyles()\n  const lastEightRounds = rounds.slice(-8)\n  return (\n    <div className={className}>\n      {\n        <List>\n          <ListItem className={classes.round}>\n            <ListItemText primary={\n              <Typography variant='h3'>\n                {`${rounds.length} / ${totalRounds} ${t('Rounds')}`}\n              </Typography>\n            }/>\n          </ListItem>\n          {\n            [...Array(lastEightRounds.length).keys()].map(i => (\n              <ListItem key={i} className={classes.round}>\n                <ListItemText primary={\n                  <Score\n                    playerIndex={index}\n                    round={lastEightRounds[i]}\n                    isCurrentRound={i === lastEightRounds.length - 1}\n                  />\n                }/>\n              </ListItem>\n            )).reverse()\n          }\n        </List>\n      }\n    </div>\n  )\n}\n","const styles = theme => ({\n  text: {\n    marginLeft: '1rem',\n    textShadow: '-3px 0 white, 0 3px white, 3px 0 white, 0 -3px white'\n  }\n})\n\nexport default styles\n","import { List, ListItem, ListItemText, Typography } from '@material-ui/core'\nimport { makeStyles } from '@material-ui/core/styles'\nimport styles from './styles'\n\nconst useStyles = makeStyles(styles)\n\nexport default function Scores({ className, scores }) {\n  const classes = useStyles()\n  return (\n    <List className={className}>\n      {\n        scores.map((score, i) =>\n          <ListItem key={i}>\n            <ListItemText primary={\n              <Typography className={classes.text} variant='h3'>{`${i + 1}. ${score.displaySymbol}`}</Typography>\n            }/>\n          </ListItem>\n        )\n      }\n    </List>\n  )\n}\n","const styles = {\n  root: {\n    color: 'black',\n    textShadow: '-3px 0 white, 0 3px white, 3px 0 white, 0 -3px white'\n  }\n}\n\nexport default styles\n","import { Typography as _Typography } from '@material-ui/core'\nimport { withStyles } from '@material-ui/core/styles'\nimport styles from './styles'\n\nexport default function Typography(props) {\n  const Typography = withStyles(styles)(_Typography)\n  return <Typography {...props} />\n}\n","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport { I18nextProvider } from 'react-i18next'\nimport { createMuiTheme, ThemeProvider } from '@material-ui/core/styles'\n\nimport config from 'config'\nimport i18n from 'i18n'\nimport theme from 'theme'\nimport reportWebVitals from 'reportWebVitals'\n\nimport { CreditProvider, BackgroundImageProvider, OAuthProvider } from 'components/contexts'\nimport { App } from 'components'\nimport 'index.css'\n\ni18n.changeLanguage(config.language || (window.navigator.userLanguage || window.navigator.language))\n\nReactDOM.render(\n  <React.StrictMode>\n    <I18nextProvider i18n={i18n}>\n      <ThemeProvider theme={createMuiTheme(theme)}>\n        <OAuthProvider>\n          <CreditProvider>\n            <BackgroundImageProvider>\n              <App />\n            </BackgroundImageProvider>\n          </CreditProvider>\n        </OAuthProvider>\n      </ThemeProvider>\n    </I18nextProvider>\n  </React.StrictMode>,\n  document.getElementById('root')\n)\n\n// Force to check and update the caches everytime when launching the platform.\n'serviceWorker' in navigator && navigator.serviceWorker.register(`/service-worker.js?t=${new Date().getTime()}`)\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals()\n"],"sourceRoot":""}