(this.webpackJsonptjdarts=this.webpackJsonptjdarts||[]).push([[0],{106:function(e,t,n){},107:function(e,t,n){"use strict";n.r(t);var r=n(2),a=n(0),s=n.n(a),o=n(12),c=n.n(o),i=n(145),u=n(146),l=n(78),d=n(18),h=["arcade","home","market"],f={301:{id:"301",displayName:"301",name:"zero-one",score:301,rounds:10,platforms:h,credit:1},501:{id:"501",displayName:"501",name:"zero-one",score:501,rounds:15,platforms:h,credit:2},701:{id:"701",displayName:"701",name:"zero-one",score:701,rounds:20,platforms:h,credit:3},countUp:{id:"countUp",displayName:"Count-up",name:"count-up",rounds:8,platforms:h,credit:2},coOp1001:{id:"coOp1001",displayName:"Co-op 1001",name:"co-op-zero-one",score:1001,totalRounds:40,platforms:h,totalCredits:4},ninjaCountUp:{id:"ninjaCountUp",displayName:"Ninja count-up",name:"ninja-count-up",rounds:8,platforms:h,credit:3},oneRoundCountUp:{id:"oneRoundCountUp",displayName:"Count-up",name:"one-round-count-up",rounds:1,scoresPerRound:8,platforms:[h[2]]},threeDartsOnePrize:{id:"threeDartsOnePrize",displayName:"2165",name:"3-darts-1-prize",rounds:1,platforms:[h[0]],credit:1}},m={platform:h[0],dartboard:"granboard",coinAcceptor:"mouse",defaultGames:{topGames:[f[301],f[501],f.countUp,f.coOp1001,f.ninjaCountUp,f.threeDartsOnePrize]}.topGames,maxPlayers:4,players:Object(d.a)(Array(4).keys()).map((function(e){return{name:"Player ".concat(e+1)}})),soundTheme:"default",styleTheme:"default",users:["itoyxd@gmail.com"],isArcadeMode:function(){return m.platform===h[0]},isHomeMode:function(){return m.platform===h[1]},isMarketMode:function(){return m.platform===h[2]}};m.defaultSelectedGame=m.isMarketMode()?f.oneRoundCountUp:void 0;var b=m,g=n(64),p=n(69),j=n(39);g.a.use(p.a).use(j.e).init({resources:{en:{translations:{", ":", ","01 game":"01 game","1 player":"1 player","2 players":"2 players","3 players":"3 players","4 players":"4 players",2165:"2165",301:"301",501:"501",701:"701",Back:"Back","Bust \ud83d\ude31":"Bust \ud83d\ude31","Co-op 1001":"Co-op 1001","Connect dartboard":"Connect dartboard","Count-up":"Count-up","Game on":"Game on","Game over":"\ud83c\udfc6 Game over \u270c\ufe0f","Ninja count-up":"Ninja count-up","No such platform mode!":"No such platform mode!","One bull":"One bull","Player 1":"Player 1","Player 2":"Player 2","Player 3":"Player 3","Player 4":"Player 4","Press \ud83d\udd34 to change player":"Press \ud83d\udd34 to change player","Press \ud83d\udd34 to next round":"Press \ud83d\udd34 to next round",Rounds:"Rounds","\ud83d\ude31 Bust \ud83d\udc94":"\ud83d\ude31 Bust \ud83d\udc94","\ud83d\ude31 You failed \ud83d\udc94":"\ud83d\ude31 You failed \ud83d\udc94",bullseyeAward:"\ud83d\udd25 {{bull}} \ud83c\udfaf",credit:"Credit: {{credit}}",moreCoins:"Need {{coins}} more coins to insert",requiredCredits:"{{credit}} credits",score:"{{score}} points",version:"Version: {{version}}",winnersAward:"\ud83c\udfc6 {{name}} wins! \u270c\ufe0f",winnersAwardForThreeDartsOnePrizeGame:"\ud83c\udfc6 {{names}} gets free credits! \u270c\ufe0f"}},zh:{translations:{", ":"\u3001","01 game":"01 \u904a\u6232","1 player":"\u4e00\u540d\u73a9\u5bb6","2 players":"\u5169\u540d\u73a9\u5bb6","3 players":"\u4e09\u540d\u73a9\u5bb6","4 players":"\u56db\u540d\u73a9\u5bb6",2165:"\u8cb3\u58f9\u9678\u4f0d",301:"\u53c3\u96f6\u58f9",501:"\u4f0d\u96f6\u58f9",701:"\u67d2\u96f6\u58f9",Back:"\u4e0a\u4e00\u9801","Bust \ud83d\ude31":"\u7206 \ud83d\ude31","Co-op 1001":"\u6436\u5c3e\u5200","Connect dartboard":"\u9023\u63a5\u98db\u93e2\u9776","Count-up":"\u5206\u6578\u8dd1\u8d77\u4f86","Game on":"\u958b\u59cb\u904a\u6232","Game over":"\ud83c\udfc6 \u904a\u6232\u7d50\u675f \u270c\ufe0f","Ninja count-up":"\u5fcd\u8005\u306e\u624b\u88cf\u528d","No such platform mode!":"\u6c92\u6709\u9019\u500b\u5e73\u53f0\u6a21\u5f0f\uff01","One bull":"\u4e00\u96bb\u7a7f\u96f2\u7d05\u5fc3\u7bad \ud83d\ude1c","Player 1":"\u53f0\u5ba2","Player 2":"\u7063\u7063","Player 3":"\u91d1\u8001","Player 4":"\u93e2\u54e5","Press \ud83d\udd34 to change player":"\u6309 \ud83d\udd34 \u63db\u4e0b\u4e00\u500b\u73a9\u5bb6","Press \ud83d\udd34 to next round":"\u6309 \ud83d\udd34 \u5230\u4e0b\u4e00\u500b\u56de\u5408",Rounds:"\u56de\u5408","\ud83d\ude31 Bust \ud83d\udc94":"\ud83d\ude31 Bust \u6b98\u5ff5 \ud83d\udc94","\ud83d\ude31 You failed \ud83d\udc94":"\ud83d\ude31 \u5931\u6557\u4e86 \ud83d\udc94",bullseyeAward:"\ud83d\udd25 {{bull}} \ud83c\udfaf",credit:"\u9ede\u6578\uff1a{{credit}}",moreCoins:"\u9084\u9700\u8981\u6295\u5165 {{coins}} \u679a\u786c\u5e63",requiredCredits:"{{credit}} \u9ede\u6578",score:"{{score}} \u5206",version:"\u7248\u672c\uff1a{{version}}",winnersAward:"\ud83c\udfc6 {{name}}\u7372\u52dd\uff01 \u270c\ufe0f",winnersAwardForThreeDartsOnePrizeGame:"\ud83c\udfc6 {{names}}\u7372\u5f97\u4e86\u514d\u8cbb\u7684\u9ede\u6578\uff01 \u270c\ufe0f"}}},fallbackLng:"en",debug:!0,ns:["translations"],defaultNS:"translations",keySeparator:">",nsSeparator:"|",interpolation:{escapeValue:!1}});var O=g.a,y={colors:{blue:"#01befe",yellow:"#ffdd00",orange:"#ff7d00",red:"#ff006d",green:"#adff02",purple:"#8f00ff",black:"#000000"},contrastText:"#ffffff"},v=1602,S=1601,x=1600,C=Object(l.a)({palette:{default:y,happy:y},players:[y.colors.blue,y.colors.red,y.colors.yellow,y.colors.purple],gameAward:{zIndex:v},gameMessage:{zIndex:S},gameScore:{zIndex:x},typography:{fontFamily:['"Russo One"','"Noto Serif TC"',"-apple-system","BlinkMacSystemFont",'"Segoe UI"',"Roboto",'"Helvetica Neue"',"Arial","sans-serif",'"Apple Color Emoji"','"Segoe UI Emoji"','"Segoe UI Symbol"'].join(",")},overrides:{MuiDialog:{root:{zIndex:"".concat(S," !important")}},MuiListItem:{root:{textTransform:"uppercase"}},MuiSnackbar:{root:{zIndex:"".concat(S," !important")}}}}),I=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,153)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,s=t.getLCP,o=t.getTTFB;n(e),r(e),a(e),s(e),o(e)}))},P=s.a.createContext({credit:0,increaseCredit:function(){},decreaseCredit:function(){}}),T=n(13);function w(e){var t=e.children,n=Object(a.useState)(0),s=Object(T.a)(n,2),o=s[0],c=s[1];return Object(r.jsx)(P.Provider,{value:{credit:o,increaseCredit:function(e){return"number"===typeof e&&e>0&&c((function(t){return t+e}))},decreaseCredit:function(e){return"number"===typeof e&&e>0&&c((function(t){return t-e}))}},children:t})}var k=s.a.createContext({backgroundImage:{},setBackgroundImage:function(){},setRandomBackgroundImage:function(){}}),G=n(3),D=function e(t){var n=this;Object(G.a)(this,e),this.timerId="",this.watch=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:500;n.timerId=window.setInterval((function(){n.prevArray.length!==n.array.length&&(n.prevArray=Object(d.a)(n.array),e&&"function"===typeof e&&e(n.array))}),t)},this.stop=function(){return window.clearInterval(n.timerId)},this.array=t,this.prevArray=Object(d.a)(t)},E=n(5),A=[{name:"Binz Beach",country:"Germany",url:"/resources/images/background/binz-beach.jpg"},{name:"Hallstatt",country:"Austria",url:"/resources/images/background/hallstatt.jpg"},{name:"King's Chair Beach",country:"Germany",url:"/resources/images/background/kings-chair-beach.jpg"},{name:"Lifeguards Nearby Pier Sellin",country:"Germany",url:"/resources/images/background/lifeguards-nearby-pier-sellin.jpg"},{name:"Pier Sellin",country:"Germany",url:"/resources/images/background/pier-sellin.jpg"},{name:"Sellin Dog Beach",country:"Germany",url:"/resources/images/background/sellin-dog-beach.jpg"},{name:"Sellin East Train Station",country:"Germany",url:"/resources/images/background/sellin-east-train-station.jpg"}],R=function(){function e(){Object(G.a)(this,e),this.imageIndex=this.randomIndex}return Object(E.a)(e,[{key:"randomIndex",get:function(){return Math.floor(Math.random()*Math.floor(A.length))}},{key:"randomImage",get:function(){var e;do{e=this.randomIndex}while(e===this.imageIndex&&A.length>1);return this.imageIndex=e,A[e]}}]),e}(),N=n(74);var M=new(n.n(N).a),L=function e(){var t=this;Object(G.a)(this,e),this.connected=!1,this.connect=function(){return new Promise((function(e){document.addEventListener("keypress",t.handleCoinInsert),t.connected=!0,e()}))},this.disconnect=function(){return new Promise((function(e){document.removeEventListener("keypress",t.handleCoinInsert),t.connected=!1,e()}))},this.handleCoinInsert=function(e){var t=e.ctrlKey,n=e.key;!0!==t||"i"!==n&&"I"!==n||M.emit("COIN_INSERT")}},B=function e(){var t=this;Object(G.a)(this,e),this.connected=!1,this.connect=function(){return new Promise((function(e){document.ondblclick=function(){return M.emit("COIN_INSERT")},t.connected=!0,e()}))},this.disconnect=function(){return new Promise((function(e){document.ondblclick=null,t.connected=!1,e()}))}},U=function(){function e(){Object(G.a)(this,e)}return Object(E.a)(e,null,[{key:"create",value:function(e){switch(e){case"mouse":return new B;case"keyboard":default:return new L}}}]),e}(),_=n(15),H=n(20),z=n(34),F=n(32),K=n(16),V={steelTip:"steel-tip",softTip:"soft-tip"},Y={builtIn:"built-in",usb:"usb",bluetooth:"bluetooth"},J=function e(){var t=this;Object(G.a)(this,e),this.type=V.softTip,this.connection=Y.builtIn,this.isSteelTipType=function(){return t.type===V.steelTip},this.isSoftTipType=function(){return t.type===V.softTip},this.isBuiltInConnection=function(){return t.connection===Y.builtIn},this.isUsbConnection=function(){return t.connection===Y.usb},this.isBluetoothConnection=function(){return t.connection===Y.bluetooth}};J.types=V,J.connections=Y;var q={841888576:"S1I",841889088:"S1O",841889344:"D1",841888832:"T1",959328576:"S2I",959328832:"S2O",942551616:"D2",959328320:"T2",925774144:"S3I",925774400:"S3O",942552128:"D3",925773888:"T3",808333632:"S4I",808334656:"S4O",808334912:"D4",808334144:"T4",892219712:"S5I",892220480:"S5O",875443776:"D5",892219968:"T5",825110592:"S6I",825111360:"S6O",875443264:"D6",825110848:"T6",211278508352:"S7I",211278509120:"S7O",942552640:"D7",211278508608:"T7",908997184:"S8I",908997952:"S8O",908998208:"D8",908997696:"T8",959329088:"S9I",959329600:"S9O",959329856:"D9",959329344:"T9",841887808:"S10I",841888320:"S10O",875443008:"D10",841888064:"T10",925774656:"S11I",925775168:"S11O",925775424:"D11",925774912:"T11",892219456:"S12I",892220736:"S12O",892220992:"D12",892220224:"T12",808333376:"S13I",808334400:"S13O",875443520:"D13",808333888:"T13",211261731648:"S14I",211261732160:"S14O",211261732416:"D14",211261731904:"T14",858665024:"S15I",858665536:"S15O",875442752:"D15",858665280:"T15",211278508096:"S16I",211278509376:"S16O",211278509632:"D16",211278508864:"T16",211261731136:"S17I",211261731392:"S17O",942551872:"D17",211261730880:"T17",825111104:"S18I",825111872:"S18O",825112128:"D18",825111616:"T18",908996928:"S19I",908997440:"S19O",942552384:"D19",908996672:"T19",858665792:"S20I",858666304:"S20O",858666560:"D20",858666048:"T20",942551104:"SBULL",875442240:"DBULL",1112821312:"CHANGE"},Q=function(e){Object(_.a)(n,e);var t=Object(H.a)(n);function n(){var e;return Object(G.a)(this,n),(e=t.call(this,"GRANBOARD","442f1570-8a00-9a28-cbe1-e1d4212d53eb","442f1571-8a00-9a28-cbe1-e1d4212d53eb")).map=q,e}return n}(function(e){Object(_.a)(n,e);var t=Object(H.a)(n);function n(e,r,a){var s,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return Object(G.a)(this,n),(s=t.call(this)).connection=J.connections.bluetooth,s.valid=!0,s.map=null,s.device=null,s.characteristic=null,s.connect=function(){var e=Object(K.a)(s),t=e.deviceName,n=e.serviceUuid,r=e.options;return s.connected?Promise.resolve():navigator.bluetooth.requestDevice({filters:[{name:t},{services:[n]}]}).then((function(e){return s.device=e,r.autoReconnect&&e.addEventListener("gattserverdisconnected",s.connectGattServer),s.connectGattServer()}))},s.disconnect=function(){var e=Object(K.a)(s),t=e.characteristic,n=e.device,r=e.options;return t?t.stopNotifications().then((function(){return t.removeEventListener("characteristicvaluechanged",s.handleDartboardHit)})).then((function(){return s.connected?(r.autoReconnect&&n.removeEventListener("gattserverdisconnected",s.connectGattServer),n.gatt.disconnect()):Promise.resolve()})):Promise.resolve()},s.connectGattServer=function(){var e=Object(K.a)(s),t=e.device,n=e.serviceUuid,r=e.characteristicUuid;return t.gatt.connect().then((function(e){return e.getPrimaryService(n)})).then((function(e){return e.getCharacteristic(r)})).then((function(e){return s.characteristic=e,e.startNotifications()})).then((function(){return s.characteristic.addEventListener("characteristicvaluechanged",s.handleDartboardHit),Promise.resolve()}))},s.handleDartboardHit=function(e){for(var t=e.target.value,n=[],r=0;r<t.byteLength;r++)n.push(("00"+t.getUint8(r).toString(16)).slice(-2));var a=s.map[parseInt("0x".concat(n.join("")))];a&&("CHANGE"!==a?M.emit("DARTBOARD_HIT",a):M.emit("CHANGE_BUTTON_CLICK"))},navigator.bluetooth?(s.deviceName=e,s.serviceUuid=r,s.characteristicUuid=a,s.options=Object(z.a)({autoReconnect:!0},o),s.map={},s):(console.warn("Web Bluetooth is not supported."),Object(F.a)(s,{valid:!1}))}return Object(E.a)(n,[{key:"connected",get:function(){return this.device&&this.device.gatt.connected}}]),n}(J)),W={32:"S1I",33:"S1O",34:"D1",35:"T1",36:"S2I",37:"S2O",38:"D2",39:"T2",40:"S3I",41:"S3O",42:"D3",43:"T3",44:"S4I",45:"S4O",46:"D4",47:"T4",48:"S5I",49:"S5O",50:"D5",51:"T5",52:"S6I",53:"S6O",54:"D6",55:"T6",56:"S7I",57:"S7O",58:"D7",59:"T7",60:"S8I",61:"S8O",62:"D8",63:"T8",64:"S9I",65:"S9O",66:"D9",67:"T9",68:"S10I",69:"S10O",70:"D10",71:"T10",72:"S11I",73:"S11O",74:"D11",75:"T11",76:"S12I",77:"S12O",78:"D12",79:"T12",80:"S13I",81:"S13O",82:"D13",83:"T13",84:"S14I",85:"S14O",86:"D14",87:"T14",88:"S15I",89:"S15O",90:"D15",91:"T15",92:"S16I",93:"S16O",94:"D16",95:"T16",96:"S17I",97:"S17O",98:"D17",99:"T17",100:"S18I",101:"S18O",102:"D18",103:"T18",104:"S19I",105:"S19O",106:"D19",107:"T19",108:"S20I",109:"S20O",110:"D20",111:"T20",112:"SBULL",113:"DBULL",114:"OUT",115:"CHANGE"},Z=function(e){Object(_.a)(n,e);var t=Object(H.a)(n);function n(){var e;return Object(G.a)(this,n),(e=t.call(this)).connection=J.connections.builtIn,e.connected=!1,e.map=null,e.connect=function(){return document.addEventListener("keypress",e.handleDartboardHit),e.connected=!0,Promise.resolve()},e.disconnect=function(){return document.removeEventListener("keypress",e.handleDartboardHit),e.connected=!1,Promise.resolve()},e.handleDartboardHit=function(t){var n=Object(K.a)(e).map,r=t.key.charCodeAt(0);!1===t.ctrlKey&&r>=32&&r<=114?M.emit("DARTBOARD_HIT",n[r]):"CHANGE"===n[r]&&M.emit("CHANGE_BUTTON_CLICK")},e.map=W,e}return n}(J),$=function(){function e(){Object(G.a)(this,e)}return Object(E.a)(e,null,[{key:"create",value:function(e){switch(e){case"granboard":return new Q;case"keyboard":default:return new Z}}}]),e}(),X=b.isMarketMode,ee=O.getFixedT(),te={back:{id:"back",type:"sound",block:!1,soundEffect:"back"},bust:{id:"bust",type:"dialog",text:ee("\ud83d\ude31 Bust \ud83d\udc94"),block:!0,soundEffect:"bust"},dart:{id:"dart",type:"sound",block:!1,soundEffect:"dart"},dbull:function(e){return{id:"dbull",type:"snackbar",text:ee("bullseyeAward",{bull:e}),autoHideDuration:1500,block:!1,soundEffect:"dbull"}},fail:{id:"fail",type:"dialog",text:ee("\ud83d\ude31 You failed \ud83d\udc94"),block:!0,soundEffect:"fail"},gameOn:{id:"gameOn",type:null,block:!1},hatTrick:{id:"hatTrick",type:"animationDialog",autoHideDuration:1500,block:!1},highTon:{id:"highTon",type:"animationDialog",autoHideDuration:1500,block:!1},lowTon:{id:"lowTon",type:"animationDialog",autoHideDuration:1500,block:!1},next:{id:"next",type:"sound",block:!1,soundEffect:"next"},nextPlayer:{id:"nextPlayer",type:"dialog",text:ee("Press \ud83d\udd34 to change player"),block:!0},nextRound:{id:"nextRound",type:"dialog",text:ee("Press \ud83d\udd34 to next round"),block:!0},oneBull:{id:"oneBull",type:"animationDialog",autoHideDuration:1500,block:!1},prizeForThreeDartsOnePrizeGame:function(e){return{id:"prizeForThreeDartsOnePrizeGame",type:"dialog",text:ee("winnersAwardForThreeDartsOnePrizeGame",{names:e}),block:!0,soundEffect:"win"}},sbull:function(e){return{id:"sbull",type:"snackbar",text:ee("bullseyeAward",{bull:e}),autoHideDuration:1500,block:!1,soundEffect:"sbull"}},score:function(e){return{id:"score",type:"speech",text:ee("score",{score:e}),block:!1}},win:function(e){return{id:"win",type:"dialog",text:X()?ee("Game over"):ee("winnersAward",{name:e}),block:!0,soundEffect:"win"}}},ne=function(){function e(){Object(G.a)(this,e)}return Object(E.a)(e,null,[{key:"create",value:function(e,t){var n=null;return te[e]&&(n="function"===typeof te[e]?te[e](t):te[e]),n}}]),e}(),re=function(){function e(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"OUT",r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{type:"SOFT_TIP"};if(Object(G.a)(this,e),this.valid=!0,this.toValue=function(){var e,n=t.symbol,r=t.toDisplaySymbol(),a=r.slice(1,n.length);switch(r.charAt(0)){case"S":e="BULL"===a?50:parseInt(a,10);break;case"D":e="BULL"===a?50:2*parseInt(a,10);break;case"T":e=3*parseInt(a,10);break;case"O":case"B":default:e=0}return e},this.toDisplaySymbol=function(){var e=t.symbol;return"I"===e.slice(-1)||"O"===e.slice(-1)?e.slice(0,e.length-1):e},!e.isValid(n))return{valid:!1};this.symbol=n,this.index=r,this.options=a,this.displaySymbol=this.toDisplaySymbol(),this.value=this.toValue()}return Object(E.a)(e,null,[{key:"isValid",value:function(e){var t=!1;if(/^S\d{1,2}I$/.test(e)||/^S\d{1,2}O$/.test(e)){var n=parseInt(e.slice(1,e.length-1),10);t=n>=1&&n<=20}else if(/^[DT]\d{1,2}$/.test(e)){var r=parseInt(e.slice(1,e.length),10);t=r>=1&&r<=20}else(/^[SD]BULL$/.test(e)||"OUT"===e||"BUST"===e)&&(t=!0);return t}},{key:"isInnerSingle",value:function(t){return e.isValid(t)&&t.startsWith("S")&&t.endsWith("I")}}]),e}(),ae=function e(t){var n=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Object(G.a)(this,e),this.scores=[],this.addScore=function(e){try{if(n.isNewScoreAddable()){var t;if(e instanceof re?(t=e).index=n.scores.length:t=new re(e,n.scores.length,n.options),!t.valid)throw new Error("The `score` is invalid!");return n.scores.push(t),t}throw new Error("The `scores` array cannot contain more than 3 Score objects!")}catch(r){return console.error(r),null}},this.getCurrentScore=function(){return n.scores[n.scores.length-1]},this.isNewScoreAddable=function(){return n.scores.length<n.options.scoresPerRound&&!n.scores.some((function(e){return"BUST"===e.symbol}))},this.index=t,this.options=r,this.options.scoresPerRound||(this.options.scoresPerRound=3)},se=function e(t){var n=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Object(G.a)(this,e),this.rounds=[],this.addScore=function(e){var t=n.getCurrentRound();return t&&t.isNewScoreAddable()||(t=n.addRound()),t?t.addScore(e):null},this.addRound=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new ae(n.rounds.length,n.options);try{if(!(n.rounds.length<n.roundsLength))throw new Error("The `rounds` array cannot contain more than ".concat(n.roundsLength," Round objects!"));return n.rounds.push(e),e}catch(t){return console.error(t),null}},this.getCurrentRound=function(){return n.rounds[n.rounds.length-1]},this.removeCurrentRound=function(){return n.rounds.pop()},this.isLastRoundFinished=function(){var e=n.getCurrentRound();return n.rounds.length===n.roundsLength&&e&&!e.isNewScoreAddable()},this.roundsLength=t,this.options=r},oe=function(){function e(){Object(G.a)(this,e)}return Object(E.a)(e,null,[{key:"isBullseye",value:function(e){return"SBULL"===e.symbol||"DBULL"===e.symbol}},{key:"getMessage",value:function(t){var n=null;if(t instanceof re)if(e.isBullseye(t)){var r=t.symbol.toLowerCase();n=ne.create(r,r)}else n=ne.create("dart");else if(t instanceof ae){var a=t.scores,s=ie(a),o=ce(a);s<100&&1===o?n=ne.create("oneBull"):s>=100&&s<150||3===o||s>=151||(n=ne.create("score",s))}return n}}]),e}(),ce=function(e){var t=0;return e.forEach((function(e){return("SBULL"===e.symbol||"DBULL"===e.symbol)&&t++})),t},ie=function(e){var t=0;return e.forEach((function(e){return t+=e.toValue()})),t},ue=n(75),le=n(10),de=function(){function e(t,n){var r=this,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{scoresPerRound:3};Object(G.a)(this,e),this.currentPlayerIndex=-1,this.currentPlayerDartScores=[],this.gameScores=[],this.messages=[],this.players=[],this.rounds=0,this.scoreboards=[],this.isLastRound=function(){return r.currentPlayer===r.lastPlayer&&r.lastPlayerScoreboard.rounds.length===r.rounds},this.isLastRoundFinished=function(){return r.scoreboards[r.players.length-1].isLastRoundFinished()},this.addScoreForCurrentPlayer=function(e){var t=r.scoreboards[r.currentPlayerIndex].addScore(e);return t?(r.currentPlayerDartScores.length<3?r.currentPlayerDartScores=r.currentPlayerDartScores.concat(t):r.currentPlayerDartScores=[t],t):null},this.addRoundForCurrentPlayer=function(e){var t=r.scoreboards[r.currentPlayerIndex].addRound(e);return t&&(r.currentPlayerDartScores=t.scores),t},this.deleteCurrentRoundForCurrentPlayer=function(){var e=r.scoreboards[r.currentPlayerIndex].removeCurrentRound(),t=r.scoreboards[r.currentPlayerIndex].getCurrentRound();return r.currentPlayerDartScores=t?t.scores:[],e},this.addMessage=function(e){return e&&(r.messages=r.messages.concat(e))},this.deleteMessage=function(e){var t=r.messages.findIndex((function(t){return t.id=e}));-1!==t&&r.messages.splice(t,1)},this.clearMessages=function(){return r.messages=[]},this.setCurrentPlayerIndex=function(e){return r.currentPlayerIndex=e},this.setCurrentPlayerGameScore=function(e){return r.gameScores[r.currentPlayerIndex]=e},this.setPlayerGameScore=function(e,t){return r.gameScores[e]=t},this.increaseCurrentPlayerGameScore=function(e){return r.setCurrentPlayerGameScore(r.currentPlayerGameScore+e)},this.decreaseCurrentPlayerGameScore=function(e){return r.setCurrentPlayerGameScore(r.currentPlayerGameScore-e)},Object(le.e)(this,{currentPlayerIndex:le.f,currentPlayerDartScores:le.f,gameScores:le.f,messages:le.f,players:le.f,scoreboards:le.f,currentPlayer:le.c,currentPlayerGameScore:le.c,currentPlayerScoreboard:le.c,addScoreForCurrentPlayer:le.b,addRoundForCurrentPlayer:le.b,deleteCurrentRoundForCurrentPlayer:le.b,addMessage:le.b,deleteMessage:le.b,clearMessages:le.b,setCurrentPlayerIndex:le.b,setCurrentPlayerGameScore:le.b,setPlayerGameScore:le.b,increaseCurrentPlayerGameScore:le.b,decreaseCurrentPlayerGameScore:le.b}),this.players=t,t.forEach((function(e,t){r.scoreboards[t]=new se(n,{scoresPerRound:s.scoresPerRound}),r.scoreboards[t].addRound(),r.gameScores[t]=a})),this.rounds=n,this.currentPlayerIndex=0}return Object(E.a)(e,[{key:"currentPlayer",get:function(){return this.players[this.currentPlayerIndex]}},{key:"currentPlayerGameScore",get:function(){return this.gameScores[this.currentPlayerIndex]}},{key:"currentPlayerScoreboard",get:function(){return this.scoreboards[this.currentPlayerIndex]}},{key:"lastPlayer",get:function(){return this.players[this.players.length-1]}},{key:"lastPlayerScoreboard",get:function(){return this.scoreboards[this.players.length-1]}}]),e}(),he=function(){function e(){Object(G.a)(this,e)}return Object(E.a)(e,null,[{key:"has",value:function(e){return b.users.includes(e)}}]),e}(),fe={isLogined:!0},me={isLogined:!1},be=function e(t){var n=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"91304192363-7fr8mvjp3ph628joqchr32d1iu2lr38l.apps.googleusercontent.com",a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"https://tjdarts.github.io";Object(G.a)(this,e),this.auth=function(){return n.isLogined().then((function(e){if(!e.isLogined){var t,r={},a=new URLSearchParams(window.location.hash.substring(1)),s=Object(ue.a)(a);try{for(s.s();!(t=s.n()).done;){var o=Object(T.a)(t.value,2),c=o[0],i=o[1];r[c]=i}}catch(u){s.e(u)}finally{s.f()}if(Object.keys(r).length>0){if(localStorage.setItem(n.storageItemName,JSON.stringify(r)),r.state&&"try_sample_request"===r.state)return n.isLogined()}else n.openSignInForm()}return Promise.resolve(e)}))},this.isLogined=function(){return new Promise((function(e){"none"===navigator.connection.type&&(new pe("offline-token").auth()?e(fe):e(me));var t=JSON.parse(localStorage.getItem(n.storageItemName));if(t&&t.access_token){var r=new XMLHttpRequest;r.open("GET","https://people.googleapis.com/v1/people/me?personFields=emailAddresses&access_token=".concat(t.access_token)),r.onreadystatechange=function(){try{if(4===r.readyState)if(200===r.status){var t=JSON.parse(r.response).emailAddresses[0].value;he.has(t)?e(fe):e(me)}else e(me)}catch(n){console.error(n),e(me)}},r.send(null)}else e(me)}))},this.openSignInForm=function(){var e=document.createElement("form");e.setAttribute("method","GET"),e.setAttribute("action","https://accounts.google.com/o/oauth2/v2/auth");var t={client_id:n.clientId,redirect_uri:n.redirectUri,scope:"profile https://www.googleapis.com/auth/user.emails.read",state:"try_sample_request",response_type:"token"};for(var r in t){var a=document.createElement("input");a.setAttribute("type","hidden"),a.setAttribute("name",r),a.setAttribute("value",t[r]),e.appendChild(a)}document.body.appendChild(e),e.submit()},this.storageItemName=t,this.clientId=r,this.redirectUri=a},ge=n(60),pe=function e(t){var n=this;Object(G.a)(this,e),this.auth=function(){var e=!1;try{var t=localStorage.getItem(n.storageItemName);if(t){var r=ge.KEYUTIL.getKey("-----BEGIN PUBLIC KEY-----MIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEAqOyWDJ0ngQQ0jOxmSBi4IOuonz6A9Ipi/AK9rXw6Pnyd5ji1800AygLavE4ZdQIYOvthAKNmAfBA00on5VmnmwHqUDmYvS3hJTSKJFGbjkEzyl+KUQoKA2AvlLmHhjVdegwxYwmgnrkAKCeMNOHA5V7ITFMLaEnTGjviingdP2RMrMBFooBHQOZL7k5uTqz8CH+yvS5/Y/eIkFPSUzqAWKNMLASUJfmQ/Sfo74+pLz0FJYY6diUdi4vx0yj93ADG1A9VF8YQ2CkorOoPwEvTRi7V8rW91H8zh1eP9IDfBgOnRjgtCiNyIlBfUWEaR6J/SIHJC8eYcyFCMDFcqinRuQIDAQAB-----END PUBLIC KEY-----");e=ge.KJUR.jws.JWS.verifyJWT(t,r,{alg:["RS256"]})}return e}catch(a){return e}},this.storageItemName=t},je=O.getFixedT(),Oe=function(){function e(t){Object(G.a)(this,e),this._players=t}return Object(E.a)(e,[{key:"players",get:function(){return this._players.map((function(e,t){return{name:je(e.name),index:t}}))}}]),e}(),ye=n(61),ve={default:["back","bust","coin","dart","dbull","fail","game_on","hover","next","press","sbull","warn","win"],ninja:["bgm","dart","sbull","dbull"],"3-darts-1-prize":["bgm"]},Se=new function e(){var t=this;Object(G.a)(this,e),this.theme="default",this.soundEffects={},this.play=function(e){return new Promise((function(n){!t.soundEffects[e]&&n(),t.soundEffects[e].on("end",n),t.soundEffects[e].play()}))},this.stop=function(e){return t.soundEffects[e]&&t.soundEffects[e].stop()},this.setTheme=function(e){ve[e]&&(t.theme=e),t.loadSoundEffects()},this.loadSoundEffects=function(){ve[t.theme].forEach((function(e){t.soundEffects[e]=new ye.Howl({src:["/resources/sound-effects/".concat(t.theme,"/").concat(e,".webm")],volume:"bgm"===e?.2:1,loop:"bgm"===e}),t.soundEffects[e].on("loaderror",(function(){t.soundEffects[e]=new ye.Howl({src:["/resources/sound-effects/default/".concat(e,".webm")],volume:"bgm"===e?.2:1,loop:"bgm"===e})}))}))},this.setTheme(this.theme),b.soundTheme&&"default"!==b.soundTheme&&this.setTheme(b.soundTheme)},xe=window.speechSynthesis,Ce=function(){function e(t){var n=this;Object(G.a)(this,e),this.speak=function(e){if(xe&&!xe.speaking){var t=new SpeechSynthesisUtterance(e);t.voice=n.voice,xe.speak(t)}},this.lang=t,this.voices=xe.getVoices()}return Object(E.a)(e,[{key:"voice",get:function(){var e=this.lang,t=this.voices,n=e.includes("zh")?"Google \u570b\u8a9e\uff08\u81fa\u7063\uff09":"Daniel",r=t.findIndex((function(e){return e.name===n}));return r?t[r]:t[0]}}]),e}(),Ie=new R;function Pe(e){var t=e.children,n=Object(a.useState)(Ie.randomImage),s=Object(T.a)(n,2),o=s[0],c=s[1];return Object(r.jsx)(k.Provider,{value:{backgroundImage:o,setBackgroundImage:c,setRandomBackgroundImage:function(){return c(Ie.randomImage)}},children:t})}var Te=s.a.createContext({isLogined:!1});function we(e){var t=e.children,n=Object(a.useState)({isLogined:!1}),s=Object(T.a)(n,2),o=s[0],c=s[1];return Object(a.useEffect)((function(){new be("oauth2-tjdart-params").auth().then((function(e){return c(e)}))}),[c]),Object(r.jsx)(Te.Provider,{value:o,children:t})}var ke=n(27),Ge=n(11),De=n(76),Ee=n(135),Ae=n(151),Re=n(9),Ne=function(e){return{root:function(t){var n;return n={height:"100vh",overflowX:"hidden"},Object(Re.a)(n,e.breakpoints.between("sm","xl"),{overflowY:"hidden"}),Object(Re.a)(n,"backgroundImage","url(".concat(t.backgroundImageUrl,")")),Object(Re.a)(n,"backgroundPosition","center"),Object(Re.a)(n,"backgroundRepeat","no-repeat"),Object(Re.a)(n,"backgroundSize","cover"),n},credit:{position:"fixed",bottom:"24px",right:"24px"}}},Me={game:{},players:[]},Le=Object(De.a)(),Be=Object(Ee.a)(Ne);function Ue(){var e=Object(Ae.a)().t,t=b.isArcadeMode,n=b.isHomeMode,s=b.isMarketMode,o=Object(a.useContext)(Te),c=Object(a.useContext)(k).backgroundImage,i=Be({backgroundImageUrl:c.url});return Object(a.useEffect)((function(){var e=$.create(b.dartboard),n=U.create(b.coinAcceptor),r=function(e,t){var n=b.defaultGames.find((function(e){return"threeDartsOnePrize"===e.id}));n&&(n.platforms="3-darts-1-prize"===e&&t.length?[]:["arcade"])};if(e.isBluetoothConnection()?Le.push("/options"):e.connect(),t()&&(n.connect(),M.on("GAME_OVER",r)),s()){var a=new Oe(b.players).players;Me.game=b.defaultSelectedGame,Me.players=[a[0]]}return function(){e.disconnect(),t()&&(n.disconnect(),M.off("GAME_OVER",r))}}),[]),Object(r.jsx)("div",{className:i.root,children:o.isLogined&&(t()||n()?Object(r.jsxs)(ke.a,{children:[Object(r.jsxs)(Ge.d,{children:[Object(r.jsx)(Ge.b,{path:"/game-menu/:step",render:function(){return Object(r.jsx)(at,{appState:Me})}}),Object(r.jsx)(Ge.b,{path:"/game",render:function(){return Object(r.jsx)(Ot,{game:Me.game,players:Me.players})}}),Object(r.jsx)(Ge.b,{path:"/options",render:function(){return Object(r.jsx)(Lt,{})}}),Object(r.jsx)(Ge.b,{render:function(){return Object(r.jsx)(Ge.a,{to:"/game-menu/games"})}})]}),t()&&Object(r.jsx)(We,{appState:Me})]}):s()?Object(r.jsx)(ke.a,{children:Object(r.jsxs)(Ge.d,{children:[Object(r.jsx)(Ge.b,{path:"/game",render:function(){return Object(r.jsx)(Ot,{game:Me.game,players:Me.players})}}),Object(r.jsx)(Ge.b,{path:"/options",render:function(){return Object(r.jsx)(Lt,{})}}),Object(r.jsx)(Ge.b,{render:function(){return Object(r.jsx)(Ge.a,{to:"/game"})}})]})}):Object(r.jsx)(rn,{variant:"h2",children:e("No such platform mode!")}))})}var _e=n(137),He=n(38),ze=function(e){return{score:{color:function(t){return"".concat(e.players[t.index],"e0")},fontSize:"27rem",textShadow:"-10px 0 white, 0 10px white, 10px 0 white, 0 -10px white"}}},Fe=Object(Ee.a)(ze);function Ke(e){var t=e.score,n=e.index,a=Fe({index:n});return Object(r.jsx)(He.a,{className:a.score,variant:"h1",align:"center",children:t})}var Ve=function(e){return{gameName:{margin:"24px",textTransform:"uppercase",textShadow:"-3px 0 white, 0 3px white, 3px 0 white, 0 -3px white"},gameScore:{display:"flex",justifyContent:"center",alignItems:"center",position:"fixed",zIndex:e.gameScore.zIndex,top:0,left:0,width:"100%",height:"100%"},scoreboard:{float:"left",marginLeft:"24px"},scores:{float:"right",width:"220px"},playerCards:{position:"fixed",bottom:0,left:0}}},Ye=Object(Ee.a)(Ve);function Je(e){var t=e.name,n=e.player,a=e.players,o=e.dartScores,c=e.scoreboard,i=e.gameScore,u=e.gameScores,l=Object(Ae.a)().t,d=Ye();return Object(r.jsxs)("div",{children:[Object(r.jsx)("div",{className:d.gameScore,children:Object(r.jsx)(Ke,{index:n.index,name:n.name,score:i})}),Object(r.jsx)(rn,{className:d.gameName,variant:"h4",align:"center",children:l(t)}),c.roundsLength>1&&Object(r.jsxs)(s.a.Fragment,{children:[Object(r.jsx)(Zt,{className:d.scoreboard,index:n.index,rounds:c.rounds,totalRounds:c.roundsLength}),Object(r.jsx)(en,{className:d.scores,scores:o})]}),a.length>1&&Object(r.jsx)(_e.a,{container:!0,className:d.playerCards,spacing:3,children:a.map((function(e,t){return Object(r.jsx)(_e.a,{item:!0,xs:3,children:Object(r.jsx)(Kt,{index:t,name:e.name,score:u[t],active:t===n.index})},t)}))})]})}var qe=function(e){return{root:function(e){return{position:"fixed",bottom:"24px",right:"24px",visibility:e.hidden?"hidden":"visible"}}}},Qe=Object(Ee.a)(qe);var We=Object(Ge.i)((function(e){var t=e.appState,n=e.location,s=Object(a.useContext)(P),o=s.credit,c=s.increaseCredit,i=s.decreaseCredit,u=Object(Ae.a)().t,l=Qe({hidden:"/game"===n.pathname}),d=function(){c(1),Se.play("coin")},h=function(e,n){var r=t.game,a=r.totalCredits,s=r.credit,o=a||s*t.players.length;i(o)};return Object(a.useEffect)((function(){return M.on("COIN_INSERT",d),M.on("GAME_OVER",h),function(){M.off("COIN_INSERT",d),M.off("GAME_OVER",h)}}),[]),Object(r.jsx)(rn,Object(z.a)(Object(z.a)({},e),{},{className:l.root,variant:"h4",children:u("credit",{credit:o})}))})),Ze=n(138),$e=n(139);function Xe(e){var t=e.appState,n=b.defaultGames,s=b.platform,o=Object(Ge.g)(),c=Object(Ae.a)().t,i=Object(a.useState)(Object.keys(t.game).length?n.findIndex((function(e){return e.id===t.game.id})):0),u=Object(T.a)(i,2),l=u[0],d=u[1];return Object(r.jsx)(Ze.a,{children:Object(r.jsx)(Nt,{selectedIndex:l,setSelectedIndex:d,children:n.filter((function(e){return e.platforms.includes(s)})).map((function(e,n){return Object(r.jsx)($e.a,{selected:n===l,onMouseOver:function(){return Se.play("hover")},onClick:function(){return function(e){Se.play("press"),t.game=e,o.push("/game-menu/players")}(e)},children:Object(r.jsx)(rn,{variant:"h2",children:c(e.displayName)})},n)}))})})}var et=new Oe(b.players);function tt(e){var t=e.appState,n=t.game,s=n.totalCredits,o=n.credit,c=Object(Ge.g)(),i=Object(a.useContext)(P).credit,u=et.players,l=Object(a.useState)(t.players.length?t.players.length-1:0),h=Object(T.a)(l,2),f=h[0],m=h[1],g=Object(Ae.a)().t,p=new Ce(O.language),j=b.isArcadeMode;return 0===Object.keys(t.game).length?(c.push("/game-menu/games"),null):Object(r.jsx)(Ze.a,{children:Object(r.jsxs)(Nt,{selectedIndex:f,setSelectedIndex:m,children:[Object(d.a)(Array(u.length).keys()).map((function(e){return Object(r.jsxs)($e.a,{selected:e===f,onMouseOver:function(){return Se.play("hover")},onClick:function(){return function(e){var n=s||o*e.length,r=i-n;j()&&r<0?Se.play("warn").then((function(){return p.speak(g("moreCoins",{coins:Math.abs(r)}))})):(Se.play("game_on"),t.players=e,c.push("/game"))}(u.slice(0,e+1))},children:[Object(r.jsx)(rn,{variant:"h2",children:g("".concat(e+1," player").concat(e>0?"s":""))}),j()&&Object(r.jsx)(rn,{style:{marginLeft:"24px"},variant:"h5",children:g("requiredCredits",{credit:s||o*u.slice(0,e+1).length})})]},e)})),Object(r.jsx)($e.a,{selected:u.length===f,onMouseOver:function(){return Se.play("hover")},onClick:function(){Se.play("back"),c.push("/game-menu/games")},children:Object(r.jsx)(rn,{variant:"h3",children:g("Back")})})]})})}var nt=function(e){return{root:{margin:"24px"}}},rt=Object(Ee.a)(nt);function at(e){var t=e.appState,n=rt(),a=Object(Ge.h)().step,s=function(e){switch(e.step){case"games":return Object(r.jsx)(Xe,{appState:t});case"players":return Object(r.jsx)(tt,{appState:t});default:return null}};return Object(r.jsx)("div",{className:n.root,children:Object(r.jsx)(s,{step:a})})}var st=n(147),ot={UNINITIALIZED:0,INITIALIZED:1,STARTED:2,RESUMED:3,PAUSED:4,STOPPED:5},ct=function(){function e(t){var n=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{rounds:8,scoresPerRound:3,score:0};Object(G.a)(this,e),this.state=null,this.status=ot.UNINITIALIZED,this.start=function(){(n.isInitialized()||n.isStopped())&&(n.addListeners(),M.on("CHANGE_BUTTON_CLICK",n.handleChangeButtonClick),n.status=ot.STARTED,n.resume())},this.resume=function(){(n.isStarted()||n.isPaused())&&(M.on("DARTBOARD_HIT",n.handleDartboardHit),n.status=ot.RESUMED)},this.pause=function(){n.isResumed()&&(M.off("DARTBOARD_HIT",n.handleDartboardHit),n.status=ot.PAUSED)},this.stop=function(){(n.isStarted()||n.isResumed()||n.isPaused())&&(M.off("DARTBOARD_HIT",n.handleDartboardHit),M.off("CHANGE_BUTTON_CLICK",n.handleChangeButtonClick),n.removeListeners(),n.status=ot.STOPPED)},this.addListeners=function(){M.on("GAME_START",n.start),M.on("GAME_RESUME",n.resume),M.on("GAME_PAUSE",n.pause),M.on("GAME_STOP",n.stop)},this.removeListeners=function(){M.off("GAME_START",n.start),M.off("GAME_RESUME",n.resume),M.off("GAME_PAUSE",n.pause),M.off("GAME_STOP",n.stop)},this.isInitialized=function(){return n.status===ot.INITIALIZED},this.isStarted=function(){return n.status===ot.STARTED},this.isResumed=function(){return n.status===ot.RESUMED},this.isPaused=function(){return n.status===ot.PAUSED},this.isStopped=function(){return n.status===ot.STOPPED},this.onDartboardHit=function(e){},this.onChangeButtonClick=function(){},this.onGameOver=function(){},this.handleDartboardHit=function(e){var t=n.state,r=t.addScoreForCurrentPlayer,a=t.currentPlayerScoreboard,s=r(e);s&&(n.state.addMessage(oe.getMessage(s)),s.index===n.options.scoresPerRound-1&&n.state.addMessage(oe.getMessage(a.getCurrentRound())),n.onDartboardHit(s))},this.handleChangeButtonClick=function(){n.state.isLastRound()?n.handleGameOver():(n.onChangeButtonClick(),n.switchToNextPlayer())},this.switchToNextPlayer=function(){var e=(n.state.currentPlayerIndex+1)%n.players.length;n.state.setCurrentPlayerIndex(e),n.resume()},this.handleGameMessageOnClose=function(e){e.block&&n.resume(),n.state.deleteMessage(e.id)},this.handleGameOver=function(){if(0===n.state.messages.length)n.winners.length?n.addGameMessage("win",n.winners[0].name):n.addGameMessage("fail");else{var e=new D(n.state.messages);e.watch((function(t){0===t.length&&(n.winners.length?n.addGameMessage("win",n.winners[0].name):n.addGameMessage("fail"),e.stop())}))}n.pause(),M.off("CHANGE_BUTTON_CLICK",n.handleChangeButtonClick),n.onGameOver()},this.addGameMessage=function(e,t){var r=ne.create(e,t);r&&(r.block&&n.pause(),n.state.addMessage(r))},this.clearGameMessages=function(){return n.state.clearMessages()},r.scoresPerRound=r.scoresPerRound?r.scoresPerRound:3,this.players=t,this.options=r,this.state=new de(t,r.rounds,r.score,{scoresPerRound:r.scoresPerRound}),this.status=ot.INITIALIZED}return Object(E.a)(e,[{key:"winners",get:function(){return[]}}]),e}();ct.statuses=ot;var it=function(e){Object(_.a)(n,e);var t=Object(H.a)(n);function n(){var e;Object(G.a)(this,n);for(var r=arguments.length,a=new Array(r),s=0;s<r;s++)a[s]=arguments[s];return(e=t.call.apply(t,[this].concat(a))).onDartboardHit=function(t){var n=e.state,r=n.currentPlayerScoreboard,a=n.increaseCurrentPlayerGameScore,s=n.isLastRoundFinished;a(t.value);var o=r.getCurrentRound();s()?e.handleGameOver():o&&!o.isNewScoreAddable()&&e.addGameMessage("nextPlayer")},e.onChangeButtonClick=function(){var t=e.state,n=t.addRoundForCurrentPlayer,r=t.clearMessages;n(),r(),e.addGameMessage("next")},e}return Object(E.a)(n,[{key:"winners",get:function(){var e=this,t=this.state.players.map((function(t,n){return{name:t.name,score:e.state.gameScores[n]}})).sort((function(e,t){return t.score-e.score}));return t.filter((function(e){return e.score===t[0].score}))}}]),n}(ct);function ut(e){var t=e.players,n=e.rounds,o=e.scoresPerRound,c=Object(Ge.g)();0===t.length&&c.push("/game-menu");var i=Object(a.useMemo)((function(){return new it(t,{rounds:n,scoresPerRound:o})}),[t,n,o]);Object(a.useEffect)((function(){i.isInitialized()&&(i.start(),i.onGameOver=function(){M.once("CHANGE_BUTTON_CLICK",(function(){i.clearGameMessages(),i.addGameMessage("back"),i.stop(),M.emit("GAME_OVER","count-up",i.winners),c.push("/game-menu")}))})}),[i,c]);var u=Object(st.a)((function(e){var t=e.game.state,n=t.currentPlayer,a=t.currentPlayerGameScore,s=t.currentPlayerDartScores,o=t.currentPlayerScoreboard,c=t.players,i=t.gameScores;return Object(r.jsx)(Je,{name:"Count-up",player:n,gameScore:a,dartScores:s,scoreboard:o,players:c,gameScores:i})})),l=Object(st.a)((function(e){var t=e.game,n=t.state.messages;return Object(r.jsx)(Rt,{messages:n,onClose:t.handleGameMessageOnClose})}));return Object(r.jsxs)(s.a.Fragment,{children:[Object(r.jsx)(u,{game:i}),Object(r.jsx)(l,{game:i})]})}var lt=function(e){Object(_.a)(n,e);var t=Object(H.a)(n);function n(){var e;Object(G.a)(this,n);for(var r=arguments.length,a=new Array(r),s=0;s<r;s++)a[s]=arguments[s];return(e=t.call.apply(t,[this].concat(a))).handleDartboardHit=function(t){var n=e.state,r=n.addScoreForCurrentPlayer,a=n.currentPlayerScoreboard,s=re.isInnerSingle(t)?"SBULL":"SBULL"===t?"DBULL":t,o=r(new re(s));o&&("DBULL"===o.symbol&&(o.value=100),e.state.addMessage(oe.getMessage(o)),o.index===e.options.scoresPerRound-1&&e.state.addMessage(oe.getMessage(a.getCurrentRound())),e.onDartboardHit(o))},e}return n}(it);function dt(e){var t=e.players,n=e.rounds,o=Object(Ge.g)(),c=Object(a.useContext)(k),i=c.backgroundImage,u=c.setBackgroundImage;0===t.length&&o.push("/game-menu");var l=Object(a.useMemo)((function(){return new lt(t,{rounds:n})}),[t,n]);Object(a.useEffect)((function(){if(l.isInitialized()){var e=Object(z.a)({},i),t=Se.theme;u({name:"ninja",url:"/resources/images/background/ninja.png"}),Se.setTheme("ninja"),Se.play("bgm"),l.start(),l.onGameOver=function(){M.once("CHANGE_BUTTON_CLICK",(function(){l.clearGameMessages(),l.addGameMessage("back"),l.stop(),u(e),Se.stop("bgm"),Se.setTheme(t),M.emit("GAME_OVER","ninja-count-up",l.winners),o.push("/game-menu")}))}}}),[l,o,i,u]);var d=Object(st.a)((function(e){var t=e.game.state,n=t.currentPlayer,a=t.currentPlayerGameScore,s=t.currentPlayerDartScores,o=t.currentPlayerScoreboard,c=t.players,i=t.gameScores;return Object(r.jsx)(Je,{name:"Ninja count-up",player:n,gameScore:a,dartScores:s,scoreboard:o,players:c,gameScores:i})})),h=Object(st.a)((function(e){var t=e.game,n=t.state.messages;return Object(r.jsx)(Rt,{messages:n,onClose:t.handleGameMessageOnClose})}));return Object(r.jsxs)(s.a.Fragment,{children:[Object(r.jsx)(d,{game:l}),Object(r.jsx)(h,{game:l})]})}var ht=function(e){Object(_.a)(n,e);var t=Object(H.a)(n);function n(e){var r,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{score:301,rounds:15};return Object(G.a)(this,n),(r=t.call(this,e,a)).onDartboardHit=function(e){var t=r.state,n=t.isLastRound,a=t.isLastRoundFinished,s=t.currentPlayerScoreboard;r.computePlayersGameScores(e.value);var o=s.getCurrentRound(),c=r.state.currentPlayerGameScore;0===c||n()&&c<0||a()?r.handleGameOver():c>0&&o&&!o.isNewScoreAddable()?r.addGameMessage("nextPlayer"):c<0&&r.addGameMessage("bust")},r.computePlayersGameScores=function(e){return r.state.decreaseCurrentPlayerGameScore(e)},r.onChangeButtonClick=function(){var e=r.state,t=e.addRoundForCurrentPlayer,n=e.clearMessages,a=e.currentPlayerGameScore,s=e.deleteCurrentRoundForCurrentPlayer;if(n(),a<0){var o=s();r.rollbackPlayersGameScores(o),(o=new ae(o.index)).addScore("BUST"),t(o)}t(),r.addGameMessage("next")},r.rollbackPlayersGameScores=function(e){return r.state.increaseCurrentPlayerGameScore(e.scores.map((function(e){return e.value})).reduce((function(e,t){return e+t})))},r}return Object(E.a)(n,[{key:"winners",get:function(){var e=this,t=this.state.players.map((function(t,n){return{name:t.name,score:e.state.gameScores[n]}})).sort((function(e,t){return e.score-t.score}));return t.filter((function(e){return e.score>=0&&e.score===t[0].score}))}}]),n}(ct),ft=function(e){Object(_.a)(n,e);var t=Object(H.a)(n);function n(e){var r,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{score:1001,totalRounds:40};return Object(G.a)(this,n),a.rounds=Math.floor(a.totalRounds/e.length),(r=t.call(this,e,a)).computePlayersGameScores=function(e){for(var t=r.state,n=t.currentPlayerGameScore,a=t.currentPlayerIndex,s=t.setPlayerGameScore,o=r.players.length-1;o>=0;o--){s((a+o)%r.players.length,n-e)}},r.rollbackPlayersGameScores=function(e){for(var t=r.state,n=t.currentPlayerGameScore,a=t.currentPlayerIndex,s=t.setPlayerGameScore,o=0;o<r.players.length;o++){s((a+o)%r.players.length,n+e.scores.map((function(e){return e.value})).reduce((function(e,t){return e+t})))}},r}return Object(E.a)(n,[{key:"winners",get:function(){return[this.state.currentPlayer]}}]),n}(ht);function mt(e){var t=e.players,n=e.totalRounds,o=e.score,c=Object(Ge.g)();0===t.length&&c.push("/game-menu");var i=Object(a.useMemo)((function(){return new ft(t,{score:o,totalRounds:n})}),[t,o,n]);Object(a.useEffect)((function(){i.isInitialized()&&(i.start(),i.onGameOver=function(){M.once("CHANGE_BUTTON_CLICK",(function(){i.clearGameMessages(),i.addGameMessage("back"),i.stop(),M.emit("GAME_OVER","zero-one",i.winners),c.push("/game-menu")}))})}),[i,c]);var u=Object(st.a)((function(e){var t=e.game.state,n=t.currentPlayer,a=t.currentPlayerGameScore,s=t.currentPlayerDartScores,o=t.currentPlayerScoreboard,c=t.players,i=t.gameScores;return Object(r.jsx)(Je,{name:"Co-op 1001",player:n,gameScore:a,dartScores:s,scoreboard:o,players:c,gameScores:i})})),l=Object(st.a)((function(e){var t=e.game,n=t.state.messages;return Object(r.jsx)(Rt,{messages:n,onClose:t.handleGameMessageOnClose})}));return Object(r.jsxs)(s.a.Fragment,{children:[Object(r.jsx)(u,{game:i}),Object(r.jsx)(l,{game:i})]})}var bt=O.getFixedT(),gt=function(e){Object(_.a)(n,e);var t=Object(H.a)(n);function n(){var e;Object(G.a)(this,n);for(var r=arguments.length,a=new Array(r),s=0;s<r;s++)a[s]=arguments[s];return(e=t.call.apply(t,[this].concat(a))).onDartboardHit=function(t){var n=e.state,r=n.currentPlayerScoreboard,a=n.increaseCurrentPlayerGameScore,s=n.isLastRoundFinished;a(t.value);var o=r.getCurrentRound();s()?e.handleGameOver():o&&!o.isNewScoreAddable()&&e.addGameMessage("nextPlayer")},e.onChangeButtonClick=function(){var t=e.state,n=t.addRoundForCurrentPlayer,r=t.clearMessages;n(),r(),e.addGameMessage("next")},e.handleGameOver=function(){if(0===e.state.messages.length)e.addGameResultMessage();else{var t=new D(e.state.messages);t.watch((function(n){0===n.length&&(e.addGameResultMessage(),t.stop())}))}e.pause(),M.off("CHANGE_BUTTON_CLICK",e.handleChangeButtonClick),e.winners.length&&Object(d.a)(Array(2*e.winners.length)).forEach((function(){return M.emit("COIN_INSERT")})),e.onGameOver()},e.addGameResultMessage=function(){var t=e.winners.map((function(e){return e.name})),n=1===t.length?t[0]:t.join(bt(", "));t.length?e.addGameMessage("prizeForThreeDartsOnePrizeGame",n):e.addGameMessage("fail")},e}return Object(E.a)(n,[{key:"winners",get:function(){var e=this.state,t=e.gameScores,n=e.players,r=e.scoreboards,a=[];return t.forEach((function(e,t){(e>65||e<21)&&3===r[t].rounds[0].scores.length&&r[t].rounds[0].scores.every((function(e){return e.value>0}))&&a.push(t)})),a.map((function(e){return n[e]}))}}]),n}(ct);function pt(e){var t=e.players,n=e.rounds,o=Object(Ge.g)();0===t.length&&o.push("/game-menu");var c=Object(a.useMemo)((function(){return new gt(t,{rounds:n})}),[t,n]);Object(a.useEffect)((function(){if(c.isInitialized()){var e=Se.theme;Se.setTheme("3-darts-1-prize"),Se.play("bgm"),c.start(),c.onGameOver=function(){M.once("CHANGE_BUTTON_CLICK",(function(){c.clearGameMessages(),c.addGameMessage("back"),c.stop(),Se.stop("bgm"),Se.setTheme(e),M.emit("GAME_OVER","3-darts-1-prize",c.winners),o.push("/game-menu")}))}}}),[c,o]);var i=Object(st.a)((function(e){var t=e.game.state,n=t.currentPlayer,a=t.currentPlayerGameScore,s=t.currentPlayerDartScores,o=t.currentPlayerScoreboard,c=t.players,i=t.gameScores;return Object(r.jsx)(Je,{name:"2165",player:n,gameScore:a,dartScores:s,scoreboard:o,players:c,gameScores:i})})),u=Object(st.a)((function(e){var t=e.game,n=t.state.messages;return Object(r.jsx)(Rt,{messages:n,onClose:t.handleGameMessageOnClose})}));return Object(r.jsxs)(s.a.Fragment,{children:[Object(r.jsx)(i,{game:c}),Object(r.jsx)(u,{game:c})]})}function jt(e){var t=e.players,n=e.rounds,o=e.score,c=Object(Ge.g)();0===t.length&&c.push("/game-menu");var i=Object(a.useMemo)((function(){return new ht(t,{score:o,rounds:n})}),[t,o,n]);Object(a.useEffect)((function(){i.isInitialized()&&(i.start(),i.onGameOver=function(){M.once("CHANGE_BUTTON_CLICK",(function(){i.clearGameMessages(),i.addGameMessage("back"),i.stop(),M.emit("GAME_OVER","zero-one",i.winners),c.push("/game-menu")}))})}),[i,c]);var u=Object(st.a)((function(e){var t=e.game.state,n=t.currentPlayer,a=t.currentPlayerGameScore,s=t.currentPlayerDartScores,o=t.currentPlayerScoreboard,c=t.players,i=t.gameScores;return Object(r.jsx)(Je,{name:"01 game",player:n,gameScore:a,dartScores:s,scoreboard:o,players:c,gameScores:i})})),l=Object(st.a)((function(e){var t=e.game,n=t.state.messages;return Object(r.jsx)(Rt,{messages:n,onClose:t.handleGameMessageOnClose})}));return Object(r.jsxs)(s.a.Fragment,{children:[Object(r.jsx)(u,{game:i}),Object(r.jsx)(l,{game:i})]})}function Ot(e){var t=e.game,n=void 0===t?{}:t,s=e.players,o=void 0===s?[]:s,c=b.isArcadeMode,i=Object(Ge.g)(),u=Object(a.useContext)(P).credit,l=Object(a.useContext)(k).setRandomBackgroundImage;if(Object(a.useEffect)((function(){"ninja-count-up"!==n.name&&l()}),[]),c()&&u<n.credit)return i.push("/"),null;switch(n.name){case"3-darts-1-prize":return Object(r.jsx)(pt,{players:o,rounds:n.rounds});case"co-op-zero-one":return Object(r.jsx)(mt,{players:o,score:n.score,totalRounds:n.totalRounds});case"count-up":return Object(r.jsx)(ut,{players:o,rounds:n.rounds});case"ninja-count-up":return Object(r.jsx)(dt,{players:o,rounds:n.rounds});case"one-round-count-up":return Object(r.jsx)(ut,{players:o,rounds:n.rounds,scoresPerRound:n.scoresPerRound});case"zero-one":return Object(r.jsx)(jt,{players:o,score:n.score,rounds:n.rounds});default:return i.push("/"),null}}var yt=n(149),vt=function(e){return{text:{textTransform:"uppercase"},snackbar:{width:"100%"},snackbarContent:{color:"#000",backgroundColor:"#fff"}}},St=Object(Ee.a)(vt);function xt(e){var t=e.message,n=e.onClose,s=St(),o=Object(a.useState)(!0),c=Object(T.a)(o,2),i=c[0],u=c[1];return Object(a.useEffect)((function(){u(!0),t.soundEffect&&Se.play(t.soundEffect)}),[t]),Object(r.jsx)(yt.a,{anchorOrigin:{vertical:"top",horizontal:"center"},className:s.snackbar,open:i,autoHideDuration:t.autoHideDuration,onClose:function(){u(!1),n&&n(t)},message:Object(r.jsx)(rn,{className:s.text,variant:"h1",children:t.text}),ContentProps:{className:s.snackbarContent}})}var Ct=n(148),It=n(140),Pt=function(e){return{text:{textTransform:"uppercase"},dialogScrollPaper:{alignItems:"flex-end"}}},Tt=Object(Ee.a)(Pt);function wt(e){var t=e.message,n=Tt();return Object(a.useEffect)((function(){t.soundEffect&&Se.play(t.soundEffect)}),[t]),Object(r.jsx)(Ct.a,{open:!0,maxWidth:!1,classes:{scrollPaper:n.dialogScrollPaper},children:Object(r.jsx)(It.a,{children:Object(r.jsx)(rn,{className:n.text,variant:"h1",children:t.text})})})}var kt=function(e){return{root:function(t){return{position:"fixed",zIndex:e.gameAward.zIndex,top:0,left:0,width:"100%",height:"100%",color:"white",backgroundColor:"black",display:"flex",justifyContent:"center",alignItems:"center",backgroundImage:"url(".concat(t.backgroundImageUrl,")"),backgroundPosition:"center",backgroundRepeat:"no-repeat",backgroundSize:"cover"}},text:{textTransform:"capitalize"}}},Gt=Object(Ee.a)(kt);function Dt(e){var t=e.message,n=e.onClose,s=Object(a.useState)(!0),o=Object(T.a)(s,2),c=o[0],i=o[1],u=Object(Ae.a)().t,l=Object(a.useContext)(k).backgroundImage,d=Gt({backgroundImageUrl:l.url});return Object(a.useEffect)((function(){var e=setTimeout((function(){i(!1),n&&n(t)}),t.autoHideDuration);return function(){return clearTimeout(e)}}),[t,n,i]),c?Object(r.jsx)("div",{className:d.root,children:Object(r.jsx)(rn,{className:d.text,variant:"h1",children:u("One bull")})}):null}function Et(e){var t=e.message,n=e.onClose;switch(t.id){case"oneBull":return Object(r.jsx)(Dt,{message:t,onClose:n});case"lowTon":case"hatTrick":default:return null}}function At(e){var t=e.message,n=e.onClose,a=new Ce(O.language);switch(t.type){case"snackbar":return Object(r.jsx)(xt,{message:t,onClose:n});case"dialog":return Object(r.jsx)(wt,{message:t,onClose:n});case"animationDialog":return Object(r.jsx)(Et,{message:t,onClose:n});case"speech":return a.speak(t.text),n&&n(t),null;case"sound":default:return t.soundEffect&&Se.play(t.soundEffect),n&&n(t),null}}function Rt(e){var t=e.messages,n=e.onClose;return Object(r.jsx)(s.a.Fragment,{children:t.map((function(e,t){return Object(r.jsx)(At,{message:e,onClose:n},t)}))})}function Nt(e){var t=e.children,n=e.selectedIndex,r=e.setSelectedIndex;return Object(a.useEffect)((function(){var e=[],a=[],s=function t(n){var r=0;return n.type===$e.a?(r++,e.push(n.props.onMouseOver),a.push(n.props.onClick)):Array.isArray(n)&&n.forEach((function(n){n.type===$e.a?(r++,e.push(n.props.onMouseOver),a.push(n.props.onClick)):Array.isArray(n)&&(r+=t(n))})),r}(t),o=function(){r((function(e){return(e+1)%s})),"function"===typeof e[n]&&e[n]()},c=function(e){return("SBULL"===e||"DBULL"===e)&&"function"===typeof a[n]&&a[n]()};return M.on("CHANGE_BUTTON_CLICK",o),M.on("DARTBOARD_HIT",c),function(){M.off("CHANGE_BUTTON_CLICK",o),M.off("DARTBOARD_HIT",c)}}),[n]),t}var Mt=$.create(b.dartboard);function Lt(){var e=Object(Ae.a)().t,t=Object(Ge.g)();return Object(r.jsxs)(Ze.a,{children:[Object(r.jsx)($e.a,{onClick:function(){Mt.connect().then((function(){return Mt.connected&&t.push("/game-menu")}))},children:Object(r.jsx)(rn,{variant:"h2",children:e("Connect dartboard")})}),Object(r.jsx)($e.a,{children:Object(r.jsx)(rn,{variant:"h6",children:e("version",{version:"0.1.96"})})})]})}var Bt=n(141),Ut=n(142),_t=n(150),Ht=n(143),zt=function(e){return{root:{color:function(e){return e.active?"#ffffff":"#aaaaaa"},backgroundColor:function(e){return e.active?"#000000dd":"#00000066"}},avatar:{backgroundColor:function(t){return"".concat(e.players[t.index])}},score:{textAlign:"center"}}},Ft=Object(Ee.a)(zt);function Kt(e){var t=e.name,n=e.score,a=e.index,s=e.active,o=Ft({index:a,active:s});return Object(r.jsxs)(Bt.a,{className:o.root,children:[Object(r.jsx)(Ut.a,{avatar:Object(r.jsx)(_t.a,{className:o.avatar,children:t.charAt(0).toUpperCase()}),title:Object(r.jsx)(He.a,{variant:"h4",children:t})}),Object(r.jsx)(Ht.a,{className:o.score,children:Object(r.jsx)(He.a,{variant:"h4",children:n})})]})}var Vt=n(108),Yt=n(111),Jt=n(144);function qt(e){var t=e.index,n=e.round,a=e.score;return Object(r.jsx)(rn,{style:a>=100?{color:"".concat(C.players[t])}:{},variant:"h5",children:"".concat(n,". ").concat(a)})}var Qt=function(e){return{round:{paddingLeft:0}}},Wt=Object(Ee.a)(Qt);function Zt(e){var t=e.className,n=e.index,a=e.rounds,s=e.totalRounds,o=Object(Ae.a)().t,c=Wt(),i=a.slice(-8);return Object(r.jsx)("div",{className:t,children:Object(r.jsxs)(Vt.a,{children:[Object(r.jsx)(Yt.a,{className:c.round,children:Object(r.jsx)(Jt.a,{primary:Object(r.jsx)(rn,{variant:"h4",children:"".concat(a.length," / ").concat(s," ").concat(o("Rounds"))})})}),Object(d.a)(Array(i.length).keys()).map((function(e){return Object(r.jsx)(Yt.a,{className:c.round,children:Object(r.jsx)(Jt.a,{primary:0===i[e].scores.length?Object(r.jsx)(rn,{variant:"h5",children:"".concat(i[e].index+1,".")}):"BUST"===i[e].scores[0].displaySymbol?Object(r.jsx)(rn,{variant:"h5",children:"".concat(i[e].index+1,". ").concat(o("Bust \ud83d\ude31"))}):Object(r.jsx)(qt,{index:n,round:i[e].index+1,score:i[e].scores.map((function(e){return e.value})).reduce((function(e,t){return e+t}))})})},e)})).reverse()]})})}var $t=function(e){return{text:{marginLeft:"1rem",textShadow:"-3px 0 white, 0 3px white, 3px 0 white, 0 -3px white"}}},Xt=Object(Ee.a)($t);function en(e){var t=e.className,n=e.scores,a=Xt();return Object(r.jsx)(Vt.a,{className:t,children:n.map((function(e,t){return Object(r.jsx)(Yt.a,{children:Object(r.jsx)(Jt.a,{primary:Object(r.jsx)(He.a,{className:a.text,variant:"h4",children:"".concat(t+1,". ").concat(e.displaySymbol)})})},t)}))})}var tn=n(8),nn={root:{color:"black",textShadow:"-3px 0 white, 0 3px white, 3px 0 white, 0 -3px white"}};function rn(e){var t=Object(tn.a)(nn)(He.a);return Object(r.jsx)(t,Object(z.a)({},e))}n(106);O.changeLanguage(b.language||window.navigator.userLanguage||window.navigator.language),c.a.render(Object(r.jsx)(s.a.StrictMode,{children:Object(r.jsx)(i.a,{i18n:O,children:Object(r.jsx)(u.a,{theme:Object(l.a)(C),children:Object(r.jsx)(we,{children:Object(r.jsx)(w,{children:Object(r.jsx)(Pe,{children:Object(r.jsx)(Ue,{})})})})})})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.register("/service-worker.js?t=".concat((new Date).getTime())),I()}},[[107,1,2]]]);
//# sourceMappingURL=main.e432afac.chunk.js.map